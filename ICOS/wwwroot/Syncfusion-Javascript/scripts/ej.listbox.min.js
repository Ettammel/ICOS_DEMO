/*!
*  filename: ej.listbox.min.js
*  version : 15.4.0.17
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i){"use strict";var o,u,f,e;t.version="15.4.0.17";t.consts={NamespaceJoin:"-"};t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"};t.Orientation={Horizontal:"horizontal",Vertical:"vertical"};t.serverTimezoneOffset=0;t.persistStateVersion=null;t.locales=t.locales||[];Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(n,t){return n[t]!==i});Date.prototype.toISOString||function(){function n(n){var t=String(n);return t.length===1&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();String.format=function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),arguments[n+1]);return t.replace(/\{[0-9]\}/g,"")};jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};t.defineClass=function(n,r,u,f){if(!n||!u)return i;for(var o=n.split("."),s=window,e=0;e<o.length-1;e++)t.isNullOrUndefined(s[o[e]])&&(s[o[e]]={}),s=s[o[e]];return(f||t.isNullOrUndefined(s[o[e]]))&&(r=typeof r=="function"?r:function(){},s[o[e]]=r,s[o[e]].prototype=u),s[o[e]]};t.util={getNameSpace:function(n){var i=n.toLowerCase().split(".");return i[0]==="ej"&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(n,r){var u,e,f;if(!r||!n)return i;for(typeof n!="string"&&(n=JSON.stringify(n)),u=r,e=n.split("."),f=0;f<e.length;f++){if(t.util.isNullOrUndefined(u))break;u=u[e[f]]}return u},createObject:function(n,i,r){for(var o=n.split("."),s=r||window,u=s,e,h=o.length,f=0;f<h;f++)e=o[f],f+1==h?u[e]=i:t.isNullOrUndefined(u[e])&&(u[e]={}),u=u[e];return s},isNullOrUndefined:function(n){return n===i||n===null},print:function(i,r){var f=t.buildTag("div"),o=i.clone(),r,e,u;f.append(o);r||(r=window.open("","print","height=452,width=1024,tabbar=no"));r.document.write("<!DOCTYPE html>");e=n("head").find("link").add("style");t.browserInfo().name==="msie"?(u="",e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.write("<html><head><\/head><body>"+u+f[0].innerHTML+"<\/body><\/html>")):(u="",r.document.write("<html><head>"),e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.writeln(u+"<\/head><body>"),r.document.writeln(f[0].innerHTML+"<\/body><\/html>"));r.document.close();r.focus();setTimeout(function(){t.isNullOrUndefined(r.window)||(r.print(),setTimeout(function(){r.close()},1e3))},1e3)},ieClearRemover:function(t){var i=n(t).height();t.style.paddingTop=parseFloat(i/2)+"px";t.style.paddingBottom=parseFloat(i/2)+"px";t.style.height="1px";t.style.lineHeight="1px"},sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,r,u,f){var s=/^[a-z]*[0-9a-z]+/ig.exec(t)[0],e=/#([_a-z]+[-_0-9a-z]+)/ig.exec(t),o;return e=e?e[e.length-1]:i,o=/\.([a-z]+[-_0-9a-z ]+)/ig.exec(t),o=o?o[o.length-1]:i,n(document.createElement(s)).attr(e?{id:e}:{}).addClass(o||"").css(u||{}).attr(f||{}).html(r||"")},_preventDefaultException:function(n,t){if(n)for(var i in t)if(t[i].test(n[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,n.map(n("body *"),function(t){if(n(t).css("position")=="absolute"||n(t).css("position")=="fixed")return parseInt(n(t).css("z-index"))||1})),(t==i||t==null)&&(t=1),t},blockDefaultActions:function(n){n.cancelBubble=!0;n.returnValue=!1;n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation()},getDimension:function(t,i){var e,u=n(t).parents().andSelf().filter(":hidden"),r,f;return u&&(r={visibility:"hidden",display:"block"},f=[],u.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];f.push(t)}),e=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),u.each(function(n){var i=f[n];for(var t in r)this.style[t]=i[t]})),e},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||n.support.hasPointer?n.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(n("head"),"data-ej-forceset",!1)?t.getBooleanVal(n("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var n=document.documentElement;return n&&n.clientWidth/n.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!(typeof Android=="undefined")},isWindowsWebView:function(){return location.href.indexOf("x-wmapp")!=-1},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-mobile",!1)===!0},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-tablet",!1)===!0||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return n.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u.toLowerCase()=="true":r},_getSkewClass:function(n,t,i){var h=n.width(),c=n.height(),f=n.offset().left,e=n.offset().left+h,o=n.offset().top,s=n.offset().top+c,r=h*.3,u=c*.3;return t<f+r&&i<o+u?"e-m-skew-topleft":t>e-r&&i<o+u?"e-m-skew-topright":t>e-r&&i>s-u?"e-m-skew-bottomright":t<f+r&&i>s-u?"e-m-skew-bottomleft":t>f+r&&i<o+u&&t<e-r?"e-m-skew-top":t<f+r?"e-m-skew-left":t>e-r?"e-m-skew-right":i>s-u?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){n(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(n){var t,i=[];if(n=Object.prototype.toString.call(n)===Object.prototype.toString()?n:{},!Object.keys){for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(n)},_touchStartPoints:function(n,t){if(n){var i=n.touches?n.touches[0]:n;t._distX=0;t._distY=0;t._moved=!1;t._pointX=i.pageX;t._pointY=i.pageY}},_isTouchMoved:function(n,t){if(n){var i=n.touches?n.touches[0]:n,f=i.pageX-t._pointX,e=i.pageY-t._pointY,o=Date.now(),r,u;return t._pointX=i.pageX,t._pointY=i.pageY,t._distX+=f,t._distY+=e,r=Math.abs(t._distX),u=Math.abs(t._distY),!(r<5&&u<5)}},listenEvents:function(n,i,r,u,f,e){for(var o=0;o<n.length;o++)t.listenTouchEvent(n[o],i[o],r[o],u,f,e)},listenTouchEvent:function(i,r,u,f,e,o){for(var s,h=f?"removeEventListener":"addEventListener",a=f?"off":"on",l=n(i),c=0;c<l.length;c++){s=l[c];switch(r){case"touchstart":t._bindEvent(s,h,r,u,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(s,h,r,u,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(s,h,r,u,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(s,h,r,u,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":n(s)[a](r,u);break;default:t.browserInfo().name=="msie"&&t.browserInfo().version<9?e._on(n(s),r,u):s[h](r,u,!0)}}},_bindEvent:function(t,i,r,u,f,e,o){n.support.hasPointer?t[i](window.navigator.pointerEnabled?o:e,u,!0):t[i](r,u,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var i="webkitT,t,MozT,msT,OT".split(","),r,n=0,u=i.length;n<u;n++)if(r=i[n]+"ransform",r in t.styles)return i[n].substr(0,i[n].length-1);return!1},addPrefix:function(n){return t.userAgent()===""?n:(n=n.charAt(0).toUpperCase()+n.substr(1),t.userAgent()+n)},destroyWidgets:function(t){var i=n(t).find("[data-role *= ejm]");i.each(function(t,i){var r=n(i),u=r.data("ejWidgets");u&&r[u]("destroy")})},getAttrVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u:r},getOffset:function(t){var i={},u=t.offset()||{left:0,top:0},r;return n.extend(!0,i,u),n("body").css("position")!="static"&&(r=n("body").offset(),i.left-=r.left,i.top-=r.top),i},getZindexPartial:function(i,r){var e,f,u;if(!t.isNullOrUndefined(i)&&i.length>0)return e=i.parents(),f=n("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&f.splice(f.index(r),1),n(f).each(function(n,t){e.push(t)}),u=Math.max.apply(u,n.map(e,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!u||u<1e4?u=1e4:u+=1,u},isValidAttr:function(t,i){var t=n(t)[0],r;return typeof t[i]!="undefined"?!0:(r=!1,n.each(t,function(n){if(n.toLowerCase()==i.toLowerCase())return r=!0,!1}),r)}};n.extend(t,t.util);t.widgetBase={droppables:{"default":[]},resizables:{"default":[]},_renderEjTemplate:function(i,r,u,f,e){var o=null;if((typeof i=="object"||i.startsWith("#")||i.startsWith("."))&&(o=n(i).attr("type")),o){if(o=o.toLowerCase(),t.template[o])return t.template[o](this,i,r,u,f)}else if(!t.isNullOrUndefined(e))return t.template["text/x-"+e](this,i,r,u,f);return t.template.render(this,i,r,u,f)},destroy:function(){var u,r,f,i;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),n(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(u=this.element.data("ejWidgets")||[],i=0;i<u.length;i++)u[i]==this.pluginName&&u.splice(i,1);for(u.length||this.element.removeData("ejWidgets");this._events;){if(r=this._events.pop(),f=[],!r)break;for(i=0;i<r[1].length;i++)n.isPlainObject(r[1][i])||f.push(r[1][i]);n.fn.off.apply(r[0],f)}this._events=null;this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName);this.element=null;this.model=null}},_on:function(i){this._events||(this._events=[]);for(var r=[].splice.call(arguments,1,arguments.length-1),u={},f=r.length;u&&typeof u!="function";)u=r[--f];return r[f]=t.proxy(r[f],this),this._events.push([i,r,u,r[f]]),n.fn.on.apply(i,r),this},_off:function(t,i,r,u){var e=this._events,s,h,o,f,c;if(!e||!e.length)return this;for(typeof r=="function"&&(s=u,u=r,r=s),h=i.match(/\S+/g)||[""],o=0;o<e.length;o++)if(f=e[o],c=f[0].length&&(!u||f[2]===u)&&(f[1][0]===i||h[0])&&(!r||f[1][1]===r)&&n.inArray(t[0],f[0])>-1,c){n.fn.off.apply(t,u?[i,r,f[3]]:[i,r]);e.splice(o,1);break}return this},_trigger:function(i,r){var f=null,e,u,s={},o,h;return(n.extend(s,r),i in this.model&&(f=this.model[i]),f&&(typeof f=="string"&&(f=t.util.getObject(f,window)),n.isFunction(f)&&(u=t.event(i,this.model,r),o=this.model._applyScope,e=f.call(this,u),o&&o.call(),r&&n.extend(r,u),u.cancel||!t.isNullOrUndefined(e))))?e===!1||u.cancel:(h=Boolean(r),r=r||{},r.originalEventType=i,r.type=this.pluginName+i,u=n.Event(r.type,t.event(r.type,this.model,r)),this.element&&this.element.trigger(u),h&&n.extend(r,u),t.isOnWebForms&&u.cancel==!1&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,r,s),u.cancel)},setModel:function(t,i){var r,f,e,u;if(!this._trigger("modelChange",{changes:t})){for(r in t){if(!i){if(this.model[r]===t[r]){delete t[r];continue}if(n.isPlainObject(t[r])&&(o(this.model[r],t[r]),n.isEmptyObject(t[r]))){delete t[r];continue}}if(this.dataTypes&&(f=this._isValidModelValue(r,this.dataTypes,t),f!==!0))throw"setModel - Invalid input for property :"+r+" - "+f;this.model.notifyOnEachPropertyChanges&&this.model[r]!==t[r]&&(e={oldValue:this.model[r],newValue:t[r]},t[r]=this._trigger(r+"Change",e)?this.model[r]:e.newValue)}n.isEmptyObject(t)||(this._setFirst?(u=t.dataSource,u&&delete t.dataSource,n.extend(!0,this.model,t),u&&(this.model.dataSource=u instanceof Array?u.slice():u,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&this._setModel(t)===!1||n.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(r,u,f){if(!r)return this.model;if(n.isPlainObject(r))return this.setModel(r,f);if(typeof r=="string"){r=r.replace(/^model\./,"");var e=t.getObject(r,this.model);if(u===i&&!f)return e;if(r==="enablePersistence")return this._setState(u);if(f&&u===t.extensions.modelGUID)return this._setModel(t.createObject(r,t.getObject(r,this.model),{}));if(f||t.getObject(r,this.model)!==u)return this.setModel(t.createObject(r,u,{}),f)}return i},_isValidModelValue:function(n,t,i){var r=t[n],u=i[n],f,e,o;if(!r)return!0;if(typeof r=="string"){if(r=="enum"&&(i[n]=u?u.toString().toLowerCase():u,r="string"),r==="array"){if(Object.prototype.toString.call(u)==="[object Array]")return!0}else if(r==="data"||r==="parent"||typeof u===r)return!0;return"Expected type - "+r}if(u instanceof Array){for(e=0;e<u.length;e++)if(f=this._isValidModelValue(n,t,u[e]),f!==!0)return" ["+e+"] - "+f;return!0}for(o in u)if(f=this._isValidModelValue(o,r,u),f!==!0)return o+" : "+f;return!0},_returnFn:function(n,t){t.indexOf(".")!=-1?this._returnFn(n[t.split(".")[0]],t.split(".").slice(1).join(".")):n[t]=n[t].call(n.propName)},_removeCircularRef:function(n){function i(n,r,u){if(typeof n=="object"){if(Array.prototype.indexOf||(Array.prototype.indexOf=function(n){return jQuery.inArray(n,this)}),t.indexOf(n)>=0){delete u[r];return}t.push(n);for(var f in n)n.hasOwnProperty(f)&&i(n[f],f,n);t.pop();return}}var t=[];return i(n,"obj",null),n},stringify:function(n,i){for(var f,u=this.observables,r=0;r<u.length;r++)f=t.getObject(u[r],n),t.isNullOrUndefined(f)||typeof f!="function"||this._returnFn(n,u[r]);return i&&(n=this._removeCircularRef(n)),JSON.stringify(n)},_setState:function(i){if(i===!0){this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler)}else this.deleteState(),n(window).off("unload",this._persistHandler)},_removeProp:function(n,i){t.isNullOrUndefined(n)||(i.indexOf(".")!=-1?this._removeProp(n[i.split(".")[0]],i.split(".").slice(1).join(".")):delete n[i])},persistState:function(){var n,i;if(this._ignoreOnPersist){for(n=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(n,this._ignoreOnPersist[i]);n.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(n={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),n);n.addToPersist=this._addToPersist}else n=r({},this.model);this._persistState&&(n.customPersists={},this._persistState(n.customPersists));window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||window.localStorage.getItem("persistKey")!=null||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(n))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||t.cookie.get("persistKey")!=null||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,n))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var f=null,r,u;if(window.localStorage?f=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(f=t.cookie.get("$ej$"+this.pluginName+this._id)),f&&(r=JSON.parse(f),this._restoreState&&(this._restoreState(r.customPersists),delete r.customPersists),t.isNullOrUndefined(r)===!1&&(t.isNullOrUndefined(r.ignoreOnPersist)?t.isNullOrUndefined(r.addToPersist)||(this._addToPersist=r.addToPersist,delete r.addToPersist):(this._ignoreOnPersist=r.ignoreOnPersist,delete r.ignoreOnPersist))),t.isNullOrUndefined(r)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=n.extend(!0,this.model,r);else{for(u in this._ignoreOnPersist)this._ignoreOnPersist[u].indexOf(".")!==-1?t.createObject(this._ignoreOnPersist[u],t.getObject(this._ignoreOnPersist[u],this.model),r):r[this._ignoreOnPersist[u]]=this.model[this._ignoreOnPersist[u]];this.model=r}!i&&f&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(n){var r=[],t,u;if(typeof n=="object"?r=n:typeof n=="string"&&r.push(n),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<r.length;t++)this._ignoreOnPersist.push(r[t]);else for(t=0;t<r.length;t++)u=this._addToPersist.indexOf(r[t]),this._addToPersist.splice(u,1)},addToPersist:function(t){var u=[],f,r;if(typeof t=="object"?u=t:typeof t=="string"&&u.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],r=0;r<u.length;r++)f=this._ignoreOnPersist.indexOf(u[r]),this._ignoreOnPersist.splice(f,1);else for(r=0;r<u.length;r++)n.inArray(u[r],this._addToPersist)===-1&&this._addToPersist.push(u[r])},formatting:function(i,r,u){var f,l,h,c,a,v,s,e,y;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),u=t.preferredCulture(u)?u:"en-US",f=i,l=i.split("{0:"),a=i.split("}"),h=l[0],c=a[1],typeof r=="string"&&n.isNumeric(r)&&(r=Number(r)),i.indexOf("{0:")!=-1)return v=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),s=v.exec(i),s!=null&&r!=null?h!=null&&c!=null?h+t.format(r,s[2],u)+c:t.format(r,s[2],u):r!=null?r:"";if(f.startsWith("{")&&!f.startsWith("{0:")){var o=f.split(""),r=(r||"")+"",p=r.split(""),w=/[0aA\*CN<>\?]/gm;for(e=0,y=0;e<o.length;e++)o[e]=w.test(o[e])?"{"+y+++"}":o[e];return String.format.apply(String,[o.join("")].concat(p)).replace("{","").replace("}","")}return this.data!=null&&this.data.Value==null?(n.each(this.data,function(n,t){f=f.replace(new RegExp("\\{"+n+"\\}","gm"),t)}),f):this.data.Value}};t.WidgetBase=function(){};o=function(t,i){for(var r in t)t[r]===i[r]&&delete i[r],n.isPlainObject(i[r])&&n.isPlainObject(t[r])&&o(t[r],i[r])};t.widget=function(f,o,h){var a,l,v;if(typeof f=="object"){h=o;for(a in f)l=f[a],l instanceof Array&&(h._rootCSS=l[1],l=l[0]),t.widget(a,l,h),f[a]instanceof Array&&(h._rootCSS="");return}v=h._rootCSS||t.getNameSpace(o);h=t.defineClass(o,function(i,e){var y,p,w,b,c,g,k,d,nt,l,a;if(this.sfType=o,this.pluginName=f,this.instance=s,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},n.extend(this,t.widgetBase),this.dataTypes)for(y in e)if(p=this._isValidModelValue(y,this.dataTypes,e),p!==!0)throw"setModel - Invalid input for property :"+y+" - "+p;for(w=i.data("ejWidgets")||[],w.push(f),i.data("ejWidgets",w),c=0;t.widget.observables&&this.observables&&c<this.observables.length;c++)b=t.getObject(this.observables[c],e),b&&t.createObject(this.observables[c],t.widget.observables.register(b,this.observables[c],this,i),e);if(this.element=i.jquery?i:n(i),this.model=r(!0,{},h.prototype.defaults,e),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(v+" e-js").data(f,this),this._id=i[0].id,this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(c in window.localStorage)c.indexOf("$ej$")!=-1&&(window.localStorage.removeItem(c),window.localStorage.setItem("persistKey",t.persistStateVersion));else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){g=document.cookie.split(/; */);for(k in g)k.indexOf("$ej$")!=-1&&(t.cookie.set(k.split("=")[0],model,new Date),t.cookie.set("persistKey",t.persistStateVersion))}this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler);this.restoreState(!0)}if(this._init(e),typeof this.model.keyConfigs=="object"&&!(this.model.keyConfigs instanceof Array)){d=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(nt in this.model.keyConfigs)if(nt!=="focus"){d=!0;break}d&&this._keyPressed&&(l=i,a="keydown",this.keySettings&&(l=this.keySettings.getElement?this.keySettings.getElement()||l:l,a=this.keySettings.event||a),this._on(l,a,function(n){if(this.model.keyConfigs){var t=u.getActionFromCode(this.model.keyConfigs,n.which,n.ctrlKey,n.shiftKey,n.altKey),i={code:n.which,ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};t&&this._keyPressed(t,n.target,i,n)===!1&&n.preventDefault()}}))}this._trigger("create")},h);n.fn[f]=function(r){for(var w,p=r,u,y=0;y<this.length;y++){var s=n(this[y]),l=s.data(f),b=l&&s.hasClass(v),a=null;if(this.length>0&&n.isPlainObject(p)&&(r=t.copyObject({},p)),!b){h.prototype._requiresID!==!0||n(this[y]).attr("id")||s.attr("id",c("ejControl_"));r&&typeof r!="object"?e(f+": methods/properties can be accessed only after plugin creation"):(h.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in h.prototype.defaults&&f!="ejChart"&&(!r||"locale"in r?t.isNullOrUndefined(r)&&(r={},r.locale=t.setCulture().name):r.locale=t.setCulture().name),new h(s,r));continue}if(r)if(u=[].slice.call(arguments,1),this.length>0&&u[0]&&p==="option"&&n.isPlainObject(u[0])&&(u[0]=t.copyObject({},u[0])),n.isPlainObject(r))l.setModel(r);else if((r.indexOf("_")===0||t.isNullOrUndefined(a=t.getObject(r,l)))&&r.indexOf("model.")!==0)e(o+": function/property - "+r+" does not exist");else{if(!a||!n.isFunction(a)){if(arguments.length==1)return a;l.option(r,arguments[1]);continue}if(w=a.apply(l,u),w!==i)return w}}return f.indexOf("ejm")!=-1&&t.widget.registerInstance(s,f,o,h.prototype),this};t.widget.register(f,o,h.prototype);t.loadLocale(f)};t.loadLocale=function(i){for(var f=t.locales,r=0,u=f.length;r<u;r++)n.fn["Locale_"+f[r]](i)};n.extend(t.widget,function(){var n={},i=[],r=function(i,r,u){t.isNullOrUndefined(n[i])||e("ej.widget : The widget named "+i+" is trying to register twice.");n[i]={name:i,className:r,proto:u};t.widget.extensions&&t.widget.extensions.registerWidget(i)},u=function(n,t,r,u){i.push({element:n,pluginName:t,className:r,proto:u})};return{register:r,registerInstance:u,registeredWidgets:n,registeredInstances:i}}());t.widget.destroyAll=function(n){var u,r,t,i;if(n&&n.length)for(u=0;u<n.length;u++)if(r=n.eq(u).data(),t=r.ejWidgets,t&&t.length)for(i=0;i<t.length;i++)r[t[i]]&&r[t[i]].destroy&&r[t[i]].destroy()};t.cookie={get:function(n){var t=RegExp(n+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(n,t,i){typeof t=="object"&&(t=JSON.stringify(t));t=escape(t)+(i==null?"":"; expires="+i.toUTCString());document.cookie=n+"="+t}};u={getActionFromCode:function(n,t,i,r,f){var s,o,e;i=i||!1;r=r||!1;f=f||!1;for(s in n)if(s!=="focus")for(o=u.getKeyObject(n[s]),e=0;e<o.length;e++)if(t===o[e].code&&i==o[e].isCtrl&&r==o[e].isShift&&f==o[e].isAlt)return s;return null},getKeyObject:function(t){for(var f,o,e,s={isCtrl:!1,isShift:!1,isAlt:!1},c=n.extend(!0,{},s),r=t.split(","),h=[],i=0;i<r.length;i++){if(f=null,r[i].indexOf("+")!=-1)for(o=r[i].split("+"),e=0;e<o.length;e++)f=u.getResult(n.trim(o[e]),s);else f=u.getResult(n.trim(r[i]),n.extend(!0,{},c));h.push(f)}return h},getResult:function(n,t){return n==="ctrl"?t.isCtrl=!0:n==="shift"?t.isShift=!0:n==="alt"?t.isAlt=!0:t.code=parseInt(n,10),t}};t.getScrollableParents=function(t){return n(t).parentsUntil("html").filter(function(){return n(this).css("overflow")!="visible"}).add(n(window))};t.browserInfo=function(){var i={},r=[],e={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},o,s,f,u;for(o in e)if(e.hasOwnProperty(o)&&(r=navigator.userAgent.match(e[o]),r)){if(i.name=r[1].toLowerCase()=="opr"?"opera":r[1].toLowerCase(),i.version=r[2],i.culture={},i.culture.name=i.culture.language=navigator.language||navigator.userLanguage,typeof t.globalize!="undefined"){for(s=t.preferredCulture().name,f=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),u=0;navigator.languages&&u<navigator.languages.length;u++)if(f=t.preferredCulture(navigator.languages[u]),f.language==navigator.languages[u])break;t.preferredCulture(s);n.extend(!0,i.culture,f)}!navigator.userAgent.match(/Trident\/7\./)||(i.name="msie");break}return i.isMSPointerEnabled=i.name=="msie"&&i.version>9&&window.navigator.msPointerEnabled,i.pointerEnabled=window.navigator.pointerEnabled,i};t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"};t.event=function(t,i,r){return n.extend(r||{},{type:t,model:i,cancel:!1})};t.proxy=function(n,t,i){return!n||typeof n!="function"?null:"on"in n&&t?i?n.on(t,i):n.on(t):function(){var r=i?[i]:[];return r.push.apply(r,arguments),n.apply(t||this,r)}};t.hasStyle=function(n){var r=document.documentElement.style,i,t;if(n in r)return!0;for(i=["ms","Moz","Webkit","O","Khtml"],n=n[0].toUpperCase()+n.slice(1),t=0;t<i.length;t++)if(i[t]+n in r)return!0;return!1};Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1};String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n};var r=t.copyObject=function(n,u){var h=2,c,f,s,o,e,l;for(typeof n!="boolean"&&(h=1),s=[].slice.call(arguments,h),h===1&&(u=n,n=i),o=0;o<s.length;o++)for(e in s[o])if(c=u[e],f=s[o][e],f!==i&&c!==f&&s[o]!==f&&u!==f)if(f instanceof Array)if(o===0&&n)for(u[e]=[],l=0;l<f.length;l++)r(!0,u[e],f);else u[e]=f.slice();else t.isPlainObject(f)?(u[e]=c||{},n?r(n,u[e],f):r(u[e],f)):u[e]=f;return u},s=function(){return this},h=0,c=function(n){return n+h++};t.template={};t.template.render=t.template["text/x-jsrender"]=function(t,i,r,u,f){i.slice(0,1)!=="#"&&(i=["<div>",i,"<\/div>"].join(""));var e={prop:f,index:u};return n(i).render(r,e)};t.isPlainObject=function(n){if(!n||t.DataManager!==i&&n instanceof t.DataManager||typeof n!="object"||n.nodeType||jQuery.isWindow(n))return!1;try{if(n.constructor&&!n.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(f){return!1}var r,u=t.support.isOwnLast;for(r in n)if(u)break;return r===i||n.hasOwnProperty(r)};f=!1;t.util.valueFunction=function(n){return function(r,u){var e=t.getObject(n,this.model);if(f===!1&&(f=t.getObject("observables.getValue",t.widget)),r===i)return t.isNullOrUndefined(f)?typeof e=="function"?e.call(this):e:f(e,u);typeof e=="function"?(this["ob.values"][n]=r,e.call(this,r)):t.createObject(n,r,this.model)}};t.util.getVal=function(n){return typeof n=="function"?n():n};t.support={isOwnLast:function(){var n=function(){this.a=1},t;n.prototype.b=1;for(t in new n)return t==="b"}(),outerHTML:function(){return document.createElement("div").outerHTML!==i}()};e=t.throwError=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}};t.getRandomValue=function(n,r){var u,f;return n===i||r===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(f=new Uint16Array(1),window.crypto.getRandomValues(f),u=f[0]%(r-n)+n):u=Math.random()*(r-n)+n,u|0)};t.extensions={};t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(n){var t=$(this);$.each(n,function(n,i){i&&i.specified&&t.attr(i.name,i.value)})};$.fn.removeEleAttrs=function(n){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,r){r&&r.specified&&n.test(r.name)&&t.removeAttr(r.name)})})};$.fn.attrNotStartsWith=function(n){var u=this,r=[],t;for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++)if(t[i]&&t[i].specified&&n.test(t[i].name))continue;else r.push(t[i]);return r};$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var n=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&i.value===""&&n.removeAttr(i.name)})})};$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:ej.userAgent()!==!1,pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles});$.extend($.expr[":"],{attrNotStartsWith:function(n,t,i){for(var u=n.attributes,r=0;r<u.length;r++)if(u[r].nodeName.indexOf(i[3])===0)return!1;return!0}});var n=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return n.apply(this,arguments)}}();window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i,r){"use strict";var e,nt,tt,y,d,w,h,c,f;t.DataManager=function(i,u,f){if(!(this instanceof t.DataManager))return new t.DataManager(i,u,f);i||(i=[]);f=f||i.adaptor;typeof f=="string"&&(f=new t[f]);var e=[],o=this;return i instanceof Array?e={json:i,offline:!0}:typeof i=="object"?n.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),e={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==r?i.offline:i.adaptor=="remoteSaveAdaptor"||i.adaptor instanceof t.remoteSaveAdaptor?!1:i.url?!1:!0,requiresFormat:i.requiresFormat}):(i.jquery||pt(i))&&(e={json:this._getJsonFromElement(i),offline:!0,table:i}):typeof i=="string"&&(e={url:i,offline:!1,dataType:"json",json:[]}),e.requiresFormat!==r||t.support.cors||(e.requiresFormat=c(e.crossDomain)?!0:e.crossDomain),e.antiForgery&&this.antiForgeryToken(),e.dataType===r&&(e.dataType="json"),this.dataSource=e,this.defaultQuery=u,e.url&&e.offline&&!e.json.length?(this.isDataAvailable=!1,this.adaptor=f||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(u||t.Query()).done(function(n){o.dataSource.offline=!0;o.isDataAvailable=!0;e.json=n.result;o.adaptor=new t.JsonAdaptor})):this.adaptor=e.offline?new t.JsonAdaptor:new t.ODataAdaptor,!e.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(e.jsonp="callback"),this.adaptor=f||this.adaptor,e.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,e.timeTillExpiration,e.cachingPageSize)),this};t.DataManager.prototype={setDefaultQuery:function(n){this.defaultQuery=n},executeQuery:function(i,u,e,o){var s,h,c;return typeof i=="function"&&(o=e,e=u,u=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||f("DataManager - executeQuery() : A query is required to execute"),s=n.Deferred(),s.then(u,e,o),h={query:i},this.dataSource.offline||this.dataSource.url==r?t.isNullOrUndefined(this.dataSource.async)||this.dataSource.async!=!1?d(function(){this._localQueryProcess(i,h,s)},this):this._localQueryProcess(i,h,s):(c=this.adaptor.processQuery(this,i),t.isNullOrUndefined(c.url)?d(function(){h=this._getDeferedArgs(i,c,h);s.resolveWith(this,[h])},this):this._makeRequest(c,s,h,i)),s.promise()},_localQueryProcess:function(n,t,i){var r=this.executeLocal(n);t=this._getDeferedArgs(n,r,t);i.resolveWith(this,[t])},_getDeferedArgs:function(n,t,i){return n._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=rt(n._fromTable,i.result,this),i.getKnockoutModel=ut(i.result),i},executeLocal:function(i){var e,r;if(this.defaultQuery||i instanceof t.Query||f("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||f("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,e=this.adaptor.processQuery(this,i),i._subQuery){var o=i._subQuery._fromTable,s=i._subQuery._lookup,u=i._requiresCount?e.result:e;for(s&&s instanceof Array&&k(i._subQuery._fKey,o,u,s,i._subQuery._key),r=0;r<u.length;r++)u[r][o]instanceof Array&&(u[r]=n.extend({},u[r]),u[r][o]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(u[r][o].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(e,this,i)},_makeRequest:function(i,r,u,f){var o=!!f._subQuerySelector,c=h(function(n){u.error=n;r.rejectWith(this,[u])},this),l=h(function(n,t,i,e,s,h,c){o||(u.xhr=i,u.count=parseInt(t,10),u.result=n,u.request=e,u.aggregates=h,u.getTableModel=rt(f._fromTable,n,this),u.getKnockoutModel=ut(n),u.actual=s,u.virtualSelectRecords=c,r.resolveWith(this,[u]))},this),a=h(function(t,i){var r=n.Deferred(),h={parent:u},e,s;return f._subQuery._isChild=!0,e=this.adaptor.processQuery(this,f._subQuery,t?this.adaptor.processResponse(t):i),s=this._makeRequest(e,r,h,f._subQuery),o||r.then(function(n){t&&(k(f._subQuery._fKey,f._subQuery._fromTable,t,n,f._subQuery._key),l(t))},c),s},this),v=w(function(n,i,r,u){r.getResponseHeader("Content-Type").indexOf("xml")==-1&&t.dateParse&&(n=t.parseJSON(n));var e=this.adaptor.processResponse(n,this,f,r,u),s=0,h=null,c=n.virtualSelectRecords;if(f._requiresCount&&(s=e.count,h=e.aggregates,e=e.result),!f._subQuery){l(e,s,r,u,n,h,c);return}o||a(e)},this),e=n.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:v,error:c},i),s;return"async"in this.dataSource&&(e.async=this.dataSource.async),e=n.ajax(e),o&&(s=f._subQuerySelector.call(this,{query:f._subQuery,parent:f}),s&&s.length?(e=n.when(e,a(null,s)),e.then(w(function(n,t,i){var r=this.adaptor.processResponse(n[0],this,f,n[2],i[0]),e=0,u;f._requiresCount&&(e=r.count,r=r.result);u=this.adaptor.processResponse(t[0],this,f._subQuery,t[2],i[1]);e=0;f._subQuery._requiresCount&&(e=u.count,u=u.result);k(f._subQuery._fKey,f._subQuery._fromTable,r,u,f._subQuery._key);o=!1;l(r,e,n[2])},this),c)):o=!1),e},_beforeSend:function(n,t){var i,f,r,u;for(this.adaptor.beforeSend(this,n,t),i=this.dataSource.headers,r=0;i&&r<i.length;r++){f=[];for(u in i[r])f.push(u),n.setRequestHeader(u,i[r][u])}},saveChanges:function(i,r,u,f){var s,o,e;return(u instanceof t.Query&&(f=u,u=null),s={url:u,key:r||this.dataSource.key},o=this.adaptor.batchRequest(this,i,s,f),this.dataSource.offline)?o:(e=n.Deferred(),n.ajax(n.extend({beforeSend:h(this._beforeSend,this),success:w(function(n,t,u,f){e.resolveWith(this,[this.adaptor.processResponse(n,this,null,u,f,i,r)])},this),error:function(n){e.rejectWith(this,[{error:n}])}},o)),e.promise())},insert:function(i,r,f){var o,e;return(i=u.replacer(i),r instanceof t.Query&&(f=r,r=null),o=this.adaptor.insert(this,i,r,f),this.dataSource.offline)?o:(e=n.Deferred(),n.ajax(n.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(o){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);e.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){e.rejectWith(this,[{error:n,dataManager:this}])}},o)),e.promise())},antiForgeryToken:function(){var i;return t.isNullOrUndefined(n("input[name='_ejRequestVerifyToken']").val())?i=t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body"):n("input[name='_ejRequestVerifyToken']").val(t.getGuid()),t.cookie.set("_ejRequestVerifyToken",n("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:n("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,r,f,e){var s,o;return(typeof r=="object"&&(r=r[i]),f instanceof t.Query&&(e=f,f=null),s=this.adaptor.remove(this,i,r,f,e),this.dataSource.offline)?s:(o=n.Deferred(),n.ajax(n.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(e){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);o.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){o.rejectWith(this,[{error:n,dataManager:this}])}},s)),o.promise())},update:function(i,r,f,e){var s,o;return(r=u.replacer(r),f instanceof t.Query&&(e=f,f=null),s=this.adaptor.update(this,i,r,f,e),this.dataSource.offline)?s:(o=n.Deferred(),n.ajax(n.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(e){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);o.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){o.rejectWith(this,[{error:n,dataManager:this}])}},s)),o.promise())},_getJsonFromElement:function(i){typeof i=="string"&&(i=n(n(i).html()));i=i.jquery?i[0]:i;var r=i.tagName.toLowerCase();return r!=="table"&&f("ej.DataManager : Unsupported htmlElement : "+r),t.parseTable(i)}};var k=function(n,i,r,u,e){var o,s={},c,h;for(u.result&&(u=u.result),u.GROUPGUID&&f("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<u.length;o++)h=t.getObject(n,u[o]),c=s[h]||(s[h]=[]),c.push(u[o]);for(o=0;o<r.length;o++)r[o][i]=s[t.getObject(e||n,r[o])]},l={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},u={parseJson:function(n){var t=typeof n;return t==="string"?n=JSON.parse(n,u.jsonReviver):n instanceof Array?u.iterateAndReviveArray(n):t==="object"&&u.iterateAndReviveJson(n),n},iterateAndReviveArray:function(n){for(var t=0;t<n.length;t++)typeof n[t]=="object"?u.iterateAndReviveJson(n[t]):n[t]=typeof n[t]!="string"||/^[\s]*\[|^[\s]*\{|\"/g.test(n[t])?u.parseJson(n[t]):u.jsonReviver("",n[t])},iterateAndReviveJson:function(n){var t;for(var i in n)i.startsWith("__")||(t=n[i],typeof t=="object"?t instanceof Array?u.iterateAndReviveArray(t):u.iterateAndReviveJson(t):n[i]=u.jsonReviver(i,t))},jsonReviver:function(n,t){var f=t,r,i;if(typeof t=="string"){if(r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),r)return u.replacer(new Date(parseInt(r[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=u.replacer(new Date(t)),isNaN(t)&&(i=f.split(/[^0-9]/),t=u.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]))))}return t},isJson:function(n){return typeof n[0]=="string"?n:t.parseJSON(n)},isGuid:function(n){var t=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(n);return t!=null},replacer:function(n){return t.isPlainObject(n)?u.jsonReplacer(n):n instanceof Array?u.arrayReplacer(n):n instanceof Date?u.jsonReplacer({val:n}).val:n},jsonReplacer:function(n){var i;for(var r in n)(i=n[r],i instanceof Date)&&(n[r]=new Date(+i+t.serverTimezoneOffset*36e5));return n},arrayReplacer:function(n){for(var i=0;i<n.length;i++)t.isPlainObject(n[i])?n[i]=u.jsonReplacer(n[i]):n[i]instanceof Date&&(n[i]=u.jsonReplacer({date:n[i]}).date);return n}};t.isJSON=u.isJson;t.parseJSON=u.parseJson;t.dateParse=!0;t.isGUID=u.isGuid;t.Query=function(n){return(this instanceof t.Query)?(this.queries=[],this._key="",this._fKey="",typeof n=="string"?this._fromTable=n||"":n&&n instanceof Array&&(this._lookup=n),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(n)};t.Query.prototype={key:function(n){return typeof n=="string"&&(this._key=n),this},using:function(n){return n instanceof t.DataManager?(this.dataManagar=n,this):f("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(n,i,r,u){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeQuery(this,i,r,u):f("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(n){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeLocal(this):f("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var n=new t.Query;return n.queries=this.queries.slice(0),n._key=this._key,n._isChild=this._isChild,n.dataManagar=this.dataManager,n._fromTable=this._fromTable,n._params=this._params.slice(0),n._expands=this._expands.slice(0),n._sortedColumns=this._sortedColumns.slice(0),n._groupedColumns=this._groupedColumns.slice(0),n._subQuerySelector=this._subQuerySelector,n._subQuery=this._subQuery,n._fKey=this._fKey,n._requiresCount=this._requiresCount,n},from:function(n){return typeof n=="string"&&(this._fromTable=n),this},addParams:function(n,i){return typeof i=="function"||t.isPlainObject(i)?typeof i=="function"&&this._params.push({key:n,fn:i}):this._params.push({key:n,value:i}),this},expand:function(n){return this._expands=typeof n=="string"?[].slice.call(arguments,0):n.slice(0),this},where:function(n,i,r,u){i=(i||t.FilterOperators.equal).toLowerCase();var e=null;return typeof n=="string"?e=new t.Predicate(n,i,r,u):n instanceof t.Predicate?e=n:f("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:e}),this},search:function(n,i,r,u){i&&typeof i!="boolean"?typeof i=="string"&&(i=[i]):(i=[],u=i);typeof r=="boolean"&&(u=r,r=null);r=r||t.FilterOperators.contains;r.length<3&&(r=t.data.operatorSymbols[r]);var f=t.data.fnOperators[r]||t.data.fnOperators.processSymbols(r);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:r,searchKey:n,ignoreCase:u,comparer:f}}),this},sortBy:function(n,i,r){var o=t.sortOrder.Ascending,s,f,u,e;if(typeof n=="string"&&n.toLowerCase().endsWith(" desc")&&(n=n.replace(/ desc$/i,""),i=t.sortOrder.Descending),n instanceof Array){for(u=0;u<n.length;u++)this.sortBy(n[u],i,r);return this}if(typeof i=="boolean"?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:typeof i=="function"&&(o="custom"),i&&typeof i!="string"||(o=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),r)for(s=a(this.queries,"onSortBy"),u=0;u<s.length;u++)if(f=s[u].e.fieldName,typeof f=="string"){if(f===n)return this}else if(f instanceof Array)for(e=0;e<f.length;e++)if(f[e]===n||n.toLowerCase()===f[e]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:n,comparer:i,direction:o}}),this},sortByDesc:function(n){return this.sortBy(n,t.sortOrder.Descending)},group:function(n,t){return this.sortBy(n,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:n,fn:t}}),this},page:function(n,t){return this.queries.push({fn:"onPage",e:{pageIndex:n,pageSize:t}}),this},range:function(n,t){return(typeof n!="number"||typeof t!="number")&&f("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:n,end:t}}),this},take:function(n){return typeof n!="number"&&f("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:n}}),this},skip:function(n){return typeof n!="number"&&f("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:n}}),this},select:function(n){return typeof n=="string"&&(n=[].slice.call(arguments,0)),n instanceof Array||f("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:n}}),this},hierarchy:function(n,i){return n&&n instanceof t.Query||f("Query() - hierarchy : query must be instance of ej.Query"),typeof i=="function"&&(this._subQuerySelector=i),this._subQuery=n,this},foreignKey:function(n){return typeof n=="string"&&(this._fKey=n),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(n,t){this.queries.push({fn:"onAggregates",e:{field:t,type:n}})}};t.Adaptor=function(n){this.dataSource=n;this.pvt={};this.init.apply(this,[].slice.call(arguments,1))};t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t;this.options&&(this.options=n.extend({},this.options));this.init.apply(this,[].slice.call(arguments,0));this.pvt={}},u,r;i.prototype=new this.type;i.prototype.type=i;u=i.prototype.base={};for(r in t)i.prototype[r]&&(u[r]=i.prototype[r]);return n.extend(!0,i.prototype,t),i},processQuery:function(){},processResponse:function(n){return n.d?n.d:n},convertToQueryString:function(t){return n.param(t)},type:t.Adaptor};t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(n,t,i){var w=a(t.queries,"onSortBy"),d=a(t.queries,"onGroup"),nt=a(t.queries,"onWhere"),tt=a(t.queries,"onSearch"),it=a(t.queries,"onAggregates"),l=g(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),rt=t._params,b=n.dataSource.url,u,y,p=null,h=this.options,s={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]},f,r,v,k;for(l.onPage?(u=l.onPage,y=e(u.pageIndex,t),p=e(u.pageSize,t),y=(y-1)*p):l.onRange&&(u=l.onRange,y=u.start,p=u.end-u.start),f=0;f<w.length;f++)u=e(w[f].e.fieldName,t),s.sorted.push(o(this,"onEachSort",{name:u,direction:w[f].e.direction},t));for(i&&(u=this.getFiltersFrom(i,t),u&&s.filters.push(o(this,"onEachWhere",u.toJSON(),t))),f=0;f<nt.length;f++){s.filters.push(o(this,"onEachWhere",nt[f].e.toJSON(),t));for(v in s.filters[f])c(s[v])&&delete s[v]}for(f=0;f<tt.length;f++)u=tt[f].e,s.searches.push(o(this,"onEachSearch",{fields:u.fieldNames,operator:u.operator,key:u.searchKey,ignoreCase:u.ignoreCase},t));for(f=0;f<d.length;f++)s.grouped.push(e(d[f].e.fieldName,t));for(f=0;f<it.length;f++)u=it[f].e,s.aggregates.push({type:u.type,field:e(u.field,t)});r={};r[h.from]=t._fromTable;h.expand&&(r[h.expand]=t._expands);r[h.select]=l.onSelect?o(this,"onSelect",e(l.onSelect.fieldNames,t),t):"";r[h.count]=t._requiresCount?o(this,"onCount",t._requiresCount,t):"";r[h.search]=s.searches.length?o(this,"onSearch",s.searches,t):"";r[h.skip]=l.onSkip?o(this,"onSkip",e(l.onSkip.nos,t),t):"";r[h.take]=l.onTake?o(this,"onTake",e(l.onTake.nos,t),t):"";r[h.antiForgery]=n.dataSource.antiForgery?n.antiForgeryToken().value:"";r[h.where]=s.filters.length||s.searches.length?o(this,"onWhere",s.filters,t):"";r[h.sortBy]=s.sorted.length?o(this,"onSortBy",s.sorted,t):"";r[h.group]=s.grouped.length?o(this,"onGroup",s.grouped,t):"";r[h.aggregates]=s.aggregates.length?o(this,"onAggregates",s.aggregates,t):"";r.param=[];o(this,"addParams",{dm:n,query:t,params:rt,reqParams:r});for(v in r)(c(r[v])||r[v]===""||r[v].length===0||v==="params")&&delete r[v];return(h.skip in r&&h.take in r||p===null||(r[h.skip]=o(this,"onSkip",y,t),r[h.take]=o(this,"onTake",p,t)),k=this.pvt,this.pvt={},this.options.requestType==="json")?{data:JSON.stringify(r),url:b,ejPvtData:k,type:"POST",contentType:"application/json; charset=utf-8"}:(u=this.convertToQueryString(r,t,n),u=(n.dataSource.url.indexOf("?")!==-1?"&":"/")+u,{type:"GET",url:u.length?b.replace(/\/*$/,u):b,ejPvtData:k})},convertToQueryString:function(t,i,r){return r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1?n.param(t):"?"+n.param(t)},processResponse:function(n,i,u,f,e,o){var c=e.ejPvtData||{},v=n.groupDs,y,a,h,s,d,w;if(f&&f.getResponseHeader("Content-Type")&&f.getResponseHeader("Content-Type").indexOf("xml")!=-1&&n.nodeType==9)return u._requiresCount?{result:[],count:0}:[];if(y=JSON.parse(e.data),y&&y.action==="batch"&&n.added)return o.added=n.added,o;if(n.d&&(n=n.d),c&&c.aggregates&&c.aggregates.length){var l=c.aggregates,h={},p,k={};for(("count"in n)&&(h.count=n.count),n.result&&(h.result=n.result),n.aggregate&&(n=n.aggregate),s=0;s<l.length;s++)p=t.aggregates[l[s].type],p&&(k[l[s].field+" - "+l[s].type]=p(n,l[s].field));h.aggregates=k;n=h}if(c&&c.groups&&c.groups.length){for(a=c.groups,h={},("count"in n)&&(h.count=n.count),n.aggregates&&(h.aggregates=n.aggregates),n.result&&(n=n.result),s=0;s<a.length;s++)d=null,w=b(a[s],u.queries),t.isNullOrUndefined(v)||(v=t.group(v,a[s],null,w)),n=t.group(n,a[s],c.aggregates,w,d,v);return h.count!=r?h.result=n:h=n,h}return n},onGroup:function(n){this.pvt.groups=n},onAggregates:function(n){this.pvt.aggregates=n},batchRequest:function(n,t,i,r){var u={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{type:"POST",url:n.dataSource.batchUrl||n.dataSource.crudUrl||n.dataSource.removeUrl||n.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u)}},beforeSend:function(){},insert:function(n,t,i,r){var u={value:t,table:i,action:"insert",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{url:n.dataSource.insertUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(u)}},remove:function(n,t,i,r,u){var f={key:i,keyColumn:t,table:r,action:"remove",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return u&&this.addParams({dm:n,query:u,params:u._params,reqParams:f}),{type:"POST",url:n.dataSource.removeUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(f)}},update:function(n,t,i,r,u){var f={value:i,action:"update",keyColumn:t,key:i[t],table:r,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return u&&this.addParams({dm:n,query:u,params:u._params,reqParams:f}),{type:"POST",url:n.dataSource.updateUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(f)}},getFiltersFrom:function(n,i){var r;n instanceof Array&&n.length||f("ej.SubQuery: Array of key values required");var u=i._fKey,e,o=u,h=i._key,s=[],c=typeof n[0]!="object";for(typeof n[0]!="object"&&(o=null),r=0;r<n.length;r++)e=c?n[r]:t.pvt.getObject(h||o,n[r]),s.push(new t.Predicate(u,"==",e));return t.Predicate.or(s)},addParams:function(n){var e=n.dm,u=n.query,o=n.params,i=n.reqParams,r,t;for(i.params={},r=0;t=o[r];r++)i[t.key]&&f("ej.Query: Custom Param is conflicting other request arguments"),i[t.key]=t.value,t.fn&&(i[t.key]=t.fn.call(u,t.key,u,e)),i.params[t.key]=i[t.key]}});t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(n,i,r){var u=t.UrlAdaptor.prototype.processQuery(n,i,r),e=t.parseJSON(u.data),f={};return f.value=e,o(this,"addParams",{dm:n,query:i,params:i._params,reqParams:f}),{data:JSON.stringify(f),url:u.url,ejPvtData:u.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(n){var s=n.dm,o=n.query,h=n.params,i=n.reqParams,u,t,r,e;for(i.params={},u=0;t=h[u];u++)i[t.key]&&f("ej.Query: Custom Param is conflicting other request arguments"),r=t.key,e=t.value,t.fn&&(e=t.fn.call(o,t.key,o,s)),i[r]=e,i.params[r]=i[r]}});t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(n,i,r){var f,u;t.isNullOrUndefined(n)||(this.cacheAdaptor=n);this.pageSize=r;this.guidId=t.getGuid("cacheAdaptor");f={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(f));u=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e,r=t.parseJSON(window.localStorage.getItem(u)),f=[],n=0;n<r.results.length;n++)r.results[n].timeStamp=new Date-new Date(r.results[n].timeStamp),new Date-new Date(r.results[n].timeStamp)>i&&f.push(n);for(e=f,n=0;n<f.length;n++)r.results.splice(f[n],1),r.keys.splice(f[n],1);window.localStorage.removeItem(u);window.localStorage.setItem(u,JSON.stringify(r))},i)},generateKey:function(n,t){var h=a(t.queries,"onSortBy"),c=a(t.queries,"onGroup"),o=a(t.queries,"onWhere"),l=a(t.queries,"onSearch"),v=a(t.queries,"onPage"),s=g(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),y=t._params,r=n,u,i,f,e;for(s.onPage&&(r+=s.onPage.pageIndex),h.forEach(function(n){r+=n.e.direction+n.e.fieldName}),c.forEach(function(n){r+=n.e.fieldName}),l.forEach(function(n){r+=n.e.searchKey}),u=0;u<o.length;u++)if(i=o[u],i.e.isComplex){for(f=t.clone(),f.queries=[],e=0;e<i.e.predicates.length;e++)f.queries.push({fn:"onWhere",e:i.e.predicates[e],filter:t.queries.filter});r+=i.e.condition+this.generateKey(n,f)}else r+=i.e.field+i.e.operator+i.e.value;return r},processQuery:function(n,i){var f=this.generateKey(n.dataSource.url,i),r,u;return(window.localStorage&&(r=t.parseJSON(window.localStorage.getItem(this.guidId))),u=r?r.results[r.keys.indexOf(f)]:null,u!=null&&!this._crudAction&&!this._insertAction)?u:(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},processResponse:function(i,r,u,f,e,o){var h;if(this._insertAction||e&&this.cacheAdaptor.options.batch&&e.url.endsWith(this.cacheAdaptor.options.batch)&&e.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(i,r,u,f,e,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),c=this.generateKey(r.dataSource.url,u),s={};for(window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),h=n.inArray(c,s.keys),h!=-1&&(s.results.splice(h,1),s.keys.splice(h,1)),s.results[s.keys.push(c)-1]={keys:c,result:i.result,timeStamp:new Date,count:i.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),i},update:function(n,t,i,r){return this._crudAction=!0,this.cacheAdaptor.update(n,t,i,r)},insert:function(n,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(n,t,i)},remove:function(n,t,i,r){return this._crudAction=!0,this.cacheAdaptor.remove(n,t,i,r)},batchRequest:function(n,t,i){return this.cacheAdaptor.batchRequest(n,t,i)}});var a=function(n,t){return n.filter(function(n){return n.fn===t})||[]},g=function(n,t){for(var r=n.filter(function(n){return t.indexOf(n.fn)!==-1}),u={},i=0;i<r.length;i++)u[r[i].fn]||(u[r[i].fn]=r[i].e);return u},o=function(n,t,i,r){if(n[t]){var u=n[t](i,r);c(u)||(i=u)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(n,t){return n.isComplex?this.onComplexPredicate(n,t):this.onPredicate(n,t)},_typeStringQuery:function(n,i,r,u,f){return r.indexOf("'")!=-1&&(r=r.replace(new RegExp(/'/g),"''")),r="'"+r+"'",i&&(u="cast("+u+", 'Edm.String')"),t.isGUID(r)&&(f="guid"),n.ignoreCase&&(f?u:u="tolower("+u+")",r=r.toLowerCase()),{val:r,guid:f,field:u}},onPredicate:function(n,i,r){var f="",o,h,e=n.value,v=typeof e,s=this._p(n.field),l,c,y,a;if(e instanceof Date&&(e="datetime'"+u.replacer(e).toJSON()+"'"),v==="string"&&(c=this._typeStringQuery(n,r,e,s,h),e=c.val,s=c.field,h=c.guid),o=t.data.odBiOperator[n.operator],n.anyCondition!=""&&o)return f+=e.table,f+="/"+n.anyCondition,f+="(d:d/",f+=s,f+=o,f+=e.value,f+")";if(n.operator=="in"||n.operator=="notin"){for(l=0;l<e.length;l++)c=this._typeStringQuery(n,r,e[l],s,h),e[l]=c.val,s=c.field,f+=s,f+=o,f+=e[l],l!=e.length-1&&(f+=n.operator=="in"?" or ":" and ");return f}return o?(f+=s,f+=o,h&&(f+=h),f+e):(o=t.data.odUniOperator[n.operator],!o||v!=="string")?"":(o==="substringof"&&(y=e,e=s,s=y),f+=o+"(",f+=s+",",h&&(f+=h),f+=e+")",n.operator=="notcontains"&&(f+=" eq false"),n.anyCondition!=""&&o)?(a+=e.table,a+="/"+n.anyCondition,a+="(d:d/",f+=f,a+")"):f},onComplexPredicate:function(n,t){for(var r=[],i=0;i<n.predicates.length;i++)r.push("("+this.onEachWhere(n.predicates[i],t)+")");return r.join(" "+n.condition+" ")},onWhere:function(n){return this.pvt.searches&&n.push(this.onEachWhere(this.pvt.searches,null,!0)),n.join(" and ")},onEachSearch:function(n){var r,i;for(n.fields.length===0&&f("Query() - Search : oData search requires list of field names to search"),r=this.pvt.searches||[],i=0;i<n.fields.length;i++)r.push(new t.Predicate(n.fields[i],n.operator,n.key,n.ignoreCase));this.pvt.searches=r},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(n){var i=[],t;if(n.name instanceof Array)for(t=0;t<n.name.length;t++)i.push(this._p(n.name[t]));else i.push(this._p(n.name)+(n.direction==="descending"?" desc":""));return i.join(",")},onSortBy:function(n){return n.reverse().join(",")},onGroup:function(n){return this.pvt.groups=n,""},onSelect:function(n){for(var t=0;t<n.length;t++)n[t]=this._p(n[t]);return n.join(",")},onAggregates:function(n){return this.pvt.aggregates=n,""},onCount:function(n){return n===!0?"allpages":""},beforeSend:function(n,t,i){i.url.endsWith(this.options.batch)&&i.type.toLowerCase()==="post"&&(t.setRequestHeader("Accept",l.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined"));n.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,r,f,e,o,s){var a,l,v,d,tt,g,it,k,h,ft;if(!t.isNullOrUndefined(i.d)&&(a=f&&f._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(a)))for(h=0;h<a.length;h++)t.isNullOrUndefined(a[h].__metadata)||delete a[h].__metadata;if(l=o&&o.ejPvtData,e&&e.getResponseHeader("Content-Type")&&e.getResponseHeader("Content-Type").indexOf("xml")!=-1&&i.nodeType==9)return f._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&o.type.toLowerCase()==="post"){if(v=e.getResponseHeader("Content-Type"),v=v.substring(v.indexOf("=batchresponse")+1),i=i.split(v),i.length<2)return;for(i=i[1],g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(g[0],""),it=g[1],i=i.split(it),h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),s.added[d]&&(tt=u.parseJson(/^\{.+\}/m.exec(i[h])[0]),n.extend(s.added[d],this.processResponse(tt))));return s}var y=e&&e.getResponseHeader("DataServiceVersion"),w=null,rt={};if(y=y&&parseInt(y,10)||2,f&&f._requiresCount&&((i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"])),y===3&&i.value&&(i=i.value),i.d&&(i=i.d),y<3&&i.results&&(i=i.results),l&&l.aggregates&&l.aggregates.length){var p=l.aggregates,nt,ut={};for(h=0;h<p.length;h++)nt=t.aggregates[p[h].type],nt&&(ut[p[h].field+" - "+p[h].type]=nt(i,p[h].field));rt=ut}if(l&&l.groups&&l.groups.length)for(k=l.groups,h=0;h<k.length;h++)ft=b(k[h],f.queries),i=t.group(i,k[h],l.aggregates,ft);return c(w)?i:{result:i,count:w,aggregates:rt}},convertToQueryString:function(n,t,i){var r=[],u=n.table||"",f;delete n.table;i.dataSource.requiresFormat&&(n.$format="json");for(f in n)r.push(f+"="+n[f]);return(r=r.join("&"),i.dataSource.url&&i.dataSource.url.indexOf("?")!==-1&&!u)?r:r.length?u+"?"+r:u||""},insert:function(n,t,i){return{url:n.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(n,t,i,r){return{type:"DELETE",url:n.dataSource.url.replace(/\/*$/,r?"/"+r:"")+"("+i+")"}},update:function(n,t,i,r){return{type:"PUT",url:n.dataSource.url.replace(/\/*$/,r?"/"+r:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(n,i,r){var e=r.guid=t.getGuid(l.batchPre),o=n.dataSource.url.replace(/\/*$/,"/"+this.options.batch),f={url:r.url,key:r.key,cid:1,cSet:t.getGuid(l.changeSet)},u="--"+e+"\n";return u+="Content-Type: multipart/mixed; boundary="+f.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.added,f),u+=this.generateUpdateRequest(i.changed,f),u+=this.generateDeleteRequest(i.deleted,f),u+=f.cSet+"--\n",u+="--"+e+"--",{type:"POST",url:o,contentType:"multipart/mixed; charset=UTF-8;boundary="+e,data:u}},generateDeleteRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="DELETE ",i+=t.url+"("+n[r][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n";return i+"\n"},generateInsertRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[r])+"\n";return i},generateUpdateRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="PUT ",i+=t.url+"("+n[r][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[r])+"\n\n";return i},_p:function(n){return n.replace(/\./g,"/")}});t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(n){return n===!0?"true":""},onPredicate:function(n,i,r){var u="",f=n.value,e=f instanceof Date;return t.data.odUniOperator.contains="contains",u=t.ODataAdaptor.prototype.onPredicate.call(this,n,i,r),t.data.odUniOperator.contains="substringof",e&&(u=u.replace(/datetime'(.*)'$/,"$1")),u},onEachSearch:function(n){var t=this.pvt.search||[];t.push(n.key);this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(n,i){for(var f,o,e=/\/[\d*\/]*/g,u="",r=i._expands.length-1;r>0;r--)if(u.indexOf(i._expands[r])>=0)i._expands.pop();else if(e.test(i._expands[r])){for(u=i._expands.pop(),f=u.replace(e,"($expand="),o=0;o<u.split(e).length-1;o++)f=f+")";i._expands.unshift(f);r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[n,i])},processResponse:function(i,r,f,e,o,s){var l=o&&o.ejPvtData,a,w,nt,k,tt,y,d,p,h,rt;if(e&&e.getResponseHeader("Content-Type")&&e.getResponseHeader("Content-Type").indexOf("xml")!=-1&&i.nodeType==9)return f._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&o.type.toLowerCase()==="post"){if(a=e.getResponseHeader("Content-Type"),a=a.substring(a.indexOf("=batchresponse")+1),i=i.split(a),i.length<2)return;for(i=i[1],k=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(k[0],""),tt=k[1],i=i.split(tt),h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(w=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),s.added[w]&&(nt=u.parseJson(/^\{.+\}/m.exec(i[h])[0]),n.extend(s.added[w],this.processResponse(nt))));return s}if(y=null,d={},f&&f._requiresCount&&"@odata.count"in i&&(y=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,l&&l.aggregates&&l.aggregates.length){var v=l.aggregates,g,it={};for(h=0;h<v.length;h++)g=t.aggregates[v[h].type],g&&(it[v[h].field+" - "+v[h].type]=g(i,v[h].field));d=it}if(l&&l.groups&&l.groups.length)for(p=l.groups,h=0;h<p.length;h++)rt=b(p[h],f.queries),i=t.group(i,p[h],l.aggregates,rt);return c(y)?i:{result:i,count:y,aggregates:d}}});t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(n,t){for(var u=n.dataSource.json.slice(0),o=u.length,s=!0,f,i,h={},e=0;e<t.queries.length;e++)i=t.queries[e],f=this[i.fn].call(this,u,i.e,t),i.fn=="onAggregates"?h[i.e.field+" - "+i.e.type]=f:u=f!==r?f:u,(i.fn==="onPage"||i.fn==="onSkip"||i.fn==="onTake"||i.fn==="onRange")&&(s=!1),s&&(o=u.length);return t._requiresCount&&(u={result:u,count:o,aggregates:h}),u},batchRequest:function(n,t,i){for(var r=0;r<t.added.length;r++)this.insert(n,t.added[r]);for(r=0;r<t.changed.length;r++)this.update(n,i.key,t.changed[r]);for(r=0;r<t.deleted.length;r++)this.remove(n,i.key,t.deleted[r]);return t},onWhere:function(n,t){return n?n.filter(function(n){return t.validate(n)}):n},onAggregates:function(n,i){var r=t.aggregates[i.type];return!n||!r||n.length==0?null:r(n,i.field)},onSearch:function(n,i){return!n||!n.length?n:(i.fieldNames.length===0&&t.pvt.getFieldList(n[0],i.fieldNames),n.filter(function(n){for(var r=0;r<i.fieldNames.length;r++)if(i.comparer.call(n,t.pvt.getObject(i.fieldNames[r],n),i.searchKey,i.ignoreCase))return!0;return!1}))},onSortBy:function(n,i,r){var o,u,f;if(!n)return n;if(u=e(i.fieldName,r),!u)return n.sort(i.comparer);if(u instanceof Array){for(u=u.slice(0),f=u.length-1;f>=0;f--)u[f]&&(o=i.comparer,u[f].endsWith(" desc")&&(o=t.pvt.fnSort(t.sortOrder.Descending),u[f]=u[f].replace(" desc","")),n=it(n,u[f],o,[]));return n}return it(n,u,i.comparer,r?r.queries:[])},onGroup:function(n,i,r){var u,o,s,f,h;if(!n)return n;if(u=a(r.queries,"onAggregates"),o=[],u.length)for(f=0;f<u.length;f++)s=u[f].e,o.push({type:s.type,field:e(s.field,r)});return h=b(i.fieldName,r.queries),t.group(n,e(i.fieldName,r),o,h)},onPage:function(n,t,i){var r=e(t.pageSize,i),u=(e(t.pageIndex,i)-1)*r,f=u+r;return n?n.slice(u,f):n},onRange:function(n,t){return n?n.slice(e(t.start),e(t.end)):n},onTake:function(n,t){return n?n.slice(0,e(t.nos)):n},onSkip:function(n,t){return n?n.slice(e(t.nos)):n},onSelect:function(n,i){return n?t.select(n,e(i.fieldNames)):n},insert:function(n,t){return n.dataSource.json.push(t)},remove:function(n,i,r){var f=n.dataSource.json,u;for(typeof r=="object"&&(r=t.getObject(i,r)),u=0;u<f.length;u++)if(t.getObject(i,f[u])===r)break;return u!==f.length?f.splice(u,1):null},update:function(i,r,u){for(var e=i.dataSource.json,o=t.getObject(r,u),f=0;f<e.length;f++)if(t.getObject(r,e[f])===o)break;return f<e.length?n.extend(e[f],u):null}});t.ForeignKeyAdaptor=function(i,u){var f=(new t[u||"JsonAdaptor"]).extend({init:function(){var r,n;for(this.foreignData=[],this.key=[],this.adaptorType=u,this.value=[],this.fValue=[],this.keyField=[],r=i,n=0;n<r.length;n++)this.foreignData[n]=r[n].dataSource,this.key[n]=r[n].foreignKeyField,this.fValue[n]=t.isNullOrUndefined(r[n].field)?r[n].foreignKeyValue:r[n].field+"_"+r[n].foreignKeyValue,this.value[n]=r[n].foreignKeyValue,this.keyField[n]=r[n].field||r[n].foreignKeyField,this.initial=!0},processQuery:function(n,i){var e=n.dataSource.json,u,f,r;if(this.initial){for(u=0;u<e.length;u++)for(f=this,r=0;r<this.foreignData.length;r++)this.foreignData[r].filter(function(n){t.getObject(f.key[r],n)==t.getObject(f.keyField[r],e[u])&&(e[u][f.fValue[r]]=t.getObject(f.value[r],n))});this.initial=!1}return this.base.processQuery.apply(this,[n,i])},setValue:function(i){for(var o,f,e,u=0;u<this.foreignData.length;u++)o=this,f=i[this.fValue[u]],typeof f!="string"||isNaN(f)||(f=t.parseFloat(f)),e=n.grep(o.foreignData[u],function(n){return n[o.value[u]]==f})[0],t.isNullOrUndefined(e)&&(e=n.grep(o.foreignData[u],function(n){return n[o.key[u]]==f})[0],t.getObject(this.value[u],e)!=r&&t.createObject(o.value[u],t.getObject(this.value[u],e),i)),t.getObject(this.value[u],e)!=r&&t.createObject(this.keyField[u],t.getObject(this.key[u],e),i)},insert:function(n,t,i){return this.setValue(t),{url:n.dataSource.insertUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""})}},update:function(n,i,r,u){return this.setValue(r),t.JsonAdaptor.prototype.update(n,i,r,u),{type:"POST",url:n.dataSource.updateUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify({value:r,action:"update",keyColumn:i,key:r[i],table:u,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""})}}});return n.extend(this,new f),this};t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(n,t,i,r){var u={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{type:"POST",url:n.dataSource.batchUrl||n.dataSource.crudUrl||n.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u)}},processResponse:function(n,i,r,u,f,e,o){if(t.isNullOrUndefined(e))return n.d?n.d:n;for(var s=0;s<e.added.length;s++)t.JsonAdaptor.prototype.insert(i,e.added[s]);for(s=0;s<e.changed.length;s++)t.JsonAdaptor.prototype.update(i,o,e.changed[s]);for(s=0;s<e.deleted.length;s++)t.JsonAdaptor.prototype.remove(i,o,e.deleted[s]);return this.base.processResponse.apply(this,[n,i,r,u,f,e])}});t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(n,t){return{type:"POST",url:n.dataSource.url,data:JSON.stringify(t)}},remove:function(n,t,i){return{type:"DELETE",url:n.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(n,t,i){return{type:"PUT",url:n.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,r,u){var e=u.guid=t.getGuid(l.batchPre),f=[];return n.each(r.added,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("POST "+i.dataSource.insertUrl+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),n.each(r.changed,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),n.each(r.deleted,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("DELETE "+i.dataSource.removeUrl+"/"+t[u.key]+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),f.push("--"+e+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:f.join("\r\n"),contentType:'multipart/mixed; boundary="'+e+'"'}},processResponse:function(n,i,r,u,f){var o=f&&f.ejPvtData,l,e,w;if(f&&f.type.toLowerCase()!="post"){var h=u&&u.getResponseHeader("DataServiceVersion"),a=null,y={};if(h=h&&parseInt(h,10)||2,r&&r._requiresCount&&(c(n.Count)||(a=n.Count)),h<3&&n.Items&&(n=n.Items),o&&o.aggregates&&o.aggregates.length){var s=o.aggregates,v,p={};for(e=0;e<s.length;e++)v=t.aggregates[s[e].type],v&&(p[s[e].field+" - "+s[e].type]=v(n,s[e].field));y=p}if(o&&o.groups&&o.groups.length)for(l=o.groups,e=0;e<l.length;e++)w=b(l[e],r.queries),n=t.group(n,l[e],o.aggregates,w);return c(a)?n:{result:n,count:a,aggregates:y}}}});e=function(n,t){return typeof n=="function"?n.call(t||{}):n};t.TableModel=function(i,r,u,e){var c,o,l,s;if(!p(this,t.TableModel))return new t.TableModel(r);for(p(r,Array)||f("ej.TableModel - Json Array is required"),c=[],l=h(ht,this),s=0;s<r.length;s++){o=new t.Model(r[s],this);o.state="unchanged";o.on("stateChange",l);e&&o.computes(e);c.push(o)}return this.name=i||"table1",this.rows=t.NotifierArray(c),this._deleted=[],this._events=n({}),this.dataManager=u,this._isDirty=!1,this};t.TableModel.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},setDataManager:function(n){this.dataManagar=n},saveChanges:function(){if(this.dataManager&&p(this.dataManager,t.DataManager)||f("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var n=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);n.done(h(function(n){for(var t=this.toArray(),i=0;i<t.length;i++)t.state==="added"&&t.set(this.key,n.added.filter(function(n){return n[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this));n.fail(h(function(n){this.rejectChanges();this._events.triggerHandler({type:"reject",table:this,error:n})},this));this._isDirty=!1}},rejectChanges:function(){for(var t=this.toArray(),n=0;n<t.length;n++)t[n].revert(!0);this._isDirty=!1;this._events.triggerHandler({type:"reject",table:this})},insert:function(n){var i=new t.Model(n);i._isDirty=this._isDirty=!0;this.rows.push(i);this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(n){var r;this.key||f("TableModel - update : Primary key should be assigned to TableModel.key");var i=n,t,u=this.key,e=i[u];t=this.rows.array.filter(function(n){return n.get(u)===e});t=t[0];for(r in i)t.set(r,i[r]);this._isDirty=!0;this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(n){var t,i,e,u;for(this.key||f("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,n&&typeof n=="object"&&(n=n[t]!==r?n[t]:n.get(t)),u=0;u<this.rows.length();u++)if(this.rows.array[u].get(t)===n){i=u;break}i>-1&&(e=this.rows.removeAt(i),e.markDelete(),this._deleted.push({model:e,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:e,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var i={added:[],changed:[]},r=this.toArray(),n=0;n<r.length;n++)i[r[n].state]&&i[r[n].state].push(r[n].json);return i.deleted=t.select(this._deleted,["model"]),i},toArray:function(){return this.rows.toArray()},setDirty:function(n,t){this._isDirty!==!!n&&(this._isDirty=!!n,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(n){return this.rows.array[n]},length:function(){return this.rows.array.length},bindTo:function(t){var i=nt,e=n(t.html()),f=this.toArray(),u,r;for(n.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(i=tt),i.insertBefore(t),t.detach().empty(),r=0;r<f.length;r++)u=e.clone(),f[r].bindTo(u),t.append(u);t.insertAfter(i);i.remove()}};nt=i?n(document.createElement("div")):{};tt=i?n(document.createElement("tr")):{};t.Model=function(i,r,u){typeof r=="string"&&(u=r,r=null);this.$id=et("m");this.json=i;this.table=r instanceof t.TableModel?r:null;this.name=u||this.table&&this.table.name;this.dataManager=r instanceof t.DataManager?r:r.dataManagar;this.actual={};this._events=n({});this.isDirty=!1;this.state="added";this._props=[];this._computeEls={};this._fields={};this._attrEls={};this._updates={};this.computed={}};t.Model.prototype={computes:function(t){n.extend(this.computed,t)},on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},set:function(n,t){var i=this.json,e=n,f,u;for(n=n.split("."),u=0;u<n.length-1;u++)n=n[0],i=i[n[0]];this.isDirty=!0;this.changeState("changed",{from:"set"});f=i[n];this.actual[n]!==r||n in this.actual||(this.actual[n]=t);i[n]=t;this._updateValues(n,t);this._events.triggerHandler({type:e,current:t,previous:f,model:this})},get:function(n){return t.pvt.getObject(n,this.json)},revert:function(n){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1;n?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,r){return(i=i||this.dataManagar,r=r||i.dataSource.key,i||f("ej.Model - DataManager is required to commit the changes"),this.state==="added")?i.insert(this.json,this.name).done(t.proxy(function(t){n.extend(this.json,t.record)},this)):this.state==="changed"?i.update(r,this.json,this.name):this.state==="deleted"?i.remove(r,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1;this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if(this.state==="added")if(t==="deleted")t="unchanged";else return;var r=t;i=i||{};this.state=t;this._events.triggerHandler(n.extend({type:"stateChange",current:t,previous:r,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var n in this.json)this._props.push(n),this._updates[n]={read:[],input:[]};return this._props},bindTo:function(t){var e=n(t),r,i,o=e.find("[ej-observe], [ej-computed], [ej-prop]"),s=o.length,u,f;for(e.data("ejModel",this),u={fields:[],props:[],computes:[]},f=0;f<s;f++){if(r=o.eq(f),i=r.attr("ej-prop"),i&&this._processAttrib(i,r,u),i=r.attr("ej-observe"),i&&this._props.indexOf(i)!==-1){this._processField(r,i,u);continue}if(i=r.attr("ej-computed"),i){this._processComputed(i,r,u);continue}}e.data("ejModelBinding"+this.$id,u)},unbind:function(t){var u,r={props:this._attrEls,computes:this._computeEls},f=!1,i,c,e,s,h,o;t&&(r=n(t).removeData("ejModel").data("ejModelBinding"+this.$id)||r,f=!0);for(i in this.computed)u=r.computes[i],i=this.computed[i],u&&i.deps&&(this.off(i.deps.join(" "),u.handle),f&&delete this._computeEls[i]);f||(this._computeEls={});for(i in r.props)u=r.props[i],u&&(this.off(u.deps.join(" "),u.handle),delete r.props[i],f&&delete this._attrEls[i]);if(f||(this._attrEls={}),r.fields&&r.fields.length)for(c=r.fields.length,o=0;o<c;o++)e=r.fields[o],n(e).off("change",null,this._changeHandler),h=this.formElements.indexOf(e.tagName.toLowerCase())!==-1?"input":"read",s=this._updates[h].indexOf(e),s!==-1&&this._updates[h].splice(s,1)},_processComputed:function(n,t,i){if(n){var r,u,f=st(n),e=this.formElements.indexOf(t[0].tagName.toLowerCase())!==-1?"val":"html";this.computed[n]&&this.computed[f]||(this.computed[f]={value:new Function("var e = this; return "+n),deps:this._generateDeps(n)},n=f);r=this.computed[n];r.get||(r.get=function(){r.value.call(this.json)});u=r.deps;r=r.value;this._updateDeps(u);this._updateElement(t,e,r);r={el:t,handle:h(this._computeHandle,this,{value:n,type:e})};this._computeEls[n]=r;i.computes[n]=r;this.on(u.join(" "),r.handle)}},_computeHandle:function(n){var t=this._computeEls[n.value];t&&this.computed[n.value]&&this._updateElement(t.el,n.type,this.computed[n.value].value)},_updateElement:function(t,i,r){t[i](r.call(n.extend({},this.json,this.computed)))},_updateDeps:function(n){for(var i=0;i<n.length;i++)!(n[i]in this.json)&&n[i]in this.computed&&t.merge(n,this.computed[n[i]].deps)},_generateDeps:function(n){for(var r=n.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),t,u=[],i=0;i<r.length;i++)r[i].startsWith("#ej.#")&&(t=r[i].replace("#ej.#","").split(" ")[0],t&&this._props.indexOf(t)!==-1&&u.push(t));return u},_processAttrib:function(n,t,i){var e,o,u={},r,f;for(n=n.replace(/^ +| +$/g,"").split(";"),r=0;r<n.length;r++)(n[r]=n[r].split(":"),n[r].length<2)||(e=n[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),u[e]=n[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));n=u;f=[];for(e in n)f.push(n[e]);this._updateDeps(f);this._updateProps(t,n);u=et("emak");o={el:t,handle:h(this._attrHandle,this,u),value:n,deps:f};t.prop("ejmodelattrkey",u);i.props[u]=o;this._attrEls[u]=o;this.on(f.join(" "),o.handle)},_attrHandle:function(n){var t=this._attrEls[n];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var f=this.json,r,u=this.computed;for(var e in i)r=i[e],r in f?r=f[r]:r in u&&(r=u[r],r&&(r=r.value.call(n.extend({},this.json,u)))),c(r)||t.prop(e,r)},_updateValues:function(n,t){var i=this._updates[n];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,r){if(t)for(var u=t.length-1;u>-1;u--){if(!t[u].offsetParent){t.splice(u,1);continue}n(t[u])[i](r)}},_changeHandler:function(t){t.data.self.set(t.data.prop,n(this).val())},_processField:function(n,t,i){var u={self:this,prop:t},r=this.get(t);if(i.fields.push(n[0]),this.formElements.indexOf(n[0].tagName.toLowerCase())===-1)return n.html(r),this._updates[t].read.push(n[0]);n.val(r).off("change",null,this._changeHandler).on("change",null,u,this._changeHandler);return this._updates[t].input.push(n[0])},formElements:["input","select","textarea"]};var ot=/[^\w]+/g,st=function(n){return n.replace(ot,"_")},ht=function(n){this.setDirty(!0,n.model)};if(t.Predicate=function(n,i,r,u){if(!(this instanceof t.Predicate))return new t.Predicate(n,i,r,u);if(typeof n=="string"){var f="";i.toLowerCase().indexOf(" any")!=-1?(i=i.replace(" any",""),f="any"):i.toLowerCase().indexOf(" all")!=-1&&(i=i.replace(" all",""),f="all");this.field=n;this.operator=i;this.value=r;this.ignoreCase=u;this.isComplex=!1;this.anyCondition=f;this._comparer=t.data.fnOperators.processOperator(f!=""?f:this.operator)}else(n instanceof t.Predicate&&r instanceof t.Predicate||r instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[n],r instanceof Array?[].push.apply(this.predicates,r):this.predicates.push(r));return this},t.Predicate.and=function(){return y._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return y._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(n){var i,t,r;if(p(n,Array)){for(i=[],t=0,r=n.length;t<r;t++)i.push(y._fromJSON(n[t]));return i}return y._fromJSON(n)},y={_combinePredicates:function(n,i){if(!n.length)return r;if(n.length===1){if(!p(n[0],Array))return n[0];n=n[0]}return new t.Predicate(n[0],i,n.slice(1))},_combine:function(n,i,r,u,e,o){return i instanceof t.Predicate?t.Predicate[e](n,i):typeof i=="string"?t.Predicate[e](n,new t.Predicate(i,r,u,o)):f("Predicate - "+e+" : invalid arguments")},_fromJSON:function(n){var i;if(!n||p(n,t.Predicate))return n;var u=n.predicates||[],f=u.length,r=[];for(i=0;i<f;i++)r.push(y._fromJSON(u[i]));return n.isComplex?new t.Predicate(r[0],n.condition,r.slice(1)):new t.Predicate(n.field,n.operator,t.parseJSON({val:n.value}).val,n.ignoreCase)}},t.Predicate.prototype={and:function(n,t,i,r){return y._combine(this,n,t,i,"and",r)},or:function(n,t,i,r){return y._combine(this,n,t,i,"or",r)},validate:function(n){var f=this.predicates,r,u,i;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,n),this.value,this.ignoreCase);for(r=this.condition==="and",i=0;i<f.length;i++)if(u=f[i].validate(n),r){if(!u)return!1}else if(u)return!0;return r},toJSON:function(){var t,i,n;if(this.isComplex)for(t=[],i=this.predicates,n=0;n<i.length;n++)t.push(i[n].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:t,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(n,t,i){if(t!=i){var r=n[t];n[t]=n[i];n[i]=r}},mergeSort:function(n,i,r){return r&&typeof r!="string"||(r=t.pvt.fnSort(r,!0)),typeof i=="function"&&(r=i,i=null),t.pvt.mergeSort(n,i,r)},max:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnDescending)},min:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnAscending)},distinct:function(n,t,i){for(var f=[],r,e={},u=0;u<n.length;u++)r=v(n,t,u),r in e||(f.push(i?n[u]:r),e[r]=1);return f},sum:function(n,t){for(var u=0,i,f=typeof v(n,t,0)!="number",r=0;r<n.length;r++)i=v(n,t,r),isNaN(i)||i===null||(f&&(i=+i),u+=i);return u},avg:function(n,i){return t.sum(n,i)/n.length},select:function(n,i){for(var u=[],r=0;r<n.length;r++)u.push(t.pvt.extractFields(n[r],i));return u},group:function(i,r,u,f,e,o){var p,a,c,h,k,l,b,y,s,w;if(e=e||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(s=0;s<i.length;s++)t.isNullOrUndefined(o)?(i[s].items=t.group(i[s].items,r,u,f,i.level+1),i[s].count=i[s].items.length):(p=-1,w=n.grep(o,function(n){return n.key==i[s].key}),p=o.indexOf(w[0]),i[s].items=t.group(i[s].items,r,u,f,i.level+1,o[p].items),i[s].count=o[p].count);return i.childLevels+=1,i}for(a={},c=[],c.GROUPGUID=t.pvt.consts.GROUPGUID,c.level=e,c.childLevels=0,c.records=i,l=0;l<i.length;l++)h=v(i,r,l),t.isNullOrUndefined(f)||(h=f(h,r)),a[h]||(a[h]={key:h,count:0,items:[],aggregates:{},field:r},c.push(a[h]),t.isNullOrUndefined(o)||(k=n.grep(o,function(n){return n.key==a[h].key}),a[h].count=k[0].count)),a[h].count=t.isNullOrUndefined(o)?a[h].count+=1:a[h].count,a[h].items.push(i[l]);if(u&&u.length)for(l=0;l<c.length;l++){for(b={},s=0;s<u.length;s++)y=t.aggregates[u[s].type],t.isNullOrUndefined(o)?y&&(b[u[s].field+" - "+u[s].type]=y(c[l].items,u[s].field)):(w=n.grep(o,function(n){return n.key==c[l].key}),y&&(b[u[s].field+" - "+u[s].type]=y(w[0].items,u[s].field)));c[l].aggregates=b}return c},parseTable:function(i,r,u){var s=i.rows,h,v=[],y=[],f,c,l,a,e,o;if(!s.length)return[];u=u||0;switch((r||"").toLowerCase()){case t.headerOption.tHead:h=i.tHead.rows[u];break;case t.headerOption.row:default:h=i.rows[u]}for(c=h.cells,f=0;f<c.length;f++)v.push(n.trim(c[f].innerHTML));for(f=u+1;f<s.length;f++){for(l={},a=s[f].cells,e=0;e<a.length;e++)o=a[e].innerHTML,l[v[e]]=typeof o=="string"&&n.isNumeric(o)?Number(o):o;y.push(l)}return y}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(n,i){return t.sum(n,i)},average:function(n,i){return t.avg(n,i)},minimum:function(n,i){return t.getObject(i,t.min(n,i))},maximum:function(n,i){return t.getObject(i,t.max(n,i))},truecount:function(n,i){var r=t.Predicate(i,"equal",!0);return t.DataManager(n).executeLocal(t.Query().where(r)).length},falsecount:function(n,i){var r=t.Predicate(i,"equal",!1);return t.DataManager(n).executeLocal(t.Query().where(r)).length},count:function(n){return n.length}},t.pvt={filterQueries:a,mergeSort:function(n,i,r){if(n.length<=1)return n;var e=parseInt(n.length/2,10),u=n.slice(0,e),f=n.slice(e);return u=t.pvt.mergeSort(u,i,r),f=t.pvt.mergeSort(f,i,r),t.pvt.merge(u,f,i,r)},getItemFromComparer:function(n,i,r){var f,e,o,u=0,s=typeof v(n,i,0)=="string";if(n.length)while(t.isNullOrUndefined(f)&&u<n.length)f=v(n,i,u),o=n[u++];for(;u<n.length;u++)(e=v(n,i,u),t.isNullOrUndefined(e))||(s&&(f=+f,e=+e),r(f,e)>0&&(f=e,o=n[u]));return o},quickSelect:function(n,i,r,u,f,e){if(r==u)return n[r];var o=t.pvt.partition(n,i,r,u,e),s=o-r+1;return s==f?n[o]:f<s?t.pvt.quickSelect(n,i,r,o-1,f,e):t.pvt.quickSelect(n,i,o+1,u,f-s,e)},extractFields:function(n,i){var u={},r;if(i.length==1)return t.pvt.getObject(i[0],n);for(r=0;r<i.length;r++)u[i[r].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[r],n);return u},partition:function(n,i,r,u,f){var e=parseInt((r+u)/2,10),s=v(n,i,e),o;for(t.swap(n,e,u),e=r,o=r;o<u;o++)f(v(n,i,o),s)&&(t.swap(n,o,e),e++);return t.swap(n,e,u),e},fnSort:function(n){return(n=n?n.toLowerCase():t.sortOrder.Ascending,n==t.sortOrder.Ascending)?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(n,i){return function(r,u){return i(t.pvt.getObject(n,r),t.pvt.getObject(n,u))}},fnAscending:function(n,t){return t===null||t===r?-1:typeof n=="string"?n.localeCompare(t):n===null||n===r?1:n-t},fnDescending:function(n,t){return t===null||t===r?1:typeof n=="string"?n.localeCompare(t)*-1:n===null||n===r?-1:t-n},merge:function(n,t,i,r){for(var u=[],f;n.length>0||t.length>0;)f=n.length>0&&t.length>0?r?r(v(n,i,0),v(t,i,0))<=0?n:t:n[0][i]<n[0][i]?n:t:n.length>0?n:t,u.push(f.shift());return u},getObject:function(n,t){var i,f,u;if(!t)return r;if(!n)return t;if(n.indexOf(".")===-1)return t[n];for(i=t,f=n.split("."),u=0;u<f.length;u++){if(i==null)break;i=i[f[u]]}return i},createObject:function(n,t,i){for(var f=n.split("."),o=i||window,e=o,u=0;u<f.length;u++)u+1==f.length?e[f[u]]=t===r?{}:t:e[f[u]]==null&&(e[f[u]]={}),e=e[f[u]];return o},getFieldList:function(n,i,u){if(u===r&&(u=""),i===r||i===null)return t.pvt.getFieldList(n,[],u);for(var f in n)typeof n[f]!="object"||n[f]instanceof Array?i.push(u+f):t.pvt.getFieldList(n[f],i,u+f+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ","in":" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.fnOperators={equal:function(n,t,i){return i?s(n)==s(t):n==t},notequal:function(n,i,r){return!t.data.fnOperators.equal(n,i,r)},notin:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators.notequal(n,i[u],r)==!1)return!1;return!0},lessthan:function(n,t,i){return i?s(n)<s(t):n<t},greaterthan:function(n,t,i){return i?s(n)>s(t):n>t},lessthanorequal:function(n,t,i){return i?s(n)<=s(t):n<=t},greaterthanorequal:function(n,t,i){return i?s(n)>=s(t):n>=t},contains:function(n,t,i){return i?!c(n)&&!c(t)&&s(n).indexOf(s(t))!=-1:!c(n)&&!c(t)&&n.toString().indexOf(t)!=-1},notcontains:function(n,i,r){return!t.data.fnOperators.contains(n,i,r)},notnull:function(n){return n!==null},isnull:function(n){return n===null},startswith:function(n,t,i){return i?n&&t&&s(n).startsWith(s(t)):n&&t&&n.startsWith(t)},endswith:function(n,t,i){return i?n&&t&&s(n).endsWith(s(t)):n&&t&&n.endsWith(t)},all:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators[this.operator](n,i[u],r)==!1)return!1;return!0},any:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators[this.operator](n,i[u],r)==!0)return!0;return!1},processSymbols:function(n){var r=t.data.operatorSymbols[n],i;return r&&(i=t.data.fnOperators[r],i)?i:f("Query - Process Operator : Invalid operator")},processOperator:function(n){var i=t.data.fnOperators[n];return i?i:t.data.fnOperators.processSymbols(n)}},t.data.fnOperators["in"]=function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators.equal(n,i[u],r)==!0)return!0;return!1},t.NotifierArray=function(i){return p(this,t.NotifierArray)?(this.array=i,this._events=n({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},push:function(n){var t;return t=p(n,Array)?[].push.apply(this.array,n):this.array.push(n),this._raise("add",{item:n,index:this.length()-1}),t},pop:function(){var n=this.array.pop();return this._raise("remove",{item:n,index:this.length()-1}),n},addAt:function(n,t){return this.array.splice(n,0,t),this._raise("add",{item:t,index:n}),t},removeAt:function(n){var t=this.array.splice(n,1)[0];return this._raise("remove",{item:t,index:n}),t},remove:function(n){var t=this.array.indexOf(n);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:n,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(n.extend({type:t},i));this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},n.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(n,t){for(var i=0,r=this.length;i<r;++i)n.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(n){var i,u,t,r;if(typeof n!="function")throw new TypeError;for(i=[],u=arguments[1]||this,t=0;t<this.length;t++)r=this[t],n.call(u,r,t,this)&&i.push(r);return i},String.prototype.endsWith=String.prototype.endsWith||function(n){return this.slice(-n.length)===n},String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n},t.support||(t.support={}),t.support.stableSort=function(){for(var t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),n=0;n<17;n++)if(n!==t[n])return!1;return!0}(),t.support.cors=n.support.cors,!n.support.cors&&window.XDomainRequest){var ct=/^https?:\/\//i,lt=/^get|post$/i,at=new RegExp("^"+location.protocol,"i"),vt=/\/xml/i;n.ajaxTransport("text html xml json",function(n,t){if(n.crossDomain&&n.async&&lt.test(n.type)&&ct.test(t.url)&&at.test(t.url)){var i=null,u=(t.dataType||"").toLowerCase();return{send:function(f,e){i=new XDomainRequest;/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout);i.ontimeout=function(){e(500,"timeout")};i.onload=function(){var o="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,t={code:200,message:"success"},f={text:i.responseText},n;try{if(u==="json")try{f.json=JSON.parse(i.responseText)}catch(h){t.code=500;t.message="parseerror"}else if(u==="xml"||u!=="text"&&vt.test(i.contentType)){n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(i.responseText)}catch(h){n=r}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length){t.code=500;t.message="parseerror";throw"Invalid XML: "+i.responseText;}f.xml=n}}catch(s){throw s;}finally{e(t.code,t.message,f,o)}};i.onerror=function(){e(500,"error",{text:i.responseText})};navigator.userAgent.indexOf("MSIE 9.0")!=-1&&(i.onprogress=function(){});i.open(n.type,n.url);i.send(t.data)},abort:function(){i&&i.abort()}}}})}n.support.cors=!0;t.sortOrder={Ascending:"ascending",Descending:"descending"};t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};d=function(n,t){t&&(n=h(n,t));(window.setImmediate||window.setTimeout)(n,0)};t.support.enableLocalizedSort=!1;var it=function(n,i,r,u){return t.support.stableSort?!t.support.enableLocalizedSort&&typeof t.pvt.getObject(i,n[0]||{})=="string"&&(r===t.pvt.fnAscending||r===t.pvt.fnDescending)&&u.filter(function(n){return n.fn==="onSortBy"}).length===1?yt(n,i,r===t.pvt.fnDescending):n.sort(t.pvt.fnGetComparer(i,r)):t.mergeSort(n,i,r)},b=function(i,r){for(var f=n.grep(r,function(n){return n.fn=="onGroup"}),u=0;u<f.length;u++)if(t.getObject("fieldName",f[u].e)==i)return t.getObject("fn",f[u].e)},yt=function(n,i,r){var u=Object.prototype.toString;Object.prototype.toString=i.indexOf(".")===-1?function(){return this[i]}:function(){return t.pvt.getObject(i,this)};n=n.sort();Object.prototype.toString=u;r&&n.reverse()},s=function(n){return n?n.toLowerCase?n.toLowerCase():n.toString().toLowerCase():n===0||n===!1?n.toString():""},v=function(n,i,r){return i?t.pvt.getObject(i,n[r]):n[r]},pt=function(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&n.nodeType===1&&typeof n=="object"&&typeof n.nodeName=="string"},p=function(n,t){return n instanceof t},rt=function(n,i,r,u){return function(f){return typeof f=="object"&&(u=f,f=null),new t.TableModel(f||n,i,r,u)}},ut=function(t){return function(i,r){var o,h,e,u,s;for(r=r||window.ko,r||f("Knockout is undefined"),h=[],s=0;s<t.length;s++){o={};for(e in t[s])e.startsWith("_")||(o[e]=r.observable(t[s][e]));for(e in i)u=i[e],n.isPlainObject(u)?(u.owner||(u.owner=o),u=r.computed(u)):u=r.computed(u,o),o[e]=u;h.push(o)}return r.observableArray(h)}},ft=0,et=function(n){return ft+=1,n+ft};t.getGuid=function(n){var i="0123456789abcdef",t;return(n||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,r){if("crypto"in window&&"getRandomValues"in crypto){var u=new Uint8Array(1);window.crypto.getRandomValues(u);t=u[0]%16|0}else t=Math.random()*16|0;return i[r===19?t&3|8:t]})};w=function(n,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),n.apply(t||this,i)}};h=function(n,t,i){return"bind"in n?i?n.bind(t,i):n.bind(t):function(){var r=i?[i]:[];return r.push.apply(r,arguments),n.apply(t||this,r)}};t.merge=function(n,t){n&&t&&Array.prototype.push.apply(n,t)};c=function(n){return n===r||n===null};f=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}}}(window.jQuery,window.Syncfusion,window.document),function(n,t){t.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return n('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){};this.resizables={};this._wireEvents();this._browser=t.browserInfo();this._isIE8=this._browser.name=="msie"&&this._browser.version=="8.0";this._isIE9=this._browser.name=="msie"&&this._browser.version=="9.0";this._browser.name=="msie"&&this.element.addClass("e-pinch");this._browser.name=="edge"&&this.element.css("touch-action","none")},_setModel:function(n){for(var t in n)switch(t){case"dragArea":this.model.dragArea=n[t];break;case"dragOnTaphold":this.model.dragOnTaphold=n[t]}},_destroy:function(){n(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1);t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var r,u;if(i.target&&i.target.nodeName&&n(i.target).closest("input[type='text'], textarea, select, option").length)return!0;r=i;i.preventDefault();i=this._getCoordinate(i);this.target=n(r.currentTarget);this._initPosition={x:i.pageX,y:i.pageY};n(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler);this.model.clone||(u=this.element.offset(),this._relXposition=i.pageX-u.left,this._relYposition=i.pageY-u.top);n(document.documentElement).trigger(t.eventType.mouseDown,r)},_setDragArea:function(){var o=n(this.model.dragArea)[0],s,h,u,r,f,e,i;if(o){if(r=["left","right","bottom","top"],t.isNullOrUndefined(o.getBoundingClientRect)){for(s=n(this.model.dragArea).outerWidth(),h=n(this.model.dragArea).outerHeight(),i=0;i<r.length;i++)this["border-"+r[i]+"-width"]=0,this["padding-"+r[i]]=0;f=e=0}else{for(u=o.getBoundingClientRect(),s=u.width?u.width:u.right-u.left,h=u.height?u.height:u.bottom-u.top,i=0;i<r.length;i++)this["border-"+r[i]+"-width"]=isNaN(parseFloat(n(n(this.model.dragArea)[0]).css("border-"+r[i]+"-width")))?0:parseFloat(n(n(this.model.dragArea)[0]).css("border-"+r[i]+"-width")),this["padding-"+r[i]]=isNaN(parseFloat(n(n(this.model.dragArea)[0]).css("padding-"+r[i])))?0:parseFloat(n(n(this.model.dragArea)[0]).css("padding-"+r[i]));f=n(this.model.dragArea).offset().top;e=n(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(n(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:e+this["border-left-width"]+this["padding-left"];this._top=t.isNullOrUndefined(n(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:f+this["border-top-width"]+this["padding-top"];this._right=e+s-[this["border-right-width"]+this["padding-right"]];this._bottom=f+h-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var r,f,e,u,o,s;if(i.type=="touchmove"||i.type=="mousemove"&&i.which==1&&i.buttons==1||this._isIE8||this._isIE9){r=i;i=this._getCoordinate(i);this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0};this.offset=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.position=this._getMousePosition(r);var h=this._initPosition.x-i.pageX,c=this._initPosition.y-i.pageY,l=Math.sqrt(h*h+c*c);if(l>=this.model.distance){if(f=this.model.helper({sender:r,element:this.target}),!f||t.isNullOrUndefined(f))return;if(e=this.model.handle=this.helper=f,this.model.dragStart&&(u=null,r.type=="touchmove"?(o=r.originalEvent.changedTouches[0],u=document.elementFromPoint(o.clientX,o.clientY)):u=r.originalEvent.target||r.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(u=this._checkTargetElement(i)||u),this._trigger("dragStart",{event:r,element:this.element,target:u,currentTarget:this._getCurrTarget(i)})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0);s=e.offsetParent().offset();n(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1);t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:e.css({position:"absolute",left:this.position.left-s.left,top:this.position.top-s.top}),destroy:this._destroyHandler}}}},_drag:function(i){var u,f,h,c,o,l,s,r,e;i.preventDefault();this.position=this._getMousePosition(i);this.position.top<0&&(this.position.top=0);n(document).height()<this.position.top&&(this.position.top=n(document).height());n(document).width()<this.position.left&&(this.position.left=n(document).width());r=t.widgetBase.droppables[this.model.scope].helper;this.model.drag&&(o=null,i.type=="touchmove"?(l=i.originalEvent.changedTouches[0],o=document.elementFromPoint(l.clientX,l.clientY)):o=i.originalEvent.target||i.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(o=this._checkTargetElement(i)||o),this._trigger("drag",{event:i,element:this.target,target:o,currentTarget:this._getCurrTarget(i)}));s=this._checkTargetElement(i);t.isNullOrUndefined(s)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=s,s.object._over(i),this._hoverTarget=s);r=t.widgetBase.droppables[this.model.scope].helper;e=r.offsetParent().offset();h=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX;c=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY;this.model.dragArea?(this._pageX!=h&&(u=this._left>this.position.left?this._left:this._right<this.position.left+r.outerWidth(!0)?this._right-r.outerWidth(!0):this.position.left),this._pageY!=c&&(f=this._top>this.position.top?this._top:this._bottom<this.position.top+r.outerHeight(!0)?this._bottom-r.outerHeight(!0):this.position.top)):(u=this.position.left,f=this.position.top);(f<0||f-[e.top+this["border-top-width"]]<0)&&(f=[e.top+this["border-top-width"]]);(u<0||u-[e.left+this["border-left-width"]]<0)&&(u=[e.left+this["border-left-width"]]);r.css({left:u-[e.left+this["border-left-width"]],top:f-[e.top+this["border-top-width"]]});this.position.left=u;this.position.top=f;this._pageX=h;this._pageY=c},_dragStop:function(n){var t,i;(n.type=="mouseup"||n.type=="touchend")&&this._destroy(n);this.model.dragStop&&(t=null,n.type=="touchend"?this.model.cursorAt.top==0&&this.model.cursorAt.left==0?t=n.originalEvent.target||n.target:(i=n.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=n.originalEvent.target||n.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(t=this._checkTargetElement(n)||t),this._trigger("dragStop",{event:n,element:this.target,target:t,currentTarget:this._getCurrTarget(n)}));this._dragEnd(n)},_dragEnd:function(n){var i=this._checkTargetElement(n);t.isNullOrUndefined(i)||(n.target=n.toElement=i,i.object._drop(n,this.element))},_dragMouseEnter:function(t){n(document).off("mouseenter",this._dragMouseEnterHandler);this._isIE9?this._dragManualStop(t):this._isIE8?t.button==0&&this._dragManualStop(t):t.buttons==0&&this._dragManualStop(t)},_dragManualStop:function(n){this.model.dragStop!=null&&this._trigger("dragStop",{event:n,element:this.target,target:n.originalEvent.target||n.target,currentTarget:this._getCurrTarget(n)});this._destroy(n)},_dragMouseOut:function(){n(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(n){var t,i;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"?(i=n.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=n.target,this.helper&&this._contains(this.helper[0],t))?(this.helper.hide(),t=this._elementUnderCursor(n),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_getCurrTarget:function(n){var i=n.originalEvent&&n.originalEvent.target||n.target,r,u;if(!t.isNullOrUndefined(i.style))return r=i.style.display,i.style.display="none",u=document.elementFromPoint(n.pageX,n.pageY),i.style.display=r,u},_withDropElement:function(i){if(i){var r=n(i).data("ejDroppable");if(t.isNullOrUndefined(r)&&(r=this._checkParentElement(n(i))),!t.isNullOrUndefined(r))return n.extend(i,{object:r})}},_checkParentElement:function(i){var u=n(i).closest(".e-droppable"),r;if(u.length>0&&(r=n(u).data("ejDroppable"),!t.isNullOrUndefined(r)))return r},_elementUnderCursor:function(n){return n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"?document.elementFromPoint(n.originalEvent.changedTouches[0].clientX,n.originalEvent.changedTouches[0].clientY):document.elementFromPoint(n.clientX,n.clientY)},_contains:function(t,i){try{return n.contains(t,i)||t==i}catch(r){return!1}},_wireEvents:function(){t.isDevice()==!0&&this.model.dragOnTaphold==!0?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize);this._dragStartHandler=n.proxy(this._dragStart,this);this._destroyHandler=n.proxy(this._destroy,this);this._dragStopHandler=n.proxy(this._dragStop,this);this._dragHandler=n.proxy(this._drag,this);this._dragMouseEnterHandler=n.proxy(this._dragMouseEnter,this);this._dragMouseOutHandler=n.proxy(this._dragMouseOut,this)},_getMousePosition:function(n){n=this._getCoordinate(n);var t=this.model.clone?n.pageX:n.pageX-this._relXposition,i=this.model.clone?n.pageY:n.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(n){var i=n;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"&&t.browserInfo().name!="msie")&&(i=n.originalEvent.changedTouches[0]),i}})}(jQuery,Syncfusion),function(n,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],dropElements:[],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this._mouseOver=!1;this.dropElements.push(this)},_setModel:function(){},_destroy:function(){n(this.element).off("mouseup",n.proxy(this._drop,this))},_over:function(n){this._mouseOver||(this._trigger("over",n),this._mouseOver=!0)},_out:function(n){this._mouseOver&&(this._trigger("out",n),this._mouseOver=!1)},_drop:function(t,i){var u=t.target,f=n(u).parents(".e-droppable"),r;for(n(u).hasClass("e-droppable")&&f.push(u),r=0;r<this.dropElements.length;r++)n(f).is(n(this.dropElements[r].element))&&this.dropElements[r]._dropEvent.call(this.dropElements[r],t,i)},_dropEvent:function(i,r){var u=t.widgetBase.droppables[this.model.scope],f=!t.isNullOrUndefined(u.helper)&&u.helper.is(":visible"),e;f&&i.type=="touchend"&&n(u.helper).hide();e=this._isDropArea(i);f&&i.type=="touchend"&&n(u.helper).show();u&&!t.isNullOrUndefined(this.model.drop)&&f&&e.canDrop&&this.model.drop(n.extend(i,{dropTarget:e.target,dragElement:r},!0),u)},_isDropArea:function(t){var i={canDrop:!0,target:n(t.target)},e,r,o,u,f;if(t.type=="touchend")for(e=t.originalEvent.changedTouches[0],r=document.elementFromPoint(e.clientX,e.clientY),i.canDrop=!1,o=n(r).parents(),u=0;u<this.element.length;u++){if(n(r).is(n(this.element[u])))i={canDrop:!0,target:n(r)};else for(f=0;f<o.length;f++)if(n(this.element[u]).is(n(o[f]))){i={canDrop:!0,target:n(r)};break}if(i.canDrop)break}return i}})}(jQuery,Syncfusion),function(n,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return n('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){if(this.target=this.element,this._browser=t.browserInfo(),this._isIE8=this._browser.name=="msie"&&this._browser.version=="8.0",this._isIE9=this._browser.name=="msie"&&this._browser.version=="9.0",this.handle!=null)n(this.target).delegate(this.handle,t.eventType.mouseDown,n.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions);else n(this.target).on(t.eventType.mouseDown,n.proxy(this._mousedown,this));this._resizeStartHandler=n.proxy(this._resizeStart,this);this._destroyHandler=n.proxy(this._destroy,this);this._resizeStopHandler=n.proxy(this._resizeStop,this);this._resizeHandler=n.proxy(this._resize,this);this._resizeMouseEnterHandler=n.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){if(n(i.target).hasClass("e-resizable")){n(i.target).css({cursor:"se-resize"});n(this.target).on(t.eventType.mouseDown,n.proxy(this._mousedown,this))}else n(this.target).off(t.eventType.mouseDown),n(this.target).css({cursor:""})},_blockDefaultActions:function(n){n.cancelBubble=!0;n.returnValue=!1;n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation()},_setModel:function(){},_mousedown:function(i){var r=i;i=this._getCoordinate(i);this.target=n(r.currentTarget);this._initPosition={x:i.pageX,y:i.pageY};this._pageX=i.pageX;this._pageY=i.pageY;n(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler);return n(document.documentElement).trigger(t.eventType.mouseDown,r),!1},_resizeStart:function(i){var r,h;if(n(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var u=this._initPosition.x-i.pageX,f=this._initPosition.y-i.pageY,e,o,s=Math.sqrt(u*u+f*f);if(s>=this.model.distance){if(this.model.resizeStart!=null&&this._trigger("resizeStart",{event:i,element:this.target}))return;r=this.model.helper({element:this.target});e=i.pageX-this._pageX+r.outerWidth();o=i.pageY-this._pageY+r.outerHeight();this._pageX=i.pageX;this._pageY=i.pageY;h=this.getElementPosition(r);n(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1);t.widgetBase.resizables[this.scope]={resizable:this.target,helper:r.css({width:e,height:o}),destroy:this._destroyHandler}}}},_resize:function(n){var i,r,u,e,f;n=this._getCoordinate(n);e=this.getElementPosition(t.widgetBase.resizables[this.scope].helper);f=this.model.helper({element:this.target});i=n.pageX-this._pageX+f.outerWidth();r=n.pageY-this._pageY+f.outerHeight();this._pageX=n.pageX;this._pageY=n.pageY;i<this.model.minWidth&&(u=this.model.minWidth-i,i=this.model.minWidth,this._pageX=n.pageX+u);r<this.model.minHeight&&(u=this.model.minHeight-r,r=this.model.minHeight,this._pageY=n.pageY+u);this.model.maxHeight!=null&&r>this.model.maxHeight&&(u=r-this.model.maxHeight,r=this.model.maxHeight,this._pageY=n.pageY-u);this.model.maxWidth!=null&&i>this.model.maxWidth&&(u=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=n.pageX-u);t.widgetBase.resizables[this.scope].helper.css({width:i,height:r});this._trigger("resize",{element:this.target})},_resizeStop:function(n){this.model.resizeStop!=null&&this._trigger("resizeStop",{element:this.target});(n.type=="mouseup"||n.type=="touchend")&&this._destroy(n)},_resizeMouseEnter:function(n){this._isIE9?this._resizeManualStop(n):this._isIE8?n.button==0&&this._resizeManualStop(n):n.buttons==0&&this._resizeManualStop(n)},_resizeManualStop:function(n){this.model.resizeStop!=null&&this._trigger("resizeStop",{element:this.target});this._destroy(n)},_destroy:function(){n(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1);t.widgetBase.resizables[this.scope]=null},getElementPosition:function(n){return n!=null&&n.length>0?{left:n[0].offsetLeft,top:n[0].offsetTop}:null},_getCoordinate:function(n){var t=n;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend")&&(t=n.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion),function($,ej,undefined){ej.widget("ejListBox","ej.ListBox",{element:null,_ignoreOnPersist:["dataSource","query","itemRequestCount","fields","create","change","select","unselect","itemDragStart","itemDrag","itemDragStop","itemDrop","checkChange","destroy","actionComplete","actionFailure","actionSuccess","actionBegin","itemDropped","selected"],model:null,validTags:["ul"],_setFirst:!1,_rootCSS:"e-listbox",defaults:{itemsCount:null,totalItemsCount:null,dataSource:null,query:ej.Query(),itemRequestCount:5,itemHeight:null,fields:{id:null,text:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,tooltipText:null,selectBy:null,checkBy:null,groupBy:null,tableName:null,selected:null,category:null,toolTipText:null},height:"auto",width:"200",template:null,text:"",selectedIndex:null,checkedIndices:[],selectedIndices:[],cascadeTo:null,value:"",cssClass:"",targetID:null,htmlAttributes:{},showRoundedCorner:!1,enableRTL:!1,enabled:!0,showCheckbox:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",enablePersistence:!1,allowMultiSelection:!1,allowDrag:!1,allowDrop:!1,enableIncrementalSearch:!1,enableWordWrap:!0,caseSensitiveSearch:!1,loadDataOnInit:!0,create:null,change:null,select:null,unselect:null,itemDragStart:null,itemDrag:null,itemDragStop:null,itemDrop:null,checkChange:null,destroy:null,actionComplete:null,actionSuccess:null,actionBeforeSuccess:null,focusIn:null,focusOut:null,actionFailure:null,actionBegin:null,cascade:null,sortOrder:"none",enableVirtualScrolling:!1,checkAll:!1,uncheckAll:!1,enableLoadOnDemand:!1,itemRequest:null,allowDragAndDrop:undefined,selectedItemIndex:null,enableItemsByIndex:null,checkItemsByIndex:null,disableItemsByIndex:null,uncheckItemsByIndex:null,itemDropped:null,selected:null,selectIndexChanged:null,selectedItems:[],checkedItems:[],checkedItemlist:[],selectedItemlist:[]},dataTypes:{cssClass:"string",itemsCount:"number",itemRequestCount:"number",allowDrag:"boolean",allowDrop:"boolean",enableWordWrap:"boolean",enableIncrementalSearch:"boolean",caseSensitiveSearch:"boolean",template:"string",targetID:"string",cascadeTo:"string",showRoundedCorner:"boolean",enableRTL:"boolean",enablePersistence:"boolean",enabled:"boolean",allowMultiSelection:"boolean",dataSource:"data",query:"data",checkedIndices:"data",selectedIndices:"data",htmlAttributes:"data",loadDataOnInit:"boolean",showCheckbox:"boolean",sortOrder:"enum"},observables:["value","dataSource"],value:ej.util.valueFunction("value"),dataSource:ej.util.valueFunction("dataSource"),enable:function(){var n,t;this.listContainer.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=this.model.enabled=!0,this.element.removeAttr("disabled"),this.listContainer.removeClass("e-disable"),this.model.allowMultiSelection&&this.listContainer.removeClass("e-disable"),n=this.listContainer.find(".e-vscrollbar,.e-hscrollbar"),this.model.showCheckbox&&(t=this.listContainer.find("li:not(.e-disable)"),t.find(".listcheckbox").ejCheckBox("enable")),n.length>0&&this.scrollerObj.enable())},disable:function(){if(!this.listContainer.hasClass("e-disable")){this.target.disabled=!0;this.model.enabled=this.model.enabled=!1;this.element.attr("disabled","disabled");this.listContainer.addClass("e-disable");this.model.allowMultiSelection&&this.listContainer.addClass("e-disable");var n=this.listContainer.find(".e-vscrollbar,.e-hscrollbar");this.model.showCheckbox&&this.element.find(".listcheckbox").ejCheckBox("disable");n.length>0&&this.scrollerObj.disable()}},selectItemByIndex:function(n){var r=this.model.selectedIndex,u=this.listitems?this.listitems:this.listitem,t,i;n!=0&&(n=parseInt(n));n!=null&&((n>this.element.find("li:not('.e-ghead')").length||n<0||1/n==-Infinity)&&(n=this.model.selectedIndex),t=$(this.element.find("li:not('.e-ghead')")[n]),t.hasClass("e-select")||(this._activeItem=n,this.element.children("li").removeClass("e-select"),this._selectedItems=[],this.model.selectedIndices=[],t.addClass("e-select"),this.model.showCheckbox&&($(t).find(".listcheckbox").ejCheckBox("isChecked")||($(t).find(".listcheckbox").ejCheckBox("option","checked",!0),t.removeClass("e-select"),$.inArray(this._activeItem,this._checkedItems)>-1||this._checkedItems.push(this._activeItem),$.inArray(t[0],this.model.checkedIndices)>-1||this.model.checkedIndices.push(this._activeItem))),this._selectedItems.push(t),this.model.selectedIndices.push(n),i=this._getItemObject(t,null),i.isInteraction=!1,this.model.select&&this._trigger("select",i)));this.model.cascadeTo&&(this._activeItem=n,this._cascadeAction());this._setSelectionValues()._onlistselection(r,this._activeItem)},checkItemByIndex:function(n){typeof n=="number"&&this.checkItemsByIndices(n.toString())},uncheckItemByIndex:function(n){typeof n=="number"&&this.uncheckItemsByIndices(n.toString())},checkItemsByIndices:function(n){var t,i,r,u;if(ej.isNullOrUndefined(n))return!1;if(t=n.toString().split(","),t.length>0)for(i=0;i<t.length;i++)t[i]!=null&&(this._activeItem=parseInt(t[i]),this._activeItem<0&&(this._activeItem=0),r=$(this.element.children("li:not('.e-ghead')")[this._activeItem]),this.model.showCheckbox&&($(r).find(".listcheckbox").ejCheckBox("isChecked")||($(r).find(".listcheckbox").ejCheckBox("option","checked",!0),this.checkedStatus=!0,$.inArray(this._activeItem,this._checkedItems)>-1||this._checkedItems.push(this._activeItem),$.inArray(r[0],this.model.checkedIndices)>-1||this.model.checkedIndices.push(this._activeItem),u=this._getItemObject(r,null),u.isInteraction=!1,this.model.checkChange&&this._trigger("checkChange",u))));this._setSelectionValues()},uncheckItemsByIndices:function(n){var t,i,r,u,f,e;if(ej.isNullOrUndefined(n))return!1;if(t=n.toString().split(","),t.length>0)for(i=0;i<t.length;i++)t[i]!=null&&(r=parseInt(t[i]),u=$(this.element.children("li:not('.e-ghead')")[parseInt(r)]),this.model.showCheckbox&&$(u).find(".listcheckbox").ejCheckBox("isChecked")&&($(u).find(".listcheckbox").ejCheckBox("option","checked",!1),this.checkedStatus=!1,f=$.inArray(r,this.model.checkedIndices),$.inArray(r,this._checkedItems)>-1&&this._checkedItems.splice(f,1),f>-1&&this.model.checkedIndices.splice(f,1),e=this._getItemObject(u,null),e.isInteraction=!1,this.model.checkChange&&this._trigger("checkChange",e)));this._setSelectionValues()},selectAll:function(){var t,n,i;if(!this.model.showCheckbox&&this.model.allowMultiSelection)for(t=this.element.children("li:not('.e-ghead')"),n=0;n<t.length;n++)$(t[n]).hasClass("e-select")||$(t[n]).hasClass("e-disable")||($(t[n]).addClass("e-select"),this._selectedItems.push($(t[n])),this.model.selectedIndices.push(n),i=this._getItemObject(t,null),i.isInteraction=!1,this.model.select&&this._trigger("select",i));this._setSelectionValues()},unSelectAll:function(){this.unselectAll()},unselectAll:function(){return this.model.showCheckbox||this._removeListHover(),this._setSelectionValues(),this},selectItemsByIndex:function(n){this.selectItemsByIndices(n)},selectItemsByIndices:function(n){var r,i,u,t,f;if(ej.isNullOrUndefined(n))return!1;if(r=n.toString().split(","),this.model.allowMultiSelection)for(i=0;i<r.length;i++)r[i]!=null&&!isNaN(parseInt(r[i]))&&r[i]<this.element.children("li").length&&(u=parseInt(r[i]),this._activeItem=u,t=$(this.element.children("li:not('.e-ghead')")[this._activeItem]),t.hasClass("e-select")||(t.addClass("e-select"),this._selectedItems.push(t),this.model.selectedIndices.push(u),this.model.showCheckbox&&($(t).find(".listcheckbox").ejCheckBox("isChecked")||($(t).find(".listcheckbox").ejCheckBox("option","checked",!0),t.removeClass("e-select"),$.inArray(this._activeItem,this._checkedItems)>-1||this._checkedItems.push(this._activeItem),$.inArray(t[0],this.model.checkedIndices)>-1||this.model.checkedIndices.push(this._activeItem))),f=this._getItemObject(t,null),f.isInteraction=!1,this.model.select&&this._trigger("select",f)));this._setSelectionValues()},unselectItemsByIndex:function(n){this.unselectItemsByIndices(n)},unselectItemsByIndices:function(n){for(var i,r,t,e,f=n.toString().split(","),u=0;u<f.length;u++)f[u]!=null&&(i=parseInt(f[u]),r=$(this.listItemsElement[i]),this._activeItem=i,r.removeClass("e-active e-select"),this.model.showCheckbox&&$(r).find(".listcheckbox").ejCheckBox("isChecked")&&($(r).find(".listcheckbox").ejCheckBox("option","checked",!1),t=$.inArray(i,this.model.checkedIndices),$.inArray(i,this._checkedItems)>-1&&this._checkedItems.splice(t,1),t>-1&&this.model.checkedIndices.splice(t,1)),this.model.selectedIndex==i&&(this.model.selectedIndex=this._activeItem=null),t=this._selectedItems.indexOf(r[0]),this._selectedItems.splice(this.model.selectedIndices.indexOf(t),1),this.model.selectedIndices.splice(this.model.selectedIndices.indexOf(t),1),e=this._getItemObject(r,null),e.isInteraction=!1,this.model.unselect&&this._trigger("unselect",e));this._setSelectionValues()},unselectItemByIndex:function(n){var t,i,r;n=parseInt(n);t=$(this.element.children("li:not('.e-ghead')")[n]);this.model.showCheckbox&&$(t).find(".listcheckbox").ejCheckBox("isChecked")&&($(t).find(".listcheckbox").ejCheckBox("option","checked",!1),i=$.inArray(n,this.model.checkedIndices),$.inArray(n,this._checkedItems)>-1&&this._checkedItems.splice(i,1),i>-1&&this.model.checkedIndices.splice(i,1));t.hasClass("e-select")&&(t.removeClass("e-active e-select"),this.model.selectedIndex==n&&(this.model.selectedIndex=this._activeItem=null),i=this._selectedItems.indexOf(t[0]),this._selectedItems.splice(this.model.selectedIndices.indexOf(i),1),this.model.selectedIndices.splice(this.model.selectedIndices.indexOf(i),1),r=this._getItemObject(t,null),r.isInteraction=!1,this.model.unselect&&this._trigger("unselect",r));this._setSelectionValues()},selectItemByText:function(n){ej.isNullOrUndefined(n)||this[this.model.allowMultiSelection?"selectItemsByIndices":"selectItemByIndex"](this.getIndexByText(n))},selectItemByValue:function(n){this[this.model.allowMultiSelection?"selectItemsByIndices":"selectItemByIndex"](this.getIndexByValue(n))},unselectItemByText:function(n){this[this.model.allowMultiSelection?"unselectItemsByIndices":"unselectItemByIndex"](this.getIndexByText(n))},unselectItemByValue:function(n){this[this.model.allowMultiSelection?"unselectItemsByIndices":"unselectItemByIndex"](this.getIndexByValue(n))},getSelectedItems:function(){var n=[],t=this;return $(t.model.selectedIndices).each(function(i,r){n.push(t.getItemByIndex(r))}),n},getCheckedItems:function(){var n=[],t=this;return $(t.model.checkedIndices).each(function(i,r){n.push(t.getItemByIndex(r))}),n},removeItem:function(){return this.removeSelectedItems()},removeItemByText:function(n){return ej.isNullOrUndefined(this.getItemByText(n))?!1:this.removeItemByIndex(this.getItemByText(n).index)},hideSelectedItems:function(){var n=this.getSelectedItems();this._hideOrShowItemsByIndex(n,"hide")},hideCheckedItems:function(){var n=this.getCheckedItems();this._hideOrShowItemsByIndex(n,"hide")},_hideOrShowItemsByIndex:function(n,t){if($.type(n)=="number")t=="hide"?($(this.listItemsElement[n]).hide(),$(this.listItemsElement[n]).next().hasClass("e-ghead")&&$(this.listItemsElement[n]).prev().hide()):($(this.listItemsElement[n]).show(),$(this.listItemsElement[n]).prev().hasClass("e-ghead")&&$(this.listItemsElement[n]).prev().show());else for(var i=0;i<n.length;i++)t=="hide"?n[i].item?n[i].item.hide():$(this.listItemsElement[n[i]]).hide():n[i].item?n[i].item.show():$(this.listItemsElement[n[i]]).show();this._refreshScroller()},showItemsByIndices:function(n){this._hideOrShowItemsByIndex(n,"show")},hideItemsByIndices:function(n){this._hideOrShowItemsByIndex(n,"hide")},_hideOrShowItemsByValue:function(n,t){var r,i;if($.type(n)=="array")for(i=0;i<this.listItemsElement.length;i++)for(r=0;r<=n.length;r++)$(this.listItemsElement[i]).attr("value")==n[r]&&(t=="hide"?$(this.listItemsElement[i]).hide():$(this.listItemsElement[i]).show());else for(i=0;i<this.listItemsElement.length;i++)$(this.listItemsElement[i]).attr("value")==n&&(t=="hide"?$(this.listItemsElement[i]).hide():$(this.listItemsElement[i]).show());this._refreshScroller()},showItemsByValues:function(n){this._hideOrShowItemsByValue(n,"show")},hideItemsByValues:function(n){this._hideOrShowItemsByValue(n,"hide")},showItemByValue:function(n){this._hideOrShowItemsByValue(n,"show")},hideItemByValue:function(n){this._hideOrShowItemsByValue(n,"hide")},showItemByIndex:function(n){this._hideOrShowItemsByIndex(n,"show")},hideItemByIndex:function(n){this._hideOrShowItemsByIndex(n,"hide")},hide:function(){this.listContainer.hide()},show:function(){this.listContainer.show()},hideAllItems:function(){this.element.find("li:visible").hide();this._refreshScroller()},showAllItems:function(){this.element.find("li:hidden").show();this._refreshScroller()},_stateMaintained:function(n){var f,u,t,r;if(this.model.disableItemsByIndex=[],this.model.selectedIndices=[],this.model.checkedIndices=[],this.model.selectedIndex>=n&&this.model.selectedIndex!=null&&(this.model.selectedIndex==n||$(this.element.children()[n-1]).hasClass("e-disable")?this.model.selectedIndex=null:this.model.selectedIndex!=n&&(this.model.selectedIndex-=1)),u=$(n).length,u>1){for(i=u;i>=0;i--)$(this.element.children()[n[i]]).remove();for(f=this.element.children().length,r=0;r<f;r++)$(this.element.children()[r]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(r)}else{for(t=n-1,t;t>=0;t--)$(this.element.children()[t]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(t),$(this.element.children()[t]).hasClass("e-select")&&this.model.selectedIndices.push(t),$(this.element.children()[t]).find(".listcheckbox").ejCheckBox("isChecked")&&this.model.checkedIndices.push(t);for(n=parseInt(n)+1,n;n<this._listSize;n++)$(this.element.children()[n]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(n-1),$(this.element.children()[n]).hasClass("e-select")&&this.model.selectedIndices.push(n-1),$(this.element.children()[n]).find(".listcheckbox").ejCheckBox("isChecked")&&this.model.checkedIndices.push(n-1)}},removeAll:function(){var n,r,t,u,i;if(ej.isNullOrUndefined(this.dataSource()))return n=[],r=this.element.find("li"),$(r).each(function(t,i){n.push($(this).text());i.remove()}),this._refreshItems(),n;if(!(this.dataSource()instanceof ej.DataManager)){for(t=[],u=$(this.listItemsElement).length,i=0;i<u;i++)t.push(this._getRemovedItems([parseInt(0)]));return t}},removeItemByIndex:function(n){var i,t=this.model.selectedIndex,r=this.element.find("li:not('.e-ghead')");return ej.isNullOrUndefined(this.dataSource())?(i=$(r[n]).remove().text(),this._stateMaintained(n),this._refreshItems()):this.dataSource()instanceof ej.DataManager||(i=this._getRemovedItems([parseInt(n)])),this.model.selectedIndex=n==t?null:n<t?t-1:t,i},removeSelectedItems:function(){if(this.model.showCheckbox)return!1;if(ej.isNullOrUndefined(this.dataSource())){var n=this.value();return $(this.getSelectedItems()).each(function(n,t){t.item.remove()}),this._refreshItems(),n}if(!(this.dataSource()instanceof ej.DataManager))return this.model.selectedIndex=null,this._getRemovedItems(this.model.selectedIndices)},_getRemovedItems:function(n){var t=[];return this._stateMaintained(n),this.value(null),this._activeItem=null,this.dataSource(this.dataSource().filter(function(i,r){if(n.indexOf(r)!=-1)t.push(i);else return!0})),this.refresh(!0),t},getIndexByValue:function(n){for(var i,t=0;t<this.listItemsElement.length;t++)if($(this.listItemsElement[t]).attr("value")==n){i=t;break}return i},getIndexByText:function(n){var i,n,t,r;for(this.model.allowMultiSelection&&(n=n.split(","),i=[]),t=0;t<this.listItemsElement.length;t++)if(typeof n=="object"){for(r=0;r<n.length;r++)if($(this.listItemsElement[t]).text()==n[r]){i.push(t);break}}else if($(this.listItemsElement[t]).text()==n){i=t;break}return i},getTextByIndex:function(n){return $(this.element.find("li:not('.e-ghead')")[n]).text()},getItemByText:function(n){var i=this,t;return this.listItemsElement.each(function(){if($(this).text()==n)return t=i._getItemObject($(this)),!1}),t},getItemByIndex:function(n){return this._getItemObject($(this.element.children("li:not('.e-ghead')")[n]))},getListData:function(){return ej.DataManager&&this.dataSource()instanceof ej.DataManager?this.model.allowVirtualScrolling?(this.listitems=this.element.find("li"),this.listitems):this.listitems:this.dataSource()?this.dataSource():void 0},enableItem:function(n){var t=this;this.listItemsElement.each(function(){if($(this).text()==n)return $(this).removeClass("e-disable"),t.model.showCheckbox&&$(this).find(".listcheckbox").ejCheckBox("enable"),t._disabledItems.splice($(this).index().toString()),!1})},disableItem:function(n){var t=this;this.listItemsElement.each(function(){if($(this).text()==n)return $(this).addClass("e-disable"),t.model.showCheckbox&&$(this).find(".listcheckbox").ejCheckBox("disable"),t._disabledItems.push($(this).index().toString()),!1})},moveUp:function(){var n=this.model.fields.groupBy!=null?this.model.allowMultiSelection||this.model.showCheckbox?!1:!0:!0;n&&(this.checkedorselected=this.model.checkedIndices.length==0?this.model.selectedIndices.reverse():this.model.checkedIndices.reverse(),this._checkstate(!0))},moveDown:function(){var n=this.model.fields.groupBy!=null?this.model.allowMultiSelection||this.model.showCheckbox?!1:!0:!0;n&&(this.checkedorselected=this.model.checkedIndices.length==0?this.model.selectedIndices:this.model.checkedIndices,this._checkstate())},_checkstate:function(n){var i=$(this.element.children("li:not('.e-ghead')")[this.checkedorselected[0]]),t,r;(!n||i.prev().hasClass("e-ghead"))&&i.next().hasClass("e-ghead")||ej.isNullOrUndefined(this.checkedorselected)||(t=0,r=this._getItem(this.checkedorselected[t]),this._moveupdown(r,t,n?"up":"down"))},_moveItem:function(n,t,i){var u=n,r=n.index(),f=i=="up",e=i=="down";this._addListHover();this._getItem(this._selectedItem).removeClass("e-hover");f?(t.insertAfter(u),t.hasClass("e-disable")&&$.inArray(r.toString(),this._disabledItems)>-1&&(this._disabledItems.splice($.inArray(r.toString(),this._disabledItems),1),this._disabledItems.push((r+1).toString())),this._selectedItem-=1,this._refreshItems()):e&&(t.insertBefore(u),t.hasClass("e-disable")&&$.inArray(r.toString(),this._disabledItems)>-1&&(this._disabledItems.splice($.inArray(r.toString(),this._disabledItems),1),this._disabledItems.push((r-1).toString())),this._selectedItem+=1,this._refreshItems())},_moveupdown:function(list,index,direction){for(var j=this.checkedorselected[index],next,k,i=0,i=j,oneafter;i<$(this.element.children("li:not('.e-ghead')")).length;){if(next=$(this.element.children("li:not('.e-ghead')")[i]),ej.isNullOrUndefined(next))break;if(next.hasClass("e-select")||next.find("span").hasClass("e-checkmark")){k=i;direction=="down"?eval(i++):eval(i--);continue}else break}if(!ej.isNullOrUndefined(next)&&i<$(this.element.children("li")).length&&this._moveItem(list,next,direction),index<this.checkedorselected.length&&(ele=$(this.element.children("li")[this.checkedorselected[index]]),ele.next().hasClass("e-select")||ele.next().find("span").hasClass("e-checkmark")?oneafter=direction=="down"?!0:!1:ej.isNullOrUndefined(ele[0])?oneafter=direction=="up"?!0:!1:(ele.hasClass("e-select")||ele.find("span").hasClass("e-checkmark"))&&this._moveupdown(ele,index+1,direction)),length=this.element.children("li:not('.e-ghead')").length,this.model.checkedIndices.length==0)for(this.model.selectedIndices=[],i=0;i<length;i++)$(this.element.children("li:not('.e-ghead')")[i]).hasClass("e-select")&&this.model.selectedIndices.push(i);else for(this.model.checkedIndices=[],j=0;j<length;j++)$.parseJSON($(this.element.children("li:not('.e-ghead')")[j]).find("span").attr("aria-checked"))&&this.model.checkedIndices.push(j)},checkAll:function(){if(!this.model.showCheckbox)return!1;var n=this.element.find("li:not('.e-ghead')");for(i=0;i<n.length;i++)$(n[i].firstChild).find(".listcheckbox").ejCheckBox("isChecked")||($(n[i].firstChild).find(".listcheckbox").ejCheckBox("option","checked",!0),this._checkedItems.push(n[i]),this.model.checkedIndices.push(i));this._setSelectionValues();this.model.uncheckAll=!1},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){if(!this.model.showCheckbox)return!1;var n=this.element.find("li:not('.e-ghead')");for(i=0;i<n.length;i++)$(n[i].firstChild).find(".listcheckbox").ejCheckBox("isChecked")&&$(n[i].firstChild).find(".listcheckbox").ejCheckBox("option","checked",!1);this._checkedItems=[];this.model.checkedIndices=[];this._setSelectionValues();this.model.checkAll=!1},addItem:function(n,t){var t=!ej.isNullOrUndefined(t)&&t<=this.element.find("li:not('.e-ghead')").length?t:this.element.find("li:not('.e-ghead')").length,f=this,r=t,u;if(ej.isNullOrUndefined(this.dataSource()))if(n instanceof Array)$(n).each(function(n,i){f.addItem(i,t);t=t+1});else{if(this.model.fields.groupBy&&typeof n=="object")for(_query=ej.Query().group(this.model.fields.groupBy),groupedList=ej.DataManager([n]).executeLocal(_query),this.dataSource([]),i=0;i<groupedList.length;i++)this._setMapFields(),this.dummyUl.push(ej.buildTag("li.e-ghead",groupedList[i].key)[0]),this._loadlist(groupedList[i].items),this.dataSource(this.dataSource().concat(groupedList[i].items));else n=typeof n=="object"?n[this.model.fields.text]:n,this.listitem=this.element.find("li:not('.e-ghead')").length?t-1<0?$(this.element.find("li:not('.e-ghead')")[0]).before('<li role="option">'+n+"<\/li>"):$(this.element.find("li:not('.e-ghead')")[t-1]).after('<li role="option">'+n+"<\/li>"):$(this.element).html('<li role="option">'+n+"<\/li>");this.listitems=this.element.find("li:not('.e-ghead')");this._addItemIndex=t;this.model.showCheckbox&&($checkbox=ej.buildTag("input.listcheckbox e-align#popuplist"+(this.listitems.length-1)+"_"+this._id,"",{},{type:"checkbox",name:"list"+(this.listitems.length-1)}),$(this.listitems[t]).prepend($checkbox),$($(this.listitems[t]).find(".listcheckbox")).ejCheckBox({change:$.proxy(this._onClickCheckList,this)}));(this.model.allowDrag||this.model.allowDrop)&&this._enableDragDrop();this._addItemIndex=null;this._refreshItems()}else if(!(this.dataSource()instanceof ej.DataManager)){for(f.dataSource()instanceof Object?(dup={},n instanceof Object||(dup[f.model.fields.text]=n,n=dup)):n instanceof Array||(n=[n]),$(n).each(function(n,i){f.model.fields.groupBy!=null&&ej.isNullOrUndefined(i[f.model.fields.groupBy])||(f.dataSource().splice(t,0,i),t=t+1)}),this.model.disableItemsByIndex=[],this.model.selectedIndices=[],this.model.checkedIndices=[],this.model.selectedIndex>=r&&(this.model.selectedIndex+=1),u=r-1,u;u>=0;u--)$(this.element.find("li:not('.e-ghead')")[u]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(u),$(this.element.find("li:not('.e-ghead')")[u]).hasClass("e-select")&&this.model.selectedIndices.push(u),$(this.element.children()[u]).hasClass("e-checkmark")&&this.model.checkedIndices.push(u);for(r;r<this._listSize;r++)$(this.element.find("li:not('.e-ghead')")[r]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(r+1),$(this.element.find("li:not('.e-ghead')")[r]).hasClass("e-select")&&this.model.selectedIndices.push(r+1),$(this.element.find("li:not('.e-ghead')")[r]).find(".listcheckbox").ejCheckBox("isChecked")&&this.model.checkedIndices.push(r+1);this.refresh(!0)}},enableItemByIndex:function(n){typeof n=="number"&&this.enableItemsByIndices(n.toString())},disableItemByIndex:function(n){typeof n=="number"&&this.disableItemsByIndices(n.toString())},disableItemsByIndices:function(n){var t,i,r;if(ej.isNullOrUndefined(n))return!1;for(t=n.toString().split(","),i=0;i<t.length;i++)t.length>0&&!($.inArray(t[i],this._disabledItems)>-1)&&(r=$(this.element.children("li:not('.e-ghead')")[parseInt(t[i])]).addClass("e-disable"),r.find(".listcheckbox").ejCheckBox("disable"),this._disabledItems.push(t[i]))},enableItemsByIndices:function(n){for(var u,t=n.toString().split(","),r,i=0;i<t.length;i++)t.length>0&&$.inArray(t[i],this._disabledItems)>-1&&(r=$.inArray(t[i],this._disabledItems),u=$(this.element.children("li:not('.e-ghead')")[parseInt(t[i])]).removeClass("e-disable"),u.find(".listcheckbox").ejCheckBox("enable"),this._disabledItems.splice(r,1))},_init:function(){this._id=this.element[0].id;this._isMozilla=ej.browserInfo().name=="mozilla"?!0:!1;this._cloneElement=this.element.clone();this._deprecatedValue()._initialize()._render()._wireEvents();this._initValue=this.focused=this.datamerged=this.groupData=!1;this._typeInterval=null;this._dummyVirtualUl=[];this._virtualCount=0;this._liItemHeight=0;this._typingThreshold=2e3;this._dataUrl=this.dataSource();this.model.checkAll&&this.checkAll();this.model.uncheckAll&&this.uncheckAll();this.model.disableItemsByIndex&&this.disableItemsByIndices(this.model.disableItemsByIndex.toString());this.model.enableItemsByIndex&&this.enableItemsByIndices(this.model.enableItemsByIndex.toString());this.model.uncheckItemsByIndex&&this.uncheckItemsByIndices(this.model.uncheckItemsByIndex.toString());this._deprecatedValue()._enabled(this.model.enabled)},_deprecatedValue:function(){return this.model.itemDrop=this.model.itemDrop||this.model.itemDropped,this.model.change=this.model.change||this.model.selectIndexChanged,this.model.fields.checkBy=this.model.fields.selected||this.model.fields.checkBy,this.model.fields.tooltipText=this.model.fields.toolTipText||this.model.fields.tooltipText,this.model.fields.groupBy=this.model.fields.category||this.model.fields.groupBy,this.model.select=this.model.select||this.model.selected,this.model.allowDragAndDrop!=undefined&&(this.model.allowDrag=this.model.allowDrop=!0),this.model.selectedIndex=this.model.selectedIndex!=null?this.model.selectedIndex:this.model.selectedItemIndex,this.model.checkedIndices=(this.model.checkedIndices.length?this.model.checkedIndices:null)||(this.model.checkItemsByIndex?this.model.checkItemsByIndex:null)||(this.model.checkedItems.length?this.model.checkedItems:null)||(this.model.checkedItemlist.length?this.model.checkedItemlist:[]),this.model.selectedIndices=(this.model.selectedIndices.length?this.model.selectedIndices:null)||(this.model.selectedItems.length?this.model.selectedItems:null)||(this.model.selectedItemlist.length?this.model.selectedItemlist:[]),this},_setModel:function(n){var t,r=!1,f,i,s,u;for(t in n)switch(t){case"value":this._setText(ej.util.getVal(n[t]));break;case"dataSource":ej.isNullOrUndefined(this._isCasCadeTarget)||(this.model.selectedIndex=null);n[t]=ej.util.getVal(n[t]);this._checkModelDataBinding(n[t]);break;case"query":this._queryCheck(n[t]);break;case"fields":this.model.fields=$.extend(this.model.fields,n[t]);this._checkModelDataBinding(this.dataSource());break;case"template":this.model.template=n[t];this.refresh(!0);break;case"loadDataOnInit":this._loadContent=n[t];this._checkModelDataBinding(this.dataSource());break;case"enableRTL":this.model.enableRTL=n[t];this.model.enableRTL?this.listContainer.addClass("e-rtl"):this.listContainer.removeClass("e-rtl");break;case"enabled":this.model.enabled=n[t];this._enabled(n[t]);break;case"enableWordWrap":this.model.enableWordWrap=n[t];this._wordWrapItems(n[t]);break;case"height":case"width":this.model[t]=n[t];this._setDimensions();break;case"cssClass":this.model.cssClass=n[t];this.listContainer.addClass(this.model.cssClass);break;case"showCheckbox":this._checkboxHideShow(n[t]);n[t]&&this._removeListHover();break;case"showRoundedCorner":this.model.showRoundedCorner=n[t];this._roundedCorner();break;case"selectedItemIndex":case"selectedIndex":this.listitem[n[t]]||n[t]==null||this.listitems[n[t]]?(this.selectItemByIndex(n[t]),this.model.selectedIndex=this.model.selectedItemIndex=n[t]):n[t]=this.model.selectedIndex;break;case"sortOrder":this.model.sortOrder=n[t];this.dataSource()!=null?this._showFullList():this._renderlistContainer();break;case"checkItemsByIndex":case"checkedItemlist":case"checkedItems":case"checkedIndices":this.uncheckAll();this.checkItemsByIndices(n[t].toString());n[t]=this.model[t]=this.model.checkedIndices;break;case"uncheckItemsByIndex":this.uncheckItemsByIndices(n[t].toString());this.model[t]=n[t];break;case"selectedItemlist":case"selectedItems":case"selectedIndices":this.unselectAll();this.selectItemsByIndices(n[t].toString());n[t]=this.model.selectedIndices;break;case"enableItemsByIndex":this.model[t]=n[t];this.enableItemsByIndices(n[t].toString());break;case"disableItemsByIndex":this.model[t]=n[t];this.disableItemsByIndices(n[t].toString());break;case"enableVirtualScrolling":this.model.allowVirtualScrolling=n[t];r=!0;break;case"allowDrag":case"allowDrop":case"allowDragAndDrop":case"allowVirtualScrolling":case"virtualScrollMode":this.model[t]=n[t];r=!0;break;case"checkAll":this.model[t]=n[t];n[t]?this.checkAll():this.uncheckAll();break;case"uncheckAll":this.model[t]=n[t];n[t]?this.uncheckAll():this.checkAll();break;case"htmlAttributes":this._addAttr(n[t]);break;case"itemsCount":f=this.model.itemsCount;this.model.height?(this.model.itemsCount=n[t],this._setItemsCount()._setDimensions()):n[t]=f;break;case"itemHeight":var e=this.listItemsElement,o=ej.isNullOrUndefined(n[t])?n[t]:n[t].toString().replace("px",""),h=ej.isNullOrUndefined(this.model.itemHeight)?this.model.itemHeight:this.model.itemHeight.toString().replace("px","");for(i=0;i<e.length;i++)s=ej.isNullOrUndefined(n[t])?{"min-height":ej.isNullOrUndefined(this.model.itemHeight)?"20px":h}:{"min-height":o+"px",height:o+"px"},e.eq(i).css(s);this.refresh();break;case"allowMultiSelection":this.model.allowMultiSelection=n[t];n[t]||(u=this.model.selectedIndex,this._removeListHover(),ej.isNullOrUndefined(u)?"":this.selectItemByIndex(u));break;case"totalItemsCount":ej.isNullOrUndefined(this.dataSource())||(this.model.totalItemsCount=n[t],this.model.query&&this._queryCheck(this.model.query))}r&&this._refresh()},_destroy:function(){return ej.isNullOrUndefined(this._lilist)||$(this._lilist).ejDraggable("destroy"),this.element.insertAfter(this.listContainer),this.element.find(".e-chkbox-wrap").remove(),this.listContainer.remove(),this.element.removeClass("e-ul"),this._isList||this.element.empty(),$(window).off("resize",$.proxy(this._OnWindowResize,this)),this._ListEventUnbind(this.element.children("li")),this},_ListEventUnbind:function(n){n.off("contextmenu",$.proxy(this._OnMouseContext,this));n.off("click",$.proxy(this._OnMouseClick,this));n.off("touchstart mouseenter",$.proxy(this._OnMouseEnter,this));n.off("touchend mouseleave",$.proxy(this._OnMouseLeave,this))},_refresh:function(){this._destroy()._init()},_finalize:function(){return this.model.selectedIndex!=null?this.selectItemByIndex(this.model.selectedIndex):this.model.showCheckbox==!0&&this._selectedItems.length>0&&this._selectCheckedItem(this._selectedItems),this.model.checkedIndices!=null&&this.checkItemsByIndices(this.model.checkedIndices.toString()),this},_initialize:function(){return this._isList=this.element.children().length?!0:!1,this.target=this.element[0],this._queryString=null,this._disabledItems=[],this._itemId=null,this._up=this._down=this._ctrlClick=!1,this.checkedStatus=this._isScrollComplete=!1,this._incqueryString="",this._totalCount=0,this._activeItem=null,this._initValue=!0,this.model.allowVirtualScrolling=this.model.allowVirtualScrolling?this.model.allowVirtualScrolling:this.model.enableLoadOnDemand,this.model.virtualScrollMode=this.model.enableVirtualScrolling?"continuous":this.model.virtualScrollMode,this._selectedItems=[],this._checkedItems=[],this._loadContent=this.model.loadDataOnInit,this._loadInitialRemoteData=!0,this._skipInitialRemoteData=!1,this.model.enableVirtualScrolling&&(this.model.allowVirtualScrolling=!0),this._setItemsCount(),this},_render:function(){return this._savedQueries=this.model.query.clone(),this.model.totalItemsCount&&this._savedQueries.take(this.model.totalItemsCount),this._renderContainer()._addAttr(this.model.htmlAttributes),ej.DataManager&&this.dataSource()instanceof ej.DataManager?(this.model.actionBegin&&this._trigger("actionBegin",{}),this._loadInitialRemoteData&&this._initDataSource(this.dataSource())):this._showFullList(),this.dataSource()||this._finalize(),this.listItemsElement=this.element.find("li:not('.e-ghead')"),this.model.showRoundedCorner&&this._roundedCorner(),this},_queryCheck:function(n){this._savedQueries=n.clone();this.element.empty();this.dataSource()&&this._checkModelDataBinding(this.dataSource())},_checkModelDataBinding:function(n){this.mergeValue=null;this.dataSource(n);n!=null&&n.length!=0?ej.DataManager&&n instanceof ej.DataManager?this._initDataSource(n):this._showFullList():(this.element.empty(),this._refreshScroller())},_initDataSource:function(n){var t=this,i;t.listitems=t.dataSource();t._updateLoadingClass(!0);i=n.executeQuery(this._getQuery());i.done(function(n){t._totalCount=n.count;t.listitems=n.result;t._updateLoadingClass()._showFullList()._trigger("actionSuccess",n);t._finalize();t._virtualPages=[0]}).fail(function(n){t.dataSource(null);t._updateLoadingClass(!0)._trigger("actionFailure",n)}).always(function(n){t.model.checkAll&&t.checkAll();t.model.uncheckAll&&t.uncheckAll();t._trigger("actionComplete",n)})},_getQuery:function(){var n,i,t,r;if(ej.isNullOrUndefined(this.model.query)){i=[];t=this.model.fields;n=ej.Query();for(r in t)r!=="tableName"&&i.push(t[r]);i.length>0&&n.select(i);this.dataSource().dataSource.url.match(t.tableName+"$")||ej.isNullOrUndefined(t.tableName)||n.from(t.tableName)}else n=this.model.query.clone();return this.model.allowVirtualScrolling&&(n.requiresCount(),n.take(this.model.itemRequestCount)),n},_getLiHeight:function(){this._liItemHeight=$(this.element.find("li")[0]).outerHeight()},_addDragableClass:function(){if(this.model.allowDrag||this.model.allowDrop){this.element.css("cursor","pointer");this.model.allowDrop&&(this.listContainer.addClass("e-droppable"),this.listBoxScroller.addClass("e-droppable"));var n=this;this.element.children("li").each(function(){n.model.allowDrag&&$(this).addClass("e-draggable");n.model.allowDrop&&$(this).addClass("e-droppable")})}return this},_enableDragDrop:function(){(this.model.allowDrag||this.model.allowDrop)&&this._drag()},_updateLoadingClass:function(n){return this.listContainer[n?"addClass":"removeClass"]("e-load"),this},_addAttr:function(n){var t=this;$.map(n,function(n,i){i=="class"?t.listContainer.addClass(n):i=="required"?t.element.attr(i,n):i=="disabled"&&n=="disabled"?t._enabled(!1):t.listContainer.attr(i,n)})},_renderContainer:function(){return this.listContainer=ej.buildTag("div.e-ddl-popup e-box e-popup e-widget "+this.model.cssClass,"",{visibility:"hidden"},{tabIndex:0,id:this._id+"_container"}),this.listBoxScroller=ej.buildTag("div.e-listbox-container"),this.ultag=ej.buildTag("ul.e-ul","",{},{role:"listbox"}),this.element=this.element.addClass("e-ul"),this.listContainer.append(this.listBoxScroller).insertAfter(this.element),this.listBoxScroller.append(this.element),this.element.attr("data-ej-unselectable","on").css("user-select","none"),this._hiddenInput=ej.buildTag("input#"+this._id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this._id),this},_setMapFields:function(){var n=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_tooltipText:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selectBy:null,_checkBy:null};this.mapFld._id=n&&n.id?n.id:"id";this.mapFld._imageUrl=n&&n.imageUrl?n.imageUrl:"imageUrl";this.mapFld._tooltipText=n&&n.tooltipText?n.tooltipText:"tooltipText";this.mapFld._imageAttributes=n&&n.imageAttributes?n.imageAttributes:"imageAttributes";this.mapFld._spriteCSS=n&&n.spriteCssClass?n.spriteCssClass:"spriteCssClass";this.mapFld._text=n&&n.text?n.text:this.listitems[0].text?"text":this._getObjectKey(this.listitems[0])[0];this.mapFld._value=n&&n.value?n.value:"value";this.mapFld._htmlAttributes=n&&n.htmlAttributes?n.htmlAttributes:"htmlAttributes";this.mapFld._checkBy=n&&n.checkBy?n.checkBy:"checkBy";this.mapFld._selectBy=n&&n.selectBy?n.selectBy:"selectBy";this.mapCateg=n&&n.groupBy?n.groupBy:""},_getObjectKey:function(n){var t,i;if(Object.keys)return Object.keys(n);t=[];for(i in n)n.hasOwnProperty(i)&&t.push(i);return t},_itemStyle:function(){var n=ej.isNullOrUndefined(this.model.itemHeight)?this.model.itemHeight:this.model.itemHeight.toString().replace("px",""),t=ej.isNullOrUndefined(this.model.itemHeight)?"":"min-height:"+n+"px;height:"+n+"px";return{style:t}},sort:function(){var n=document.createElement("ul"),e,i,o,r,t,u;if($(n).append(this.itemsContainer.children()),this.model.fields.groupBy!=null||$(n).find(">.e-ghead").length>0){for(e=0;e<$(n).find(">.e-ghead").length;e++)i=$(n).find(">.e-ghead").eq(0).first().nextUntil(".e-ghead").get(),this._setSortList(n,i);for(o=document.createElement("ul"),r=$(n).clone().find(">.e-ghead").get(),u=0;u<r.length;u++)o.append(r[u]);var f=this._customSort(o,r),s=document.createElement("ul"),h,c=$(n).find("li.e-ghead").get();for(this.model.sortOrder.toLowerCase()=="descending"&&f.reverse(),t=0;t<f.length;t++)for(s.append(f[t]),l=0;l<c.length;l++)if(f[t].textContent==c[l].textContent)for(h=$(n).find(">.e-ghead").eq(l).first().nextUntil(".e-ghead").get(),m=0;m<h.length;m++)s.append(h[m]);this.itemsContainer=$(s)}else i=$(n).children("li").get(),this._setSortList(n,i),this.itemsContainer=$(n)},_customSort:function(n,t){return t.sort(function(n,t){var i=$(n).text().toUpperCase(),r=$(t).text().toUpperCase();return i<r?-1:i>r?1:0}),t},_setSortList:function(n,t){this._customSort(n,t);this.model.sortOrder.toLowerCase()=="descending"&&t.reverse();(this.model.fields.groupBy!=null||$(n).find(">.e-ghead").length>0)&&($(n).append($("<li>").text($(n).find(">.e-ghead").eq(0).text()).addClass("e-ghead")),$(n).find(">.e-ghead").eq(0).remove());$.each(t,function(t,i){$(n).append(i)})},_renderlistContainer:function(){var i,f,w,s,h,t,u,a,c,v,n,y,e,o,l,p,r;if(this.hold=this.touchhold=!1,this.item="",this.startime=0,this.listitemheight=24,i=this.listitems,w=this.model.fields,this.lastScrollTop=-1,this.dummyUl=$(),this.model.enableRTL&&this.listContainer.addClass("e-rtl"),this._wordWrapItems(),this.dataSource()==null||this.dataSource().length<1)s=this.element.parents().last(),this.docbdy=this.model.targetID?s.find("#"+this.model.targetID):s.find("#"+this._id),this.itemsContainer=this.docbdy,this.model.sortOrder!="none"&&this.sort(),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img").addClass("e-align"),this.items.children("div").addClass("e-align"),h=parseInt(this.model.itemHeight)+"px",this.model.itemHeight&&$("li").css({"min-height":h,height:h}),this.element.append(this.itemsContainer.children());else if(this.dataSource()!=null&&typeof i[0]!="object")if(this._loadInitialRemoteData&&this.mergeValue&&this.model.virtualScrollMode=="continuous"&&this.model.totalItemsCount)this._loadlist(this.mergeValue);else if(this._loadInitialRemoteData&&this.mergeValue&&this.model.virtualScrollMode=="normal"&&this.model.totalItemsCount){for(this.realUllength=0,this.mergeUl=[],n=0;n<this.mergeValue.length;n++)this.mergeUl.push(ej.buildTag("li",this.mergeValue[n][this.model.fields.text],null,this._itemStyle())[0]);for(this.element.append(this.mergeUl),n=0;n<this.model.totalItemsCount-this.mergeValue.length;n++)this.dummyUl.push(ej.buildTag("li",null,null,this._itemStyle())[0]);this.element.append(this.dummyUl);this._refreshScroller()}else this._loadInitialRemoteData&&this.mergeValue&&!this.model.totalItemsCount&&this._initDataSource(this.dataSource());else if(this._setMapFields(),u=this._savedQueries,this.listContainer.height(this.model.height),this.listitemheight=24,this.model.allowVirtualScrolling){if(this.model.virtualScrollMode=="normal"){if(this.realUllength=0,this.dataSource().length<0&&(query=this._savedQueries.take(parseInt(this.listContainer.height()/this.listitemheight)),r=this,ej.DataManager&&this.dataSource()instanceof ej.DataManager&&(r.listitems=r.dataSource(),a=this.dataSource().executeQuery(query),a.done(function(n){r._trigger("actionBeforeSuccess",n);r.listitems=n.result;r._trigger("actionSuccess",n)}).fail(function(n){r._trigger("actionFailure",n)}).always(function(n){r._trigger("actionComplete",n)}))),this.mergeValue!=t&&!ej.isNullOrUndefined(this.mergeValue)){for(this.mergeUl=[],n=0;n<this.mergeValue.length;n++)c=ej.buildTag("li",this.model.template?"":this.mergeValue[n][this.model.fields.text],null,this._itemStyle())[0],this.model.template&&c.append(this._getTemplatedString(i[n])),this.mergeUl.push(c[0]);this.element.append(this.mergeUl)}for(v=this.model.totalItemsCount?this.mergeValue?this.model.totalItemsCount-this.mergeValue.length:this.model.totalItemsCount:this.listitems.length,n=0;n<v;n++)y=ej.buildTag("li",null,null,this._itemStyle()),this.dummyUl.push(y[0]);this.dummyUl.attr("data-ej-page",0);this.element.append(this.dummyUl)}this._loadInitialData(u,i)}else if(this.mapCateg&&this.mapCateg!="")if(u=ej.Query().group(this.mapCateg),this.model.sortOrder.toLowerCase()=="none"&&u.queries.splice(0,1),t=ej.DataManager(i).executeLocal(u),this.model.sortOrder.toLowerCase()!="none"&&(e=ej.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),t=ej.DataManager(t).executeLocal(e)),this.dataSource([]),this.datamerged&&this.model.fields.groupBy){for(this.mergeUl=[],n=0;n<this.mergeValue.length;n++)for(this.mergeUl.push(this.mergeValue[n]),j=0;j<t[0].items.length;j++)this.mergeValue[n].category==t[0].items[j].key&&t[0].items[j].items.push(this.mergeUl[n]);for(n=0;n<t[0].items.length;n++)this.dummyUl.push(ej.buildTag("li.e-ghead",t[0].items[n].key)[0]),this._loadlist(t[0].items[n].items),this.dataSource(this.dataSource().concat(t[0].items[n].items))}else for(n=0;n<t.length;n++)this.dummyUl.push(ej.buildTag("li.e-ghead",t[n].key)[0]),this._loadlist(t[n].items),this.dataSource(this.dataSource().concat(t[n].items));else if(t=ej.DataManager(i).executeLocal(u),t.length>0){if(this.mergeValue!=t&&!ej.isNullOrUndefined(this.mergeValue))for(this.mergeUl=[],n=0;n<this.mergeValue.length;n++)this.mergeUl.push(ej.buildTag("li",this.mergeValue[n][this.model.fields.text],null,this._itemStyle())[0]),t.push(this.mergeValue[n]);if(this.model.template!=null&&this._loadContent){for(this.model.sortOrder.toLowerCase()!="none"&&(e=ej.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),i=ej.DataManager(i).executeLocal(e)),n=0;n<i.length;n++)o=this._getField(i[n],this.mapFld._htmlAttributes),l=this._getField(i[n],this.mapFld._id),f=ej.buildTag("li"),o&&o!=""&&f.attr(o),l&&f.attr("id",l),this.model.template&&f.append(this._getTemplatedString(i[n])),this.dummyUl.push(f[0]);this.model.allowVirtualScrolling||this.element.children().remove();p=this.model.virtualScrollMode=="continuous"&&this.mergeValue?this.realUllength+this.mergeValue.length:this.realUllength;this.element.children()[p]==null&&(!this.model.allowVirtualScrolling||this.model.virtualScrollMode==ej.VirtualScrollMode.Continuous)&&this._loadContent&&this.element.append(this.dummyUl)}else this.realUllength=0,this._loadlist(t)}r=this;t&&(this.listitems=t);this._setDimensions();this.listContainer.css({position:"relative",height:""});this.listBoxScroller.css({height:"",width:""});this.model.allowVirtualScrolling==!0&&this.model.virtualScrollMode=="normal"?(this._getLiHeight(),totalHeight=this._totalCount*this._liItemHeight,this.element.height(totalHeight)):this.model.allowVirtualScrolling==!0&&this.model.virtualScrollMode=="continuous"&&this.element.css("height","auto");this.listContainer.ejScroller({height:this.listContainer.height(),width:0,scrollerSize:20,scroll:function(n){r._onScroll(n)}});this.scrollerObj=this.listContainer.ejScroller("instance");this._setDimensions();this.listContainer.css({display:"none",visibility:"visible"});this._checkboxHideShow(this.model.showCheckbox)._checkitems()._showResult()},_wordWrapItems:function(){this.model.enableWordWrap?this.listContainer.addClass("e-wrap").removeClass("e-nowrap"):this.listContainer.addClass("e-nowrap").removeClass("e-wrap")},_loadInitialData:function(n,t){var r=n.clone();if(this.realUllength=0,r=ej.DataManager&&this.dataSource()instanceof ej.DataManager?r.range(0,parseInt(this.listContainer.height()/this.listitemheight)):r.range(0,this.listitems.length),groupedList=t,this.mergeValue!=groupedList&&this.mergeValue!=undefined&&this.model.virtualScrollMode=="continuous"){for(this.mergeUl=[],i=0;i<this.mergeValue.length;i++)this.mergeUl.push(ej.buildTag("li",this.mergeValue[i][this.model.fields.text],null,this._itemStyle())[0]);this.element.append(this.mergeUl)}(!this.mergeValue||this.mergeValue&&this._loadInitialRemoteData)&&this._loadlist(groupedList)},_loadlist:function(n){var f,y,t,i,e,r,u;if(this._dummyVirtualUl=[],this.element!=null){for(f=[],this.model.sortOrder.toLowerCase()!="none"&&(y=ej.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),n=ej.DataManager(n).executeLocal(y)),t=0;t<n.length;t++){var p=this._getField(n[t],this.mapFld._id),s=this._getField(n[t],this.mapFld._imageUrl),h=this._getField(n[t],this.mapFld._imageAttributes),c=this._getField(n[t],this.mapFld._spriteCSS),o=this._getField(n[t],this.mapFld._text),l=this._getField(n[t],this.mapFld._value),a=this._getField(n[t],this.mapFld._htmlAttributes),b=this._getField(n[t],this.mapFld._selectBy),k=this._getField(n[t],this.mapFld._checkBy),v=this._getField(n[t],this.mapFld._tooltipText),w=this.model.virtualScrollMode=="continuous"&&this.mergeValue?this.realUllength+this.mergeValue.length:this.realUllength;i=l&&l!=""?ej.buildTag("li","","",$.extend(this._itemStyle(),{value:l})):ej.buildTag("li",null,null,this._itemStyle());p&&i.attr("id",p);s&&s!=""&&(imgtag=ej.buildTag("img.e-align","",{},{src:s,alt:o}),h&&h!=""&&imgtag.attr(h),i.append(imgtag));c&&c!=""&&(divtag=ej.buildTag("div.e-align "+c+" sprite-image"),i.append(divtag));o&&o!=""&&(this.model.template?i.append(this._getTemplatedString(n[t])):i.append(o));a&&a!=""&&i.attr(a);v&&v!=""&&i.attr("data-content",v).addClass("e-tooltip");(k||this.model.checkAll)&&i.addClass("checkItem");(b||this.model.selectAll)&&i.addClass("selectItem");this.model.allowVirtualScrolling&&this.model.virtualScrollMode=="normal"?($(i[0]).attr("data-ej-page",0),$(this.dummyUl[w]).replaceWith(i[0]),this._dummyVirtualUl.push(i[0])):this.dummyUl.push(i[0]);this.realUllength+=1}if(this.model.allowVirtualScrolling||this.element.children().remove(),this.element.children()[w]==null&&(!this.model.allowVirtualScrolling||this.model.virtualScrollMode==ej.VirtualScrollMode.Continuous)&&this._loadContent&&this.element.append(this.dummyUl),e=this.element.find("li:not('.e-ghead')"),this.listItemsElement=this.element.find("li:not('.e-ghead')"),this.model.showCheckbox&&this.model.checkedIndices)for(r=0;r<e.length;r++)this.model.checkedIndices.indexOf(r)!=-1&&$(e[r]).addClass("checkItem");else if(!this.model.showCheckbox)for(this.value()==""||this.mapCateg||!this.mapCateg==""||this.selectItemByText(this.value()),r=0;r<e.length;r++)(this.model.selectedIndices.indexOf(r)!=-1||this.model.selectedIndex==r)&&$(e[r]).addClass("selectItem");this.element.find(".selectItem").each(function(n,t){f.push($(t).parent().find("li").index($(t)))});u=this;u.model.showCheckbox||this.mapCateg||!this.mapCateg==""||u._selectListItems();this.element.find(".checkItem").each(function(n,t){u.model.checkedIndices.push(u._elementIndex(t))});this.mapCateg||!this.mapCateg==""||(f.length&&(this.model.allowMultiSelection?this.model.selectedIndices=f:this.model.selectedIndex=f[0]),this.model.checkedIndices?this.model.checkedIndices=$.grep(u.model.checkedIndices,function(n,t){return t==$.inArray(n,u.model.checkedIndices)}):this.model.selectedIndices&&(this.model.selectedIndices=$.grep(u.model.selectedIndices,function(n,t){return t==$.inArray(n,u.model.selectedIndices)})));this._loadContent=!0}return this},_applySelection:function(){if(!(this.model.fields.checkBy||this.model.fields.selectBy))return!1;this.model.showCheckbox?(this.uncheckAll(),this.checkItemsByIndices(this.model.checkedIndices)):this.model.allowMultiSelection?this.selectItemsByIndices(this.model.selectedIndices):(this.unselectAll(),this.selectItemByIndex(this.model.selectedIndex))},_getField:function(n,t){return ej.pvt.getObject(t,n)},_getTemplatedString:function(n){for(var t=this.model.template,i=t.indexOf("${"),r=t.indexOf("}"),u,f;i!=-1&&r!=-1;)u=t.substring(i,r+1),f=u.replace("${","").replace("}",""),t=t.replace(u,this._getField(n,f)),i=t.indexOf("${"),r=t.indexOf("}");return t},_checkboxHideShow:function(n){return this.model.showCheckbox=n,n?this._createCheckbox():this._removeCheckbox(),this},_createCheckbox:function(){var n,r,u=this,t,i;for(this._listitems=this.listContainer.find("ol,ul").length>0?this.listContainer.find("ol,ul").children("li:not('.e-ghead')"):this.element.children("li:not('.e-ghead')"),r=this._listitems.find("input[type=checkbox]"),n=0;n<this._listitems.length;n++)$(this._listitems[n]).text()!=""&&($checkbox=ej.buildTag("input.listcheckbox e-align#popuplist"+n+"_"+this._id,"",{},{type:"checkbox",name:"list"+n}),$(this._listitems[n]).find("input[type=checkbox]").length||$(this._listitems[n]).prepend($checkbox));for(this.listContainer.find(".listcheckbox").ejCheckBox({cssClass:this.model.cssClass,change:$.proxy(this._onClickCheckList,this)}),n=0;n<this._listitems.length;n++)t=$(this._listitems[n]).find(".listcheckbox"),$(this._listitems[n]).hasClass("e-disable")?t.ejCheckBox("disable"):$(this._listitems[n]).hasClass("checkItem")&&!t.ejCheckBox("isChecked")&&(t.ejCheckBox({checked:!0}),this._activeItem=n,this.checkedStatus=!0,i=this._getItemObject($(this._listitems[n]),null),i.isInteraction=!0,this._initValue||this._trigger("checkChange",i),$(this._listitems[n]).removeClass("checkItem"));for(n=0;n<this.model.selectedIndices.length;n++)this.checkItemsByIndices(this.model.selectedIndices)},_removeCheckbox:function(){var n,t;if(this.listitem=this.listContainer.find("ol,ul").children("li"),t=this.listitem.find(".listcheckbox"),t.length>0){if(this.listitem.find(".listcheckbox").ejCheckBox("destroy"),this.listitem.find("input[type=checkbox]").remove(),this.model.allowMultiSelection)for(n=0;n<this.model.checkedIndices.length;n++)this.selectItemsByIndices(this.model.checkedIndices);else this.selectItemByIndex(this.model.checkedIndices[0]);this._checkedItems=this.model.checkedIndices=[]}},_selectCheckedItem:function(n){if(n.length>0)for(i=0;i<n.length;i++)this._selectedItems.push(n[i])},_refreshScroller:function(){if(this.model.virtualScrollMode=="continuous")this.listContainer.css({display:"block"}),this.scrollerObj&&(this.scrollerObj.model.height=this.listContainer.height(),this.scrollerObj.refresh());else{this.listContainer.find(".e-vhandle div").removeAttr("style");var n=this.listBoxScroller.height();this.listContainer.css({display:"block"});this.scrollerObj&&(this.scrollerObj.model.height=this.listContainer.css("height"),this.scrollerObj.refresh());this.listBoxScroller.css("height","100%")}this.model.enabled||this.scrollerObj&&this.scrollerObj.disable();this.listContainer.css("height",this.model.height)},_setDimensions:function(){return this.listContainer.css({width:this.model.width,height:this.model.height}),this._refreshScroller(),this},_setItemsCount:function(){return this.model.height=="auto"?this.model.height=this.model.itemsCount&&this.model.itemsCount!=0&&this.model.height=="auto"?this.model.itemsCount*30:this.model.height=="auto"?"220":this.model.height:this.model.height!="auto"&&this.model.itemsCount?this.model.height=this.model.itemHeight?this.model.height=="auto"?"220":this.model.itemsCount*this.model.itemHeight.replace(/[^-\d\.]/g,""):this.model.height=="auto"?"220":this.model.itemsCount*30:this.model.height!="auto"&&this.model.itemsCount!=0&&this.model.height,this},_setTotalItemsCount:function(){this.model.virtualScrollMode!="continuous"&&(this.element.height(this.element.find("li").outerHeight()*this.model.totalItemsCount),this.scrollerObj.refresh())},_refreshContainer:function(){this.listContainer.css({position:"relative"});this._setDimensions()._roundedCorner()._refreshScroller()},_drag:function(){var n=this,i=!1,t=null;this._listitem=this.element.parent();this._lilist=this._addItemIndex?$($(this._listitem).find("li")[this._addItemIndex]):$(this._listitem).find("li");this._lilist.not(".e-js").ejDraggable({dragArea:null,clone:!0,dragStart:function(i){var u,r;if(n.model.allowDrag||n.model.allowDragAndDrop){if($(i.element.closest(".e-ddl-popup.e-js")).hasClass("e-disable")||i.element.hasClass("e-disable"))return t&&t.remove(),!1;if(u=$("#"+this.element.parent()[0].id).data("ejListBox"),u._refreshItems(),r=n.getSelectedItems(),r.length>1?n._onDragStarts(r,i.target):n._onDragStarts([n._getItemObject(i.element,i)],i.target))return i.cancel=!0,t&&t.remove(),!1}else return!1},drag:function(t){var i=t.target,r=n.getSelectedItems();if(r.length>1?n._onDrag(r,i):n._onDrag([n._getItemObject(t.element,t)],i))return!1;($(i).hasClass("e-droppable")||$(i).parent().hasClass("e-droppable"))&&$(i).addClass("allowDrop")},dragStop:function(r){if(r.element.dropped||t&&t.remove(),!$(r.target).closest(".e-js.e-widget").hasClass("e-disable")){var u=r.target,e=n,o=i?"Before":"After",f=n.getSelectedItems();if((f.length>1?n._onDragStop(f,u):n._onDragStop([n._getItemObject(r.element,r)],u))||($(r.element).removeClass("e-active"),u.nodeName=="UL"&&(u=$(u)[0]),$(u).closest("li").length?u=$(r.target).closest("li")[0]:u.nodeName!="LI"&&(u=$(u).closest(".e-ddl-popup.e-droppable")[0]),u&&u.nodeName=="LI"&&$(u).hasClass("e-droppable")&&$(u).closest(".e-ddl-popup.e-droppable").length?n._dropItem(u,r.element,i,r.event):$(u).hasClass("e-droppable")&&$(u).closest(".e-ddl-popup.e-droppable").length&&n._dropItemContainer(u,r.element,r.event),$(".allowDrop").removeClass("allowDrop"),r.target!=n.element[0]&&r.element.parent().length&&$(r.element.parent()[0]).data().ejWidgets[0]=="ejListBox"&&(n=$("#"+r.element.parent()[0].id).data($(r.element.parent()[0]).data().ejWidgets[0]),f.length>1?n._onDropped(f,u):n._onDropped([n._getItemObject(r.element),r],r.target))))return!1}n.model.allowDrag||n.model.allowDragAndDrop||n.element.children().removeClass("e-draggable")},helper:function(i){if(!ej.isNullOrUndefined(i.element)&&!$(i.element.closest(".e-ddl-popup.e-js")).hasClass("e-disable")&&$(i.element).hasClass("e-draggable")&&(n=$(i.element).closest(".e-listbox.e-js").data("ejListBox"),n._tempTarget=$(i.element).text(),(n.model.allowDrag||n.model.allowDragAndDrop)&&n))return t=$(i.sender.target).clone().addClass("dragClone e-dragClonelist"),t.addClass(n.model.cssClass+(n.model.enableRTL?" e-rtl":"")),t.css({width:n.element.width(),padding:"5px 5px 5px 0.857em","list-style":"none","text-align":n.model.enableRTL?"right":"left",opacity:"1"}),t.appendTo($("body"))}})},_dropItem:function(n,t,i,r){var e,s;t.addClass("e-droppable");var h=$(n).closest(".e-ddl-popup.e-droppable")[0].id.replace("_container",""),o=[],u=[],f=$("#"+h).data("ejListBox"),c=f.model.showCheckbox?!this.model.showCheckbox:this.model.showCheckbox;c||(e=this._getDropObject(n,t,r),o=e.dataIndex,u=e.dataObj,i?$(this.li).insertBefore(n):$(this.li).insertAfter(n),this._refreshItems(),s=$(this.li.parent()[0]).find("li:not('.e-ghead')"),u&&this.dataSource()&&this._dropDataSource(f,o,u,s.index(this.li)),f._refreshItems())},_dropItemContainer:function(n,t,i){t.addClass("e-droppable");var o=$(n)[0].id.replace("_container",""),r=$("#"+o).data("ejListBox"),s=r.model.showCheckbox?!this.model.showCheckbox:this.model.showCheckbox;if(!s){var f=[],u=[],e=this._getDropObject(n,t,i);f=e.dataIndex;u=e.dataObj;this.li.insertAfter($($(n).find("li")).last());$(n).find("ul").length>0?$(n).find("ul").append(this.li):$(n).find("ej-listbox").append(this.li);this._refreshItems();u&&this.dataSource()&&this._dropDataSource(r,f,u,r.dataSource()?r.dataSource().length:0);r.model.allowDrag||$(this.li).ejDraggable("instance")._destroy();r._refreshItems()}},_dropDataSource:function(n,t,i,r){var f=ej.DataManager&&this.dataSource()instanceof ej.DataManager,u;f||(t instanceof Array?(u=this,$.each(i,function(n){var t=u.dataSource().indexOf(i[n]);u.dataSource().splice(t,1)})):this.dataSource().splice(t,1),n.dataSource()instanceof Array?n.dataSource().splice.apply(n.dataSource(),[r,0].concat(i)):n.dataSource(i))},_getDropObject:function(n,t){var r=[],u=[],i,f;return this.model.allowMultiSelection?(this.li=$(t).parent().find(".e-select").removeClass("e-select e-hover"),this.li.length||(this.li=t.removeClass("e-select e-hover"))):this.li=t.removeClass("e-select e-hover"),this.li.length?(i=this,f=this.model.sortOrder.toLowerCase(),$.each(this.li,function(){var n=$(this.parentElement).find("li:not('.e-ghead')"),t;r.push(n.index(this));f!="none"?(t=ej.Query().sortBy(f,!0),dataAfterSort=ej.DataManager(i.dataSource()).executeLocal(t),u.push(i.dataSource()?dataAfterSort[n.index(this)]:null)):u.push(i.dataSource()?i.dataSource()[n.index(this)]:null)})):(r=this.li.index(),u=this.dataSource()?this.dataSource()[r]:null),{dataIndex:r,dataObj:u}},_showResult:function(){var t=this,n;this._refreshContainer();this.element.attr({"aria-expanded":!0});n=this.element.children("li:not('.e-ghead')");this._listSize=n.length;this._ListEventUnbind(n);n.on("touchstart mouseenter",$.proxy(this._OnMouseEnter,this));n.on("touchend mouseleave",$.proxy(this._OnMouseLeave,this));n.on("click",$.proxy(this._OnMouseClick,this));n.on("contextmenu",$.proxy(this._OnMouseContext,this));return t.model.showCheckbox&&t.element.find(".listcheckbox").ejCheckBox({enabled:t.model.enabled}),this},_OnWindowResize:function(){this._refreshContainer();this.listContainer.css("display","block")},refresh:function(){ej.isNullOrUndefined(this.model.query)||(this._savedQueries=this.model.query);this.model.dataSource?(this.model.template&&this.element.empty(),this._checkModelDataBinding(this.dataSource())):(this.listContainer.css({height:this.model.height,width:this.model.width}),this._refreshScroller())},_removeListHover:function(){return this._selectedItems=[],this.model.selectedIndices=[],this.model.selectedIndex=null,this.element.children("li").removeClass("e-hover e-select selectItem"),this},_addListHover:function(){this._activeItem=this._selectedItem;var n=this._getItem(this._selectedItem);n.addClass("e-select e-hover");this.scrollerObj.setModel({scrollTop:this._calcScrollTop()});n.focus();this._OnListSelect(this.prevselectedItem,this._selectedItem)},_calcScrollTop:function(n){for(var f=this.element.outerHeight(),r=this.element.find("li"),u=0,i=n?n:this.element.find("li.e-select").index(),t=0;t<i;t++)u+=r.eq(t).outerHeight();return u-(this.listContainer.outerHeight()-r.eq(i).outerHeight())/2},_refreshItems:function(){this.listBoxScroller.append(this.element);this.listContainer.append(this.listBoxScroller);this._refreshContainer();this._showResult();this._setSelectionValues();this._setDisableValues()},_selectedIndices:function(){var n;return this.element.children("li:not('.e-ghead')").each(function(t){if($(this).hasClass("e-select"))return n=t,!1}),this._selectedItem=n,n},_addSelectedItem:function(n){(!Array.isArray(this.model.disableItemsByIndex)&&this.model.disableItemsByIndex!=null||Array.isArray(this.model.disableItemsByIndex)&&this.model.disableItemsByIndex.length>0)&&(n.keyCode==40||n.keyCode==39?this._disableItemSelectDown():this._disableItemSelectUp(),this._selectedItem=this._activeItem);var t=this._getItem(this._selectedItem);this._selectedItems.push(t)},_getItem:function(n){return $(this.element.children("li:not('.e-ghead')")[n])},_getItemObject:function(n,t){var i=this._elementIndex(n);return{item:n,index:i,text:n.text(),value:n.attr("value")?n.attr("value"):n.text(),isEnabled:!n.hasClass("e-disable"),isSelected:n.hasClass("e-select"),isChecked:n.find(".e-chk-image").hasClass("e-checkmark"),data:this.dataSource()?this.getListData()[i]:null,event:t?t:null}},_roundedCorner:function(){return this.listContainer[this.model.showRoundedCorner?"addClass":"removeClass"]("e-corner-all"),this},_enabled:function(n){return n?this.enable():this.disable(),this},_showFullList:function(){return this.dataSource()!=null&&(ej.DataManager&&this.dataSource()instanceof ej.DataManager||(this.listitems=this.dataSource()),!this._savedQueries.queries.length||ej.DataManager&&this.dataSource()instanceof ej.DataManager||(this.listitems=ej.DataManager(this.dataSource()).executeLocal(this._savedQueries))),this._renderlistContainer(),this.dataSource()instanceof ej.DataManager||this._trigger("actionComplete"),this._addDragableClass()._enableDragDrop(),this._disabledItems=[],this.disableItemsByIndices(this.model.disableItemsByIndex),this.model.selectedIndex==0?this.selectItemByIndex(this.model.selectedIndex):this.model.selectedIndex&&this.selectItemByIndex(this.model.selectedIndex),this.selectItemsByIndices(this.model.selectedIndices),this.checkItemsByIndices(this.model.checkedIndices),this._tooltipList(),this},_tooltipList:function(){this.listContainer.find("li").hasClass("e-tooltip")&&$(this.listContainer).ejTooltip({target:".e-tooltip",isBalloon:!1,position:{target:{horizontal:"center",vertical:"bottom"},stem:{horizontal:"left",vertical:"top"}}})},_cascadeAction:function(){if(this.model.cascadeTo){this._currentValue=this._getField(this.listitems[this._activeItem],this.mapFld._value);this.selectDropObj=$("#"+this.model.cascadeTo).ejListBox("instance");$.extend(!0,this.selectDropObj,{_isCasCadeTarget:!0});ej.isNullOrUndefined(this._dSource)&&(this._dSource=this.selectDropObj.dataSource());this._performJsonDataInit();var n={cascadeModel:this.selectDropObj.model,cascadeValue:this._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",n);this.selectDropObj._setCascadeModel=n.setCascadeModel}},_performJsonDataInit:function(){this._changedSource=ej.DataManager(this._dSource).executeLocal(ej.Query().where(this.mapFld._value,"==",this._currentValue));this.selectDropObj.setModel({dataSource:this._changedSource,enable:!0,value:"",selectedIndex:-1})},_OnMouseContext:function(n){return n.preventDefault(),!1},_OnMouseEnter:function(n){var t,i,r;this.startime=0;this.item="";n.type=="touchstart"&&(this.item=$(n.target).text(),this.startime=(new Date).getTime());this.model.enabled&&(this.element.children("li").removeClass("e-hover"),$(n.target).is("li")&&$(n.target).addClass("e-hover"),$(n.target).hasClass("e-disable")?$(n.target).removeClass("e-hover"):n.target.tagName!="li"&&(t=$(n.target).parents("li"),$(t).addClass("e-hover")),r=0,this.element.children("li:not('.e-ghead')").each(function(n){if($(this).hasClass("e-hover"))return i=n,!1}),this._hoverItem=i)},_OnMouseLeave:function(n){this.element.children("li").removeClass("e-hover");this.endtime=(new Date).getTime();(this.endtime-this.startime)/200>2&&this.item==$(n.target).text()&&(this.hold=(this.endtime-this.startime)/200>2?!this.hold:!1)},_OnMouseClick:function(n){var u,t,f,e,r,i,s,o;if($(n.currentTarget).hasClass("e-disable"))return!1;if(n.which==3&&(this.hold=!0),this.endtime=(new Date).getTime(),(this.endtime-this.startime)/200>2&&(this.model.template||this.item!=$(n.target).text()||this.hold||(this.hold=(this.endtime-this.startime)/200>2)),n.shiftKey&&this._shiftkey&&(this._shiftkey=!1,this.prevselectedItem=this._activeItem),ej.isNullOrUndefined(this._hoverItem)||(this._activeItem=this._hoverItem),this.model.enabled&&this._activeItem!=undefined){if((!n.shiftKey||isNaN(this.prevselectedItem))&&(this._shiftkey=!0,this.prevselectedItem=this._lastEleSelect?this._lastEleSelect:this._activeItem),(isNaN(this._lastEleSelect)||this._lastEleSelect!=this._activeItem)&&(u=this._getItemObject($(this.element.find("li:not('.e-ghead')")[this.prevselectedItem]),n),u.isInteraction=!0,this._trigger("change",u)),this.model.showCheckbox){if($(n.currentTarget).is("li")&&$(n.target).is("li"))$(n.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("isChecked")?($(n.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("option","checked",!1),i=this.model.checkedIndices.indexOf($(n.currentTarget).index()),this._checkedItems.splice(i,1),this.model.checkedIndices.splice(i,1),this.checkedStatus=!1):($(n.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("option","checked",!0),this._checkedItems.push(this._activeItem),this.model.checkedIndices.push(this._elementIndex(n.currentTarget)),this.checkedStatus=!0);else if($(n.currentTarget).is("li")&&$(n.target).is("span"))$(n.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("isChecked")?(this._checkedItems.push(this._activeItem),this.model.checkedIndices.push($(n.currentTarget).index()),this.checkedStatus=!0):(i=this.model.checkedIndices.indexOf($(n.currentTarget).index()),this._checkedItems.splice(i,1),this.model.checkedIndices.splice(i,1),this.checkedStatus=!1);else return!1;this.selectedTextValue=$(n.currentTarget).text();!this.element.hasClass("e-disable")&&$(n.target).is("li")&&(s={status:this.model.enabled,isChecked:this.checkedStatus,selectedTextValue:this.selectedTextValue},o=this._getItemObject($(n.target),n),o.isInteraction=!0,this._trigger("checkChange",o));this._lastEleSelect=$(n.currentTarget).index()}else t=$(this.element.children("li:not('.e-ghead')")[this._hoverItem]),this.model.allowMultiSelection&&(n.ctrlKey||this.touchhold||this.hold||n.shiftKey)||this._removeListHover(),this.element.children("li").removeClass("e-hover"),!t.hasClass("e-select")||n.shiftKey&&this.model.allowMultiSelection?(t.addClass("e-select"),this._selectedItems.push(t),this.model.selectedIndices.push(this._activeItem),n.shiftKey&&this.model.allowMultiSelection&&(n.ctrlKey||this._removeListHover(),this.prevselectedItem<this._activeItem?(f=this.prevselectedItem,e=this._activeItem):(f=this._activeItem,e=this.prevselectedItem),this._activeItemLoop(f,e))):(t.removeClass("e-select"),this._selectedItems.splice(this.model.selectedIndices.indexOf(this._activeItem),1),this.model.selectedIndices.splice(this.model.selectedIndices.indexOf(this._activeItem),1)),this._selectedItem=this._selectedIndices(),this.model.selectedIndex=this._activeItem,this._cascadeAction(),r=$(this.element.children("li:not('.e-ghead')")[this._selectedItem]),$(r).text()!=""&&(this.element.val($(r).text()),this.element.attr({value:this.element.val()})),this.model.selectedText=t.text(),this._selectedData=this._getItemObject($(r),n),this._selectedData.isInteraction=!0,this._prevSelectedData&&this._selectedData.text!=this._prevSelectedData.text&&this._trigger("unselect",this._prevSelectedData),this._trigger("select",this._selectedData),this._prevSelectedData=this._selectedData,this._lastEleSelect=this._activeItem,this._selectedItems&&this._selectedItems.length!=1&&(this._ctrlClick=!0);n.ctrlKey||n.shiftKey?n.shiftKey?(this._shiftSelectItem=this._activeItem,this._ctrlSelectItem=null):(this._ctrlSelectItem=this._activeItem,this._shiftSelectItem=null):(this._shiftSelectItem=null,this._ctrlSelectItem=null);this._setSelectionValues()._OnListSelect(this.prevselectedItem,this._activeItem)}n.target.nodeName!="INPUT"&&this.listContainer.focus();this._pageUpStep=this._pageDownStep=null},_activeItemLoop:function(n,t){var r,i;for(this.model.showCheckbox&&(r=this.listContainer.find("li:not(.e-disable)"),r.find(".listcheckbox").ejCheckBox("option","checked",!1),this._checkedItems=[],this.model.checkedIndices=[]),i=n;i<=t;i++)this.model.showCheckbox&&!this.listContainer.find("li").eq(i).hasClass("e-disable")?(this.element.find(".listcheckbox").eq(i).ejCheckBox("option","checked",!0),this._checkedItems.push(i),this.model.checkedIndices.push(i),this.checkedStatus=!0):(activeitem=$(this.element.children("li:not('.e-ghead')")[i]),activeitem.hasClass("e-disable")||(activeitem.hasClass("e-select")||activeitem.addClass("e-select"),this._selectedItems.push(activeitem),this.model.selectedIndices.push(i)))},_setSelectionValues:function(){var i=[],r=this.model.selectedIndices,u=this.model.checkedIndices,t,f,n;if(this.model.selectedIndices=[],this.model.checkedIndices=[],t=this,this.model.showCheckbox?this.element.find("li:not('.e-ghead') .listcheckbox:checked").closest("li").each(function(n,r){i.push($(r).attr("value")?$(r).attr("value"):!ej.isNullOrUndefined(t.model.fields.text)&&t.dataSource()?t.getListData()[t._elementIndex(r)][t.model.fields.text]:$(r).text());t.model.checkedIndices.push(t._elementIndex(r))}):(!ej.isNullOrUndefined(this._activeItem)&&this._activeItem>=0&&(this.model.selectedIndex=this._activeItem),f=this.element.children("li:not('.e-ghead')"),this.element.children("li:not('.e-ghead').e-select").each(function(n,r){i.push($(r).attr("value")?$(r).attr("value"):!ej.isNullOrUndefined(t.model.fields.text)&&t.dataSource()?t.getListData()[t._elementIndex(r)][t.model.fields.text]:$(r).text());t.model.selectedIndices.push(f.index(r))})),ej.DataManager&&ej.DataManager&&this.dataSource()instanceof ej.DataManager&&this.model.allowVirtualScrolling)if(this.model.showCheckbox)for(n=0;n<u.length;n++)this.model.checkedIndices.indexOf(u[n])==-1&&this.model.checkedIndices.push(u[n]);else for(n=0;n<r.length;n++)this.model.selectedIndices.indexOf(r[n])==-1&&this.model.selectedIndices.push(r[n]);if(this.model.selectedItemIndex=this.model.selectedIndex,this.model.selectedItems=this.model.selectedItemlist=this.model.selectedIndices,this.model.checkedItems=this.model.checkedItemlist=this.model.checkItemsByIndex=this.model.checkedIndices,this.model.text="",this.model.showCheckbox)for(n=0;n<this.getCheckedItems().length;n++)this.model.text+=this.getCheckedItems()[n].text+",";else for(n=0;n<this.getSelectedItems().length;n++)this.model.text+=this.getSelectedItems()[n].text+",";return this.value(i.toString()),this._hiddenInput.val(this.value()),this},_setDisableValues:function(){var t,n;for(this._disabledItems=[],this.model.disableItemsByIndex=[],t=this.element.children().length,n=0;n<t;n++)$(this.element.children()[n]).hasClass("e-disable")&&this.model.disableItemsByIndex.push(n);this.disableItemsByIndices(this.model.disableItemsByIndex)},_onClickCheckList:function(n){if(n.isChecked||$("#"+n.model.id).closest("li").removeClass("checkItem"),n.isInteraction&&(this.checkedStatus=n.isChecked?!0:!1,!this._initValue)){this.checkedStatus?this.model.checkedIndices.push($(n.event.target).closest('li:not(".e-ghead")').index()):this.model.checkedIndices.splice($.inArray($(n.event.target).closest('li:not(".e-ghead")').index(),this.model.checkedIndices),1);var t=this._getItemObject($(n.event.target).closest("li"),n);t.isInteraction=!0;this._trigger("checkChange",t)}},_elementIndex:function(n){return $(n).parent().children("li:not('.e-ghead')").index(n)},_disableItemSelectCommon:function(){this.listitems=this.element.find("li");this._activeItem=this.listitems.index(this.element.find(".e-select"))},_disableItemSelectUp:function(){var n,t;for(this._disableItemSelectCommon(),n=typeof this.model.disableItemsByIndex!="object"?this.model.disableItemsByIndex.split(",").sort().reverse():this.model.disableItemsByIndex,this._activeItem==0?this._activeItem=this.listitems.length-1:this._activeItem--,t=0;$.inArray(this._activeItem.toString(),n.toString())>-1;t++)this._activeItem--,this._activeItem<0&&(this._activeItem=this.listitems.length-1);$(this.element.children("li")[this._activeItem]).addClass("e-select")},_disableItemSelectDown:function(){var n,t;for(this._disableItemSelectCommon(),n=typeof this.model.disableItemsByIndex!="object"?this.model.disableItemsByIndex.split(",").sort():this.model.disableItemsByIndex,this.listitems.length-1==this._activeItem?this._activeItem=0:this._activeItem++,t=0;$.inArray(this._activeItem.toString(),n.toString())>-1;t++)this._activeItem++,this.listitems.length==this._activeItem&&(this._activeItem=0);$(this.element.children("li")[this._activeItem]).addClass("e-select")},_checkitems:function(){var t,n;if(this.model.showCheckbox)for(t=this.element.find("li:not('.e-ghead')"),i=0;i<this.model.checkedIndices.length;i++)n=this.model.checkedIndices[i],$(t[n]).find(".listcheckbox").ejCheckBox("option","checked",!0),this._checkedItems.push(t[n]);else if(this.model.allowMultiSelection)for(i=0;i<this.model.selectedIndices.length;i++)n=this.model.selectedIndices[i],$(this.listitem[n]).hasClass("e-select")||($(this.listitem[n]).addClass("e-select"),this._selectedItems.push($(this.listitem[n])));else $(this.listitem[this.model.selectedIndex]).hasClass("e-select")||$(this.listitem[this.model.selectedIndex]).addClass("e-select"),this._selectedItems.push($(this.listitem[this.model.selectedIndex]));return this._setSelectionValues(),this},_onlistselection:function(n,t,i){if(n!=t){var r=this._getItemObject($(this.element.find("li:not('.e-ghead')")[t]),i);r.isInteraction=!0;this._trigger("change",r)}},_OnListSelect:function(n,t,i){if(!ej.isNullOrUndefined(n)&&n!=t&&!this.model.showCheckbox){var r=this._getItemObject($(this.element.find("li:not('.e-ghead')")[t]),i);r.isInteraction=!0;this._trigger("change",r)}},_OnKeyDown:function(n){var r,l,s,h,c,e,i,f,o,u,t;if(this.model.enabled){this._selectedItems&&this._selectedItems.length==1&&!this.model.showCheckbox&&(this._lastEleSelect=$(this.element.children("li.e-select")).index());this._itemId=null;r=this.element.children("li:not('.e-ghead')");l=this;h=this.listContainer.height();s=r.outerHeight();c=Math.round(h/s)!=0?Math.floor(h/s):7;this._listSize=this.element.children("li").length;n.shiftKey||(this._up=this._down);n.keyCode!=33&&n.keyCode!=34&&(this._pageUpStep=this._pageDownStep=null);switch(n.keyCode){case 37:case 38:if(e=this.listItemsElement,i=this._shiftSelectItem?this._shiftSelectItem:this._ctrlSelectItem?this._ctrlSelectItem:this.model.showCheckbox?this._lastEleSelect||0:e.index(this.element.find("li.e-select")),n.shiftKey&&this.model.allowMultiSelection&&!this.model.showCheckbox){if(this._lastEleSelect==0)return!1;for(this._lastEleSelect=this._ctrlClick?this._lastEleSelect-1:this._lastEleSelect,i=this._lastEleSelect,this._selectedItem=i||i==0?i==0?this._listSize-1:this._down?i:i-1:0,t=this._selectedItem;$(r[t]).hasClass("e-disable");t--)this._selectedItem-=1;if($(r[this._selectedItem]).hasClass("e-select")&&this.element.find("li.e-select").length==1&&(this._selectedItem-=1),f=$(r[this._selectedItem]),f.hasClass("e-select")){if(this._selectedItem==0)return;f.removeClass("e-select");this._selectedItems.pop()}else f.addClass("e-select"),this._selectedItems.push(f);this.scrollerObj.setModel({scrollTop:this._calcScrollTop(this._selectedItem)});this._up=!0;this._down=!1;this._ctrlClick=!1}else{for(this._selectedItem=i||i==0?i==0?this._listSize-1:i-1:0,t=this._selectedItem;$(r[t]).hasClass("e-disable");t--)this._selectedItem-=1;this._selectedItem==-1&&(this._selectedItem=this._listSize-1);this._addSelectedItem(n);$(r).removeClass("e-hover e-select");o=this.model.showCheckbox?"e-hover":"e-select";$(r[this._selectedItem]).addClass(o);this.scrollerObj.setModel({scrollTop:this._calcScrollTop(this._selectedItem)})}return this._activeItem=this.prevselectedItem=this._selectedItem,this._OnListSelect(this._selectedItem+1,this._selectedItem,n),this._lastEleSelect=this._selectedItem,this._keyCascade(r[this._selectedItem]),this._setSelectionValues(),this._shiftSelectItem=this._ctrlSelectItem=null,n.preventDefault(),!1;case 39:case 40:if(e=this.listItemsElement,i=this._shiftSelectItem?this._shiftSelectItem:this._ctrlSelectItem?this._ctrlSelectItem:this.model.showCheckbox?this._lastEleSelect||0:e.index(this.element.find("li.e-select")),n.shiftKey&&this.model.allowMultiSelection&&!this.model.showCheckbox){if(this._lastEleSelect==this._listSize-1)return!1;for(this._lastEleSelect=this._ctrlClick?this._lastEleSelect+1:this._lastEleSelect,i=this._lastEleSelect,this._selectedItem=i||i==0?i==this._listSize-1?0:this._up||this._ctrlClick?i:i+1:0,t=this._selectedItem;$(r[t]).hasClass("e-disable");t++)this._selectedItem+=1;$(r[this._selectedItem]).hasClass("e-select")&&this.element.find("li.e-select").length==1&&(this._selectedItem+=1);f=$(r[this._selectedItem]);f.hasClass("e-select")?(f.removeClass("e-select"),this._selectedItems.pop()):(f.addClass("e-select"),this._selectedItems.push(f));this.scrollerObj.setModel({scrollTop:this._calcScrollTop(this._selectedItem)});this._up=!1;this._down=!0;this._ctrlClick=!1}else{for(this._selectedItem=i||i==0?i==this._listSize-1?0:i+1:0,t=this._selectedItem;$(r[t]).hasClass("e-disable");t++)this._selectedItem+=1;this._selectedItem==this._listSize&&(this._selectedItem=0);this._addSelectedItem(n);$(r).removeClass("e-hover e-select");o=this.model.showCheckbox?"e-hover":"e-select";$(r[this._selectedItem]).addClass(o);this.scrollerObj.setModel({scrollTop:this._calcScrollTop(this._selectedItem)});this.element.find("li").removeClass("selectItem");this.model.selectedIndices.length=0;this.model.selectedIndices.push(this._selectedItem)}return this._activeItem=this.prevselectedItem=this._selectedItem,this._OnListSelect(this._selectedItem-1,this._selectedItem),this._lastEleSelect=this._selectedItem,this._keyCascade(r[this._selectedItem]),this._setSelectionValues(),this._shiftSelectItem=this._ctrlSelectItem=null,!1;case 8:case 9:case 13:this.model.showCheckbox&&(this.model.checkedIndices.indexOf(this._selectedItem)<0?this.checkItemByIndex(this._selectedItem):this.uncheckItemByIndex(this._selectedItem));break;case 18:case 33:u=n.keyCode==33?c:1;n.shiftKey&&this.model.allowMultiSelection?(this._pageUpStep==null&&(this._pageUpStep=this.prevselectedItem),this._pageDownStep==null&&(this._pageDownStep=this.prevselectedItem),this._pageDownStep<=this.prevselectedItem?(start=this._pageUpStep-u>0?this._pageUpStep-u:0,end=this._pageDownStep):(start=this.prevselectedItem,end=this._pageDownStep-u>this.prevselectedItem?this._pageDownStep-u:this.prevselectedItem),this._shiftHomeAndEndKeyProcess(start,end,end>this.prevselectedItem?end:start),this._pageUpStep=start,this._pageDownStep=end):this._moveUp(this._activeItem,u);this.scrollerObj.setModel({scrollTop:this._calcScrollTop()});this._preventDefaultAction(n);break;case 34:u=n.keyCode==34?c:1;n.shiftKey&&this.model.allowMultiSelection?(this._pageUpStep==null&&(this._pageUpStep=this.prevselectedItem),this._pageDownStep==null&&(this._pageDownStep=this.prevselectedItem),this._pageUpStep==0&&this.prevselectedItem!=0?this._pageUpStep+u>=this.prevselectedItem?start=end=this.prevselectedItem:(start=this._pageUpStep+u,end=this._pageDownStep+u<this.element.children("li").length?this._pageDownStep+u:this.element.children("li").length-1):this._pageUpStep!=this.prevselectedItem&&this._pageUpStep+u>=this.prevselectedItem?start=end=this.prevselectedItem:(start=this._pageUpStep,end=this._pageDownStep+u<this.element.children("li").length?this._pageDownStep+u:this.element.children("li").length-1),start<this.prevselectedItem&&end>this.prevselectedItem&&(end=this.prevselectedItem),this._shiftHomeAndEndKeyProcess(start,end,start<this.prevselectedItem?start:end),this._pageUpStep=start,this._pageDownStep=end):this._moveDown(this._activeItem,u);this.scrollerObj.setModel({scrollTop:this._calcScrollTop()});this._preventDefaultAction(n);break;case 35:for(n.shiftKey&&this.model.allowMultiSelection?this._shiftHomeAndEndKeyProcess(this._activeItem,this._listSize-1,this._listSize-1):this._homeAndEndKeyProcess(n,r,this._listSize-1),t=this._listSize-1;t>0;t--)if(!$(this.element.find("li")[t]).hasClass("e-disable"))return this.model.selectedIndex=t,this._shiftSelectItem=t,this.model.allowVirtualScrolling==!0&&l._onScroll(n),!1;break;case 36:for(n.shiftKey&&this.model.allowMultiSelection?this._shiftHomeAndEndKeyProcess(0,this._activeItem,0):this._homeAndEndKeyProcess(n,r,0),t=0;t<this._listSize;t++)if(!$(this.element.find("li")[t]).hasClass("e-disable"))return this.model.selectedIndex=t,!1}}},_moveUp:function(n,t){n==null||n<=0?this._checkDisableStep(0,t,!1):n>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1):n>0&&n<=this._listSize-1&&this._checkDisableStep(n,t,!1)},_moveDown:function(n,t){n==null||n<0?this._checkDisableStep(-1,t,!0):n==0?this._checkDisableStep(0,t,!0):n>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0):n<this._listSize-1&&this._checkDisableStep(n,t,!0)},_checkDisableStep:function(n,t,i){var e=i?"_disableItemSelectDown":"_disableItemSelectUp",f=i?n+t:n-t,r=this[e](f),u;if(r==null)for(u=t;u>=0;u--)if(f=i?n+u:n-u,r=this[e](f),r!=null)break;r!=null&&this.selectItemByIndex(r)},_disableItemSelectDown:function(n){return(n==null||n<0)&&(n=0),n<this._listSize?$.inArray(n,this._disabledItems)<0?n:this._disableItemSelectDown(n+1):this._listSize-1},_disableItemSelectUp:function(n){if((n==null||n<0)&&(n=0),n<this._listSize){if($.inArray(n,this._disabledItems)<0)return n;if(n>0)return this._disableItemSelectUp(n-1)}},_preventDefaultAction:function(n,t){n.preventDefault?n.preventDefault():n.returnValue=!1;t&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},_homeAndEndKeyProcess:function(n,t,i){if($(":focus").length&&$(":focus")[0].nodeName!="INPUT")return this._OnListSelect(this._selectedItem,i),this.selectItemByIndex(i),this._selectedItem=i,this.scrollerObj.setModel({scrollTop:this._calcScrollTop(i)}),this.model.showCheckbox&&(this._removeListHover(),$(t[i]).addClass("e-hover"),this._lastEleSelect=this._selectedItem=i),this._keyCascade(t[i],n),n.preventDefault(),!1},_shiftHomeAndEndKeyProcess:function(n,t,i){return this._removeListHover(),this._activeItemLoop(n,t),this.scrollerObj.setModel({scrollTop:this._calcScrollTop(i)}),!1},_keyCascade:function(n,t){var i=this._getItemObject($(n),t);this.model.selectedText=i.text;i.isInteraction=!0;this._trigger("select",i);this.model.cascadeTo&&(this._activeItem=this._selectedItem,this._cascadeAction())},mergeData:function(n,t){var i,r;this.datamerged=!0;this.mergeUl=$();this._setMapFields();i=this;this._skipInitialRemoteData=t?t:!1;ej.DataManager&&n instanceof ej.DataManager?(r=n.executeQuery(this._getQuery()),r.done(function(n){i.mergeValue=n.result;i._renderlistContainer()})):(this.mergeValue=n,!ej.isNullOrUndefined(this.model.fields.groupBy)&&this.datamerged&&this.groupData?this.listitems=this.listitems[0].items?this.listitems[0].items:this.dataSource():(this.groupData=!0,this.listitems=this.listitems?this.listitems:this.dataSource()),this._renderlistContainer());this._loadInitialRemoteData=!1},_onScroll:function(n){if(n.scrollTop){var i=n.scrollTop,t=this;this.model.actionBegin&&this._trigger("actionBegin",{});this.realUllength=this.element.find("li").length;this.model.allowVirtualScrolling&&this.model.virtualScrollMode=="normal"?n.scrollTop!=n.scrollData.scrollOneStepBy+n.scrollData.scrollable&&window.setTimeout(function(){t._virtualCount==0&&t._loadVirtualList()},300):this.model.allowVirtualScrolling&&this.model.virtualScrollMode=="continuous"&&i>=Math.round($(this.listContainer).find("ul").height()-$(this.listContainer).height())&&this.listitems.length<this._totalCount&&(this._updateLoadingClass(!0),ej.DataManager&&this.model.dataSource instanceof ej.DataManager&&this._queryPromise(this.realUllength,t,this.realUllength+this.model.itemRequestCount,n))}},_queryPromise:function(n,t,i,r){this._trigger("itemRequest",{event:r,isInteraction:!0});this._setMapFields();var u=this._savedQueries.clone(),f=this.dataSource().executeQuery(u.range(n,i));this._updateLoadingClass(!0);f.done(function(i){t._trigger("actionBeforeSuccess",i);t.realUllength=r.source!="wheel"?t.mergeValue?t.mergeValue.length+n:n:n;t._loadlist(i.result)._checkboxHideShow(t.model.showCheckbox)._showResult()._updateLoadingClass();t._applySelection();t.model.virtualScrollMode=="continuous"&&t.scrollerObj.refresh();t._trigger("actionSuccess",i)}).fail(function(n){t._trigger("actionFailure",n)}).always(function(n){t._trigger("actionComplete",n)})},_loadVirtualList:function(){var n,o,i,s,h,e;this._virtualCount++;this._getLiHeight();var c=this.scrollerObj.scrollTop(),t=this,u=0,r,f=null;if(this._currentPageindex=Math.round(c/(this._liItemHeight*this.model.itemRequestCount)),$.inArray(this._currentPageindex,this._virtualPages.sort(function(n,t){return n-t}))!=-1)if(this._currentPageindex==0){if($.inArray(this._currentPageindex+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPageindex=this._currentPageindex+1}else if($.inArray(this._currentPageindex-1,this._virtualPages)!=-1){if($.inArray(this._currentPageindex+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPageindex=this._currentPageindex+1}else this._currentPageindex=this._currentPageindex-1;for(r=!($.inArray(this._currentPageindex-1,this._virtualPages)!=-1),this._updateLoadingClass(!0),n=this._virtualPages.length-1;n>=0;n--)if(this._virtualPages[n]<this._currentPageindex){u=this._virtualPages[n];n+1==this._virtualPages.length||(f=this._virtualPages[n+1]);break}if(o=r?(this._currentPageindex-1)*this.model.itemRequestCount:this._currentPageindex*this.model.itemRequestCount,i=ej.Query().range(o,this._currentPageindex*this.model.itemRequestCount+this.model.itemRequestCount),ej.DataManager){if(e=r?(this._currentPageindex-1)*this.model.itemRequestCount:this._currentPageindex*this.model.itemRequestCount,i=this.dataSource().dataSource.offline==!0?ej.Query().skip(e).take(this.model.itemRequestCount):this._getQuery().skip(e),r){for(n=0;n<i.queries.length;n++)if(i.queries[n].fn=="onTake"){i.queries.splice(n,1);break}i.take(2*this.model.itemRequestCount)}t._trigger("actionBegin")||(s=t._dataUrl.executeQuery(i),s.done(function(n){t._appendVirtualList(n.result,u,t._currentPageindex,f,r);t._trigger("actionSuccess",{e:n})}).fail(function(n){t._virtualCount--;t._trigger("actionFailure",{e:n})}).always(function(n){t._updateLoadingClass(!1);t._trigger("actionComplete",{e:n})}))}else h=ej.DataManager(t.model.dataSource).executeLocal(i),this._appendVirtualList(h,u,this._currentPageindex,f,r),this._updateLoadingClass(!1)},_appendVirtualList:function(n,t,i,r,u){var f,o,h,e,s,c;if(this._virtualCount--,this._getLiHeight(),$.inArray(i,this._virtualPages.sort(function(n,t){return n-t}))!=-1)return!1;u&&$.inArray(i-1,this._virtualPages.sort())!=-1&&(n.splice(0,this.model.itemRequestCount),u=!1);f=this.model.itemRequestCount;o=$("<ul>");h=u?(i-1)*f*this._liItemHeight-(t*f+f)*this._liItemHeight:i*f*this._liItemHeight-(t*f+f)*this._liItemHeight;h!=0&&o.append($("<span>").addClass("e-virtual").css({display:"block",height:h}));this._loadlist(n);$(this._dummyVirtualUl).attr("data-ej-page",i);u&&$(this._dummyVirtualUl).slice(0,f).attr("data-ej-page",i-1);o.append(this._dummyVirtualUl);s=this.element;e=(i*f+f)*this._liItemHeight;e=r!=null?r*f*this._liItemHeight-e:s.height()-e;e!=0&&o.append($("<span>").addClass("e-virtual").css({display:"block",height:e}));c=s.find("li[data-ej-page="+t+"]").last();c.next().remove();o.children().insertAfter(c);this.model.showCheckbox&&this._checkboxHideShow(!0);this._virtualPages.push(i);u&&this._virtualPages.push(i-1);this._virtualUl=s.clone(!0);this._showResult()},_selectListItems:function(){for(var t=this.element.find("li:not('.e-ghead')"),n=0;n<t.length;n++)$(t[n]).hasClass("selectItem")&&!$(t[n]).hasClass("e-select")&&$(t[n]).addClass("e-select").removeClass("selectItem")},_setText:function(n){for(i=0;i<this.listitems.length;i++)$(this.element.children("li")[i]).text()==n&&this.unselectAll().selectItemByIndex(i)},_getLiCount:function(){return parseInt(this.listContainer.height()/this.listItemsElement.height())},_onDragStarts:function(n,t){return this._trigger("itemDragStart",{items:n,target:t})},_onDrag:function(n,t){return this._trigger("itemDrag",{items:n,target:t})},_onDragStop:function(n,t){return this._trigger("itemDragStop",{items:n,target:t})},_onDropped:function(n){return n={droppedItemText:n[0].text,droppedItemValue:n[0].value,droppedItemIsChecked:n[0].isChecked,droppedElementData:n[0],dropTarget:[n[1].target],event:n[1].event},this._trigger("itemDrop",n)},_OnKeyPress:function(n){this.model.enableIncrementalSearch&&this.model.enabled&&this._incrementalSearch(this._isMozilla?n.charCode:n.keyCode)},_incrementalSearch:function(n){var r,e,o,t;_proxy=this;r=String.fromCharCode(n);this._incqueryString!=r?this._incqueryString+=r:this._incqueryString=r;this._incqueryString.length>0&&this._typeInterval==null&&(this._typeInterval=setTimeout(function(){_proxy._incqueryString="";_proxy._typeInterval=null},_proxy._typingThreshold));var u=this.listContainer.find("ol,ul").children("li:not('.e-ghead')"),t,h=this.model.caseSensitiveSearch,i,s=this._incqueryString,c=this._incqueryString.length,f=!1;for(h||(s=s.toLowerCase()),e=this._activeItem,--e,o=this._activeItem!=u.length-1?this._activeItem+1:0,this._incqueryString.length>1&&(o=this._activeItem),t=o;t<u.length&&e!=t;t++)if(i=$.trim($(u[t]).text()),i=h?i:i.toLowerCase(),i.substr(0,c)===s?(this._removeListHover(),this.element.children("li").removeClass("e-active"),this._selectedItem=t,this._addListHover(),f=!0):t==u.length-1&&f==!1&&(o!=0?(t=-1,++e):f=!0),f)break},_wireEvents:function(){this._on(this.listContainer,"focus",this._OnFocusIn);this._on(this.listContainer,"blur",this._OnFocusOut);$(window).on("resize",$.proxy(this._OnWindowResize,this))},_OnFocusIn:function(){this._focused||(this._trigger("focusIn"),this._on(this.listContainer,"keydown",this._OnKeyDown),this._on(this.listContainer,"keypress",this._OnKeyPress),this._focused=!0)},_OnFocusOut:function(){this._focused&&(this._trigger("focusOut"),this._off(this.listContainer,"keydown",this._OnKeyDown),this._off(this.listContainer,"keypress",this._OnKeyPress),this._focused=!1)}});ej.VirtualScrollMode={Normal:"normal",Continuous:"continuous"};ej.SortOrder={Ascending:"ascending",Descending:"descending",None:"none"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,validationMessages:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data"},observables:["checked","checkState"],checked:t.util.valueFunction("checked"),checkState:t.util.valueFunction("checkState"),_init:function(n){this._cloneElement=this.element.clone();var i=t.browserInfo();this._isIE8=i.name=="msie"&&i.version=="8.0"?!0:!1;this._isIE9=i.name=="msie"&&i.version=="9.0"?!0:!1;this._isDevice=this._checkDevice();this._setValue();this._renderControl();this.model.enableRTL&&this._setRTL();this.model.enabled&&this._wireEvents();this._setEnabled(this.model.enabled);t.isNullOrUndefined(n)||t.isNullOrUndefined(n.validationMessage)||(this.model.validationMessages=this.model.validationMessage);this.model.validationRules!=null&&(this._initValidator(),this._setValidation());this._addAttr(this.model.htmlAttributes);(this._isIE9||this._isIE8)&&this.wrapper.addClass("e-tb-cell")},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){n(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var r,i,u,f;this.wrapper.find("input").rules("add",this.model.validationRules);r=this.wrapper.closest("form").data("validator");r=r?r:this.wrapper.closest("form").validate();name=this.wrapper.find("input").attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessages)i==f?u=this.model.validationMessages[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="name"?i.element.attr(t,n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i._setEnabled(!1):t=="checked"&&n=="checked"?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,n)})},_triggerBeforeChange:function(){var n={isChecked:this._isChecked,isInteraction:!1};if(!0==this._trigger("beforeChange",n))return!1},_triggerChange:function(){var n={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!1};this._trigger("change",n)},_setModel:function(i){var r,u,f;for(r in i)switch(r){case"checked":n(this.maindiv).removeClass("e-material-animate");this.model.beforeChange&&this._triggerBeforeChange();this.checked()instanceof Array?(u=t.util.getVal(i[r]),f=u[u.length-1],this.model.value==f&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[r]),this.checked(this._isChecked));this._isChecked?this._checked():this._unChecked();this.model.change&&this._triggerChange();break;case"enableTriState":i[r]&&(this.model.enableTriState=i[r],this._indeterminateState=i[r]);break;case"checkState":this.model.enableTriState&&(this.model.beforeChange&&this._triggerBeforeChange(),this._isChecked=t.util.getVal(i[r]),this.checkState(this._isChecked),this._changeState(this._isChecked),this._setCheckBoxState(),this.checked(this._isChecked),this.model.checkState=="indeterminate"&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array?this._updateCheckedItem():i[r]=="check"?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked=this.checkState()=="uncheck"?!1:!0),this._triggerChange()));break;case"cssClass":this._changeSkin(i[r]);break;case"enableRTL":i[r]?this._setRTL():n(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[r]);break;case"validationRules":this.model.validationRules!=null&&(this.wrapper.find("input").rules("remove"),this.model.validationMessages=null);this.model.validationRules=i[r];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessages=i[r];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"validationMessages":this.model.validationMessages=i[r];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[r]);break;case"name":this.element.attr("name",i[r]);(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[r]);this.model.name=i[r];break;case"value":this.element.attr("value",i[r]);break;case"size":this._setSize(i[r]);break;case"showRoundedCorner":this._setRoundedCorner(i[r]);break;case"enabled":this._setEnabled(i[r]);break;case"htmlAttributes":this._addAttr(i[r])}},_destroy:function(){this.element.removeClass("e-checkbox e-input");!this._cloneElement.attr("name")&&this.element.attr("name")&&this.element.removeAttr("name");!this._cloneElement.attr("value")&&this.element.attr("value")&&this.element.removeAttr("value");this.element.insertBefore(this.wrapper);this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),n("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1;this._isChecked=!1;var i=this.element[0].getAttribute("id"),r=this.element[0].getAttribute("name"),n=this.element[0].getAttribute("value");t.isNullOrUndefined(i)||(this.model.id=i);t.isNullOrUndefined(r)||(this.model.name=r);t.isNullOrUndefined(n)||n==""||(this.model.value=n);this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0);t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id);this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?(n(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"),n(this.maindiv).removeClass("e-check-small").addClass("e-check-medium")):(n(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small"),n(this.maindiv).removeClass("e-check-medium").addClass("e-check-small"))},_setRoundedCorner:function(n){n?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(n){n?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?this.checkState()=="indeterminate"?this._indeterminateState=!0:this.checkState()=="check"?this._isChecked=!0:this.checkState()=="uncheck"&&(this._isChecked=!1):this.checkState()=="indeterminate"&&this.checkState("uncheck")},_createElement:function(n,t){var i=document.createElement(n);return this._setAttributes(i,t),i},_setAttributes:function(n,t){for(var i in t)n.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState();this.maindiv=this._createElement("span",{"class":"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0});this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id));this.innerdiv=document.createElement("div");this._setSize(this.model.size);this.span=document.createElement("span");this.span=n(this.span);this.spanImg=this._createElement("span",{"class":"e-chk-image e-icon",role:"presentation"});this.spanImg=n(this.spanImg);this.element.addClass("e-input");this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name;this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value});var i=n("#"+this._id+"_hidden");this._hiddenInput=i.length?i[0]:this._createElement("input",{type:"checkbox",value:!1,style:"display:none"});this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden");this._setRoundedCorner(this.model.showRoundedCorner);this.checked()&&this._setCheckedItem(this.checked());this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name));this.checked()instanceof Array||this.checked(this._isChecked);this.span[0].appendChild(this.spanImg[0]);this.innerdiv.appendChild(this.span[0]);this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]);this.maindiv.appendChild(this.element[0]);this.maindiv.appendChild(this._hiddenInput);this.maindiv.appendChild(this.innerdiv);this.wrapper=n(this.maindiv);this._setTextWrapper(this.model.text);this.chkbx=this.element;this.model.enableTriState==!0&&this._indeterminateState==!0&&this._setIndeterminate(this._indeterminateState);this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(n){n=="indeterminate"?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):n=="check"?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):n=="uncheck"&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(n){n?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checkState("indeterminate"),this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(n){n!=""&&(this.txtSpan=t.buildTag("div.e-text",n),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(n){this.model.text==""&&n!=""?this._setTextWrapper(n):this.txtSpan.html(n)},_setIdAttr:function(t){n("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper");this.element[0].setAttribute("id",t)},_isValid:function(n){return!t.isNullOrUndefined(n)&&n!=""?!0:!1},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler);this._isIE8&&this._isValid(this.model.id)&&this._on(n("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()});this._on(this.wrapper,"focus",this._focusIn);this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&n.isFunction(n.fn.tap)?"tap":"click");this._isIE8&&this._isValid(this.model.id)&&this._off(n("label[for="+this.model.id+"]"),"click");this._off(this.wrapper,"focus");this._off(this.wrapper,"focusout")},_focusIn:function(){n(this.wrapper).addClass("e-focus");n(this.wrapper).on("keydown",n.proxy(this._checkUnCheck,this))},_focusOut:function(){n(this.wrapper).removeClass("e-focus");n(this.wrapper).off("keydown",n.proxy(this._checkUnCheck,this))},_checkUnCheck:function(n){n.keyCode==32&&(n.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){var i={isChecked:this._isChecked,isInteraction:!0,event:t};return!0==this._trigger("beforeChange",i)?!1:(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0,this.checkState("check"))):this.span.hasClass("e-chk-act")?this.model.enableTriState==!0&&this.model.checkState=="check"&&this.model.checked==!0?(this._setIndeterminate(!0),this.checked()instanceof Array||(this.checked(!0),this.checkState("indeterminate"))):(this._unChecked(),this.checked()instanceof Array||(this.checked(!1),this.checkState("uncheck"))):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),n(this.maindiv).addClass("e-material-animate"),i={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!0,event:t},this._trigger("change",i),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act");this.spanImg.removeClass("e-stop").addClass("e-checkmark");this.wrapper[0].setAttribute("aria-checked",!0);this.wrapper.find("input[type=checkbox]").prop("checked",!0);this.checkState("check");this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact");this.wrapper[0].setAttribute("aria-checked",!1);this.spanImg.removeClass("e-checkmark e-stop");this.wrapper.find("input[type=checkbox]").prop("checked",!1);this.checkState("uncheck");this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(n){if(typeof n!="boolean"||n instanceof Array){if(n instanceof Array&&!t.isNullOrUndefined(this.model.value)&&this.model.value!="")for(var i=0;i<n.length;i++)n[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||this.model.value==""||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(n.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):n.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(n.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(this._isChecked!=null&&this._isChecked!=i)return this._isChecked}});t.CheckboxSize={Small:"small",Medium:"medium"};t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion),function(n,t,i,r){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content=this.model.orientation==="horizontal"?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget");this._ensureScrollers();this.content();this._setInitialValues()},_setInitialValues:function(){var n="X";this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):(this.element.addClass("e-vscrollbar"),n="Y");(this.value()!==0||this.model.minimum!==0)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){var t=n.fn.jquery;this.model.height&&this.element.height(this.model.height);this.model.width&&this.element.width(this.model.width);this._scrollData||(this._scrollData=this.model.orientation==="vertical"?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(n){for(var t in n)if(t==="value")this.value()&&this.scroll(this.value(),"none");else{this.refresh();break}},_createScroller:function(t,i,r,u){var f={},o=n.fn.jquery,e;return f.dimension=t,f.xy=i,f.position=r,f.css=u,f.uDimension=t,this._calculateLayout(f),this._createLayout(f),e=this[f.main].find(".e-button"),this._off(e,"mousedown")._on(e,"mousedown",{d:f,step:1},this._spaceMouseDown),this._off(this[f.scroll],"mousedown")._on(this[f.scroll],"mousedown",{d:f},this._spaceMouseDown),this._off(this[f.handler],"mousedown touchstart")._on(this[f.handler],"mousedown touchstart",{d:f},this._mouseDown),f},_createLayout:function(i){var r="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}<\/div>",u=n.fn.jquery,f={},o,e;f[i.dimension]=i.modelDim;e=t.buildTag("div."+i.css+"scroll e-box",String.format(r,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(r,"handlespace",i.handleSpace,String.format(r,"handle e-box e-pinch",i.handle))+String.format(r,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),f);this.element.append(e);this.element.find(".e-vhandle").addClass("e-v-line e-icon");this.element.find(".e-hhandle").addClass("e-h-line e-icon");o=u==="1.7.1"||u==="1.7.2"?i.uDimension.toLowerCase():"outer"+i.uDimension;this[i.handler]=this.element.find("."+i.handler);this[i.handler].css("transition","none");this[i.scroll]=this[i.handler].parent();this[i.main]=this[i.scroll].parent();this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(n){var i,u;n.scrollDim="scroll"+n.dimension;n.lPosition=n.position.toLowerCase();n.clientXy="page"+n.xy;n.scrollVal="scroll"+n.position;n.scrollOneStepBy=this.model.smallChange;n.modelDim=this.model[n.dimension=n.dimension.toLowerCase()];n.handler=n.css+"handle";n.buttonSize=this.model.buttonSize;n.main=n.css+"scroll";n.scroll=n.css+"ScrollSpace";n.handleSpace=n.modelDim-2*n.buttonSize;n.scrollable=this.model.maximum-this.model.minimum;i=this.model.height;this.model.orientation==="horizontal"&&(i=this.model.width);n.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize);u=!t.isNullOrUndefined(this.model.elementHeight)&&typeof this.model.elementHeight=="string"&&this.model.elementHeight.indexOf("%")!=-1?!0:!1;n.handle<20&&!u&&(n.handle=20);n.onePx=n.scrollable/(n.handleSpace-n.handle);n.fromScroller=!1;n.up=!0;n.vInterval=r},_updateLayout:function(n){this.element.height(this.model.height);this.element.width(this.model.width);var t=this.element.find("."+n.css+"handle"),f=this.element.find("."+n.css+"handlespace"),u=n.dimension=="width"?t.css("left"):t.css("top"),i=n.dimension=="width"?f.outerWidth():f.outerHeight();u!==r&&u!=="auto"&&(i>=n.handle+parseFloat(u)||(this.model.enableRTL?t.css(n.dimension==="width"?"left":"top",parseFloat(i)-n.handle):t.css(n.dimension==="width"?"left":"top",parseFloat(i)-n.handle>0?parseFloat(i)-n.handle:0)));this.element.find("."+n.css+"scroll").css(n.dimension,n.modelDim+"px").find(".e-button").css(n.dimension,this.model.buttonSize).end().find("."+n.css+"handlespace").css(n.dimension,n.handleSpace+"px").find("."+n.css+"handle").css(n.dimension,n.handle+"px")},refresh:function(){this._ensureScrollers();this.value()&&this.scroll(this.value(),"none");this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(n,i,r,u){var o=this._scrollData,f,e;if(!r)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:n,originalEvent:u}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:n,originalEvent:u}))return;this._scrollData&&(this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name!="msie"?this.value(-o.scrollable+n):this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name=="msie"?this.value(-1*n):this.value(n),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(f=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth(),n=f<(n-this.model.minimum)/this._scrollData.onePx?f:(n-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name!="msie"&&(n=f-n,n>0?n=n*-1:n),this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name=="msie"&&(n=-n),this._scrollData.enableRTL&&n>0&&!this._scrollData._scrollleftflag?n=0:n,this._scrollData._scrollleftflag&&(n>0?n=n*-1:n,this.value(n)),this.content()[0].style.left=n+"px",this._scrollData._scrollleftflag=!1):(e=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight(),n=e<(n-this.model.minimum)/this._scrollData.onePx?e:(n-this.model.minimum)/this._scrollData.onePx,t.browserInfo().name=="msie"&&isNaN(n)&&(n=""),this.content()[0].style.top=n+"px")))},_changeTop:function(n,t,i){var u,r;return u=n.dimension==="height"?this.value():this.value(),r=u+t,n.step=t,n.enableRTL&&t<0||t>0&&!n.enableRTL?n.enableRTL?r<this.model.maximum*-1&&(r=this.model.maximum*-1):r>this.model.maximum&&(r=this.model.maximum):n.enableRTL?r>this.model.minimum&&(r=this.model.minimum):r<this.model.minimum&&(r=this.model.minimum),(r!==u||this.model.infiniteScrolling)&&this.scroll(r,i),r!==u},_mouseUp:function(i){if(i.data){var r=i.data.d;clearInterval(r.vInterval);i.type=="touchend"&&n(i.target).removeClass("e-touch");i.type!=="mouseup"&&i.type!=="touchend"&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(n(document),"mousemove touchmove",this._mouseMove),n(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),r.fromScroller=!1,this[r.scroll].off("mousemove"),this[r.handler].off("mousemove").css("transition",""),i.data.source!=="thumb"||t.isNullOrUndefined(this.model)||n.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:r})},this)));r.up=!0}},_mouseDown:function(i){if(this._enabled){this._d=i;this._data=this._d.data.d;this._data.target=this._d.target;this._data.fromScroller=!0;this[this._data.handler].css("transition","none");this._on(n(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove);this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data});n(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this));i.type=="touchstart"&&n(i.target).addClass("e-touch")}},_mouseCall:function(n){n.type="mouseup";this._mouseUp(n)},_mouseMove:function(i){var u,f=0,r=parseInt(this[this._data.handler].css(this._data.lPosition))||0,o,e;if(i.preventDefault(),o=1,t.isNullOrUndefined(i.target.tagName)){if(n(i.target).is(document)){this._mouseCall(i);return}}else if(i.target.tagName.toLowerCase()==="iframe"){this._mouseCall(i);return}e=i.type=="mousemove"?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy];this._prevY&&e!==this._prevY&&(f=e-this._prevY,this.model.infiniteScrolling?(r=r+f,this._data.step=f,(this._data.enableRTL?r>0:r<0)&&(r=0),r*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(r=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),u=Math.ceil(r*this._data.onePx),this.scroll(u,"thumb")):(u=f*this._data.onePx,this._changeTop(this._data,u,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data}));o===1&&(this._prevY=e)},_spaceMouseDown:function(i){var r,u,f;if(i.data&&this._enabled&&(r=i.data.d,i.which===1&&i.target!==this[r.handler][0])){u=i.data.step?this.model.smallChange:this.model.largeChange;f=i.data.top||this[r.handler].offset()[r.lPosition];i[r.clientXy]=i[r.clientXy]||0;i[r.clientXy]<f&&(u*=-1);r.target=i.target;this._changeTop(r,u,u===3?"track":"button",i);i.data.step!==1&&this[r.scroll].mousemove(function(){r.up=!0});r.up=!1;r.vInterval=setInterval(t.proxy(function(){if((u<0?f+u/r.onePx<i[r.clientXy]:f+r.handle+u/r.onePx>i[r.clientXy])&&(r.up=!0),r.up){clearInterval(r.vInterval);return}this._changeTop(r,u,u===3?"track":"button",i);f=i.data?i.data.top||this[r.handler].offset()[r.lPosition]:this[r.handler].offset()[r.lPosition]},this),150);n(document).one("mouseup",{d:r},t.proxy(this._mouseUp,this));n(document).mouseout({d:r},t.proxy(this._mouseUp,this))}},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove();this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove();this._scrollData=null;this._content=null},_destroy:function(){this.element.remove()}});t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}}(jQuery,Syncfusion,window),function(n,t,i,r){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:r,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===r&&(this.model.enableRTL=this.element.css("direction")==="rtl"),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),this.model.targetPane!=null&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh());this._addActionClass()},_addActionClass:function(){this._browser=="msie"&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):n(this.content()[0]).height(""));t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):n(this.content()[0]).width(""))},_setScrollLeftValue:function(n){this.model.enableRTL&&(n=t.browserInfo().name=="mozilla"?n<0?n:n*-1:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&(t.browserInfo().name=="chrome"||this._rtlScrollLeftValue>0)?n<0?this._rtlScrollLeftValue+n:this._rtlScrollLeftValue-n:Math.abs(n));this.content().scrollLeft(n)},_ensureScrollers:function(){var u=n.fn.jquery,f;if(this.model.height=typeof this.model.height=="string"&&this.model.height.indexOf("px")!=-1?parseInt(this.model.height):this.model.height,this.model.width=typeof this.model.width=="string"&&this.model.width.indexOf("px")!=-1?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0){if(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),u==="1.7.1"||u==="1.7.2"?(this._contentHeight="height",this._contentWidth="width"):(this._contentHeight="outerHeight",this._contentWidth="outerWidth"),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll){if(this.content().addClass("e-content"),f=this._exactElementDimension(this.element),this._elementDimension(f),this.model.targetPane!==null&&this.content().find(this.model.targetPane)[0]!==r&&(this.content().find(this.model.targetPane)[0].scrollLeft=this.scrollLeft()),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0)n(i).on("resize",n.proxy(this._resetScroller,this))}else this.content().removeClass("e-content");this._setDimension();this._parentHeight=n(this.element).parent().height();this._parentWidth=n(this.element).parent().width()}},_elementDimension:function(n){this._ElementHeight=n.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top);this.content()[this._contentHeight](this._ElementHeight-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-hscrollbar").is(":visible")?this.model.scrollerSize:0));this._ElementWidth=n.width-(this.border_left+this.border_right+this.padding_left+this.padding_right);this.content()[this._contentWidth](this._ElementWidth-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-vscrollbar").is(":visible")?this.model.scrollerSize:0))},_convertPercentageToPixel:function(n,t){return Math.floor(n*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1){if(this.model.width>0){var i=this.content().find(this.model.targetPane);if(this.model.targetPane!=null&&i.length)return i[0].scrollWidth+i.siblings().width()>this.model.width;if(this.content()[0].scrollWidth>this.model.width)return!0;if(this.content()[0].scrollWidth==this.model.width){if(this.model.autoHide&&n(this.content()[0]).find("> *").length>0)return n(this.content()[0]).find("> *")[0].scrollWidth>n(this.content()[0]).width();if(n(this.content()[0]).find("> *").length>0)return n(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){if(t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1){if(this.model.height>0&&(this.content()[0].scrollHeight>Math.ceil(this.model.height)||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2))))return!0}else return this.content()[0].scrollHeight>this.element.outerHeight();return!1},_setModel:function(n){for(var i in n)switch(i){case"enableRTL":n[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1));this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));break;case"scrollLeft":(parseFloat(t.util.getVal(n[i]))<0||!this._hScroll)&&(n[i]=0);this._externalCall=!0;this._hScrollbar&&(n[i]=parseFloat(t.util.getVal(n[i]))>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(n[i])));this._setScrollLeftValue(parseFloat(n[i]));this.scrollLeft(n[i]);!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(n[i],!0);break;case"scrollTop":this._vScrollbar&&(n[i]=parseFloat(t.util.getVal(n[i]))>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(n[i])));(parseFloat(n[i])<0||!this._vScroll)&&(n[i]=0);this._externalCall=!0;this.content().scrollTop(parseFloat(n[i]));this.scrollTop(n[i]);this.scrollY(n[i],!0);this.refresh();break;case"touchScroll":this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");break;case"scrollOneStepBy":this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=n[i],this._vScrollbar.model.smallChange=n[i]);this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=n[i],this._hScrollbar.model.smallChange=n[i]);break;case"buttonSize":this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize);this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize);this.refresh();break;case"height":this._eleHeight=n[i];this.refresh();break;case"width":this._eleWidth=n[i];this.refresh();break;case"enabled":n[i]?this.enable():this.disable();break;default:this.refresh()}},_createScrollbar:function(i,r){var c=this,f,o,l,s,a,h=document.createElement("div"),e,u;return i===t.ScrollBar.Orientation.Vertical?(o=this.model.scrollerSize,l=t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1?f=this.model.height-(r?this.model.scrollerSize:0):f=this.element.height()-(r?this.model.scrollerSize:0),s=this.content()[0].scrollHeight,a=this.scrollTop()):(o=f=this.model.width-(r?this.model.scrollerSize:0),l=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1?(e=this.content().find(this.model.targetPane),s=this.model.targetPane!=null&&e.length?e[0].scrollWidth+e.parent().width()-e.width():this.content()[0].scrollWidth):(o=f=this.element.width()-(r?this.model.scrollerSize:0),s=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?n(this.element.children(".e-hscrollbar")).before(h):this.element.append(h),n(h).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:f,height:l,width:o,maximum:s-f,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),u=n(h).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&r||this._off(this.element,this._browser=="msie"?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,this._browser=="msie"?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:u._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=u._scrollData:this._scrollYdata=u._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(u._scrollData.enableRTL=!0),u._enabled=this.model.enabled,u},_updateScrollbar:function(i,r){var u=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;u&&(i===t.ScrollBar.Orientation.Vertical?(u.model.width=this.model.scrollerSize,u.model.height=u.model.viewportSize=this.model.height-(r?this.model.scrollerSize:0),u.model.maximum=this.content()[0].scrollHeight-u.model.viewportSize,u.model.value=this.scrollTop()):(u.model.width=u.model.viewportSize=this.model.width-(r?this.model.scrollerSize:0),u.model.height=this.model.scrollerSize,u.model.maximum=(this.model.targetPane!=null&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-n(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-u.model.viewportSize,this.model.enableRTL||(u.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide(),this._elementDimension(this._exactElementDimension(this.element))):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0;i.scrollTop!==r?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==r&&this.scrollX(i.scrollLeft,!0,"",i.source);this._updateScroll=!1;var u=this;n.when(this.content()).done(t.proxy(function(){u._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(r,u){this._scrollEle=n(r).data("ejScrollBar");this._event=u;var f=this;this._listener=function(){this._scrollEle._off(n(document),"mousemove touchmove",this._scrollEle._mouseMove);n(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle));this._scrollEle._prevY=null;this._off(n(document),"mousemove touchmove",this._mouseMove);this._off(n(document),"mouseup touchend",this._mouseUp);this._off(n(i),"blur");this._evtData.handler==="e-vhandle"?this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData}):this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})};this._on(n(i),"blur",this._listener)},_thumbStart:function(n){this._evtData=n.scrollData;var t=n.scrollData.handler==="e-vhandle"?this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"):this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"),t=n.scrollData.handler==="e-vhandle"?this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"):this.element.find("."+n.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,n);this._trigger("thumbStart",n)},_thumbMove:function(n){this._trigger("thumbMove",n)},_thumbEnd:function(t){this._trigger("thumbEnd",t);this._off(n(i),"blur")},refresh:function(i){var r,u;i||this.element.find(">.e-content").removeAttr("style");t.isNullOrUndefined(this._eleHeight)||typeof this._eleHeight!="string"||this._eleHeight.indexOf("%")==-1||this._parentHeight==n(this.element).parent().height()||(r=this._exactElementDimension(this.element.parent()),r=r.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),r));t.isNullOrUndefined(this._eleWidth)||typeof this._eleWidth!="string"||this._eleWidth.indexOf("%")==-1||this._parentWidth==n(this.element).parent().width()||(r=this._exactElementDimension(this.element.parent()),r=r.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),r));this._ensureScrollers();u=this.scrollLeft();this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),u>0?this.content().scrollLeft(u):this._setScrollLeftValue(u)):this.content().scrollLeft(u);(this.scrollTop()&&t.isNullOrUndefined(this._vScrollbar)||!t.isNullOrUndefined(this._vScrollbar)&&this._vScrollbar&&this._vScrollbar._scrollData!=null&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop());this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData));this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData));t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?this.element.find(".e-hhandle").css("left","0px"):this.model.targetPane!=null&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll);this._addActionClass();this._autohide()},_exactElementDimension:function(n){var i=n.get(0).getBoundingClientRect(),r=["left","right","top","bottom"],u,f,t;for(u=i.width?i.width:i.right-i.left,f=i.height?i.height:i.bottom-i.top,t=0;t<r.length;t++)this["border_"+r[t]]=isNaN(parseFloat(n.css("border-"+r[t]+"-width")))?0:parseFloat(n.css("border-"+r[t]+"-width")),this["padding_"+r[t]]=isNaN(parseFloat(n.css("padding-"+r[t])))?0:parseFloat(n.css("padding-"+r[t]));return{width:u,height:f}},_keyPressed:function(n,i){if(this.model.enabled){if(["input","select","textarea"].indexOf(i.tagName.toLowerCase())!==-1)return!0;var r,u;if(["up","down","pageUp","pageDown"].indexOf(n)!==-1)this._vScrollbar&&(t.browserInfo().name=="msie"&&this.model.allowVirtualScrolling&&this._content.focus(),r=this._vScrollbar._scrollData),u="o";else if(["left","right","pageLeft","pageRight"].indexOf(n)!==-1)this._hScrollbar&&(r=this._hScrollbar._scrollData),u="i";else return!0;return r?!this._changeTop(r,(n.indexOf(u)<0?-1:1)*(n[0]!=="p"?1:3)*r.scrollOneStepBy,"key"):!0}},scrollY:function(n,i,r,u,f){var e=this,f;if(n!==""){if(i){if(f={source:u||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:n,originalEvent:f},n=f.scrollTop,this.scrollTop(n),this._trigger("scroll",f))return;this.content().scrollTop(n);return}(t.isNullOrUndefined(r)||r==="")&&(r=100);this._vScrollbar&&(n=parseFloat(n)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(n));this.scrollTop(n);this.content().stop().animate({scrollTop:n},r,"linear",function(){e._trigger("scroll",{source:u||"custom",scrollData:e._vScrollbar?e._vScrollbar._scrollData:null,scrollTop:n,originalEvent:f})})}},scrollX:function(n,i,r,u,f){var o=this,e,s;if(n!==""){if(this._hScrollbar&&(n=parseFloat(n)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(n)),this._externalCall=!0,e=t.browserInfo().name,this.model.enableRTL&&e!="mozilla"&&(n<0&&(n=Math.abs(n)),s=this.model.targetPane!=null?this.content().find(this.model.targetPane)[0]:this.content()[0],f!="mousemove"&&f!="touchmove"&&e!="msie"&&e!="msie"&&(n=this._hScrollbar._scrollData.scrollable-n)),this.scrollLeft(n),i){if(this._trigger("scroll",{source:u||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:n,originalEvent:f}))return;this.model.targetPane!=null&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(n):this.content().scrollLeft(n);return}(t.isNullOrUndefined(r)||r==="")&&(r=100);this.model.targetPane!=null&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:n},r,"linear"):this.content().stop().animate({scrollLeft:n},r,"linear",function(){o._trigger("scroll",{source:u||"custom",scrollData:o._hScrollbar?o._hScrollbar._scrollData:null,scrollLeft:n,originalEvent:f})})}},enable:function(){var n=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");n.hasClass("e-disable")&&(n.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0);this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled);this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){var n=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");n.addClass("e-disable").attr({"aria-disabled":!0});this.model.enabled=!1;this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled);this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(n,i,r,u){var e=Math.ceil(this.model.targetPane!=null&&n.dimension!="height"?this.content().find(this.model.targetPane)[n.scrollVal]():this.content()[n.scrollVal]()),f;return n.dimension=="height"&&e==0&&(e=this.scrollTop()!=0?this.scrollTop():0),f=e+i,(n.enableRTL?f<n.scrollable:f>n.scrollable)&&(f=Math.round(n.scrollable)),(n.enableRTL?f>0:f<0)&&(f=0),f!==e&&(this["scroll"+n.xy](f,!0,"",r,u),n.xy!=="X"||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(f,r,!0,u):this._hScrollbar.scroll(f,r,!0,u)),f!==e},_mouseWheel:function(t){var o;if((!this._vScrollbar||!t.ctrlKey)&&(this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var u=0,f=t.data.d,r=t,e;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:r.data.d}),this._wheelStart=!1,clearTimeout(n.data(this,"timer")),this._wheelx!=1&&(t.wheelDeltaX==0||t.wheelDeltaY==0)&&(this._wheelx=1),navigator.platform.indexOf("Mac")==0&&this._wheelx==0&&(this._browser=="webkit"||this._browser=="chrome"))return!0;(this._browser=="mozilla"?t.axis==t.HORIZONTAL_AXIS?f=this._scrollXdata:this._scrollYdata:this._browser=="msie"?(t.type=="wheel"&&(u=t.deltaX/120),t.type=="mousewheel"&&t.shiftKey&&(f=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&t.wheelDeltaX!=0&&t.wheelDeltaY==0&&this._scrollXdata&&(f=this._scrollXdata),t.wheelDeltaX==0&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(u=this._normalizingDelta(t),i.opera&&parseFloat(i.opera.version,10)<10&&(u=-u)):t.detail&&(u=t.detail/3),u)&&(r.originalEvent&&(e=r.originalEvent.wheelDelta&&r.originalEvent.wheelDelta>0||r.originalEvent.detail&&r.originalEvent.detail<0?-1:1),this._changeTop(f,u*f.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():r.preventDefault(),r.stopImmediatePropagation(),r.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:r.data.d,direction:e})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:r}),this._wheelx=0),o=this,n.data(this,"timer",setTimeout(function(){o._wheelStart=!0;o._trigger("wheelStop",{originalEvent:t,scrollData:r.data.d,direction:e})},250)))}},_normalizingDelta:function(n){return navigator.platform.indexOf("Mac")==0?-n.wheelDelta/3:-n.wheelDelta/120},_contentHeightWidth:function(){this.content().siblings().css("display")=="block"&&this.model.autoHide?(this._hScroll&&this.content()[this._contentHeight](this._ElementHeight-this.model.scrollerSize),this._vScroll&&this.content()[this._contentWidth](this._ElementWidth-this.model.scrollerSize)):this.content().siblings().css("display")=="none"&&this.model.autoHide&&(this._vScroll||this._hScroll)&&(this.content()[this._contentHeight](this._ElementHeight),this.content()[this._contentWidth](this._ElementWidth))},_scrollerHover:function(n){this.model.enabled&&(n.type!="mouseenter"&&n.type!="touchstart"||this.content().siblings().is(":visible")?(n.type=="mouseleave"||n.type=="touchend")&&(this.content().siblings().hide(),this._contentHeightWidth(),this._trigger("scrollHide",{originalEvent:n})):(this.content().siblings().css("display","block"),this._contentHeightWidth(),this._ensureScrollers(),this._setScrollLeftValue(this.model.scrollLeft),this._trigger("scrollVisible",{originalEvent:n})))},_mouseUp:function(r){if(r.data){var u=r.data.d;r.type!=="mouseup"&&r.type!=="touchend"&&(r.toElement||r.relatedTarget)||(this.content().css("cursor","default"),this._off(n(document),"mousemove touchmove"),this._off(n(document),"mouseup touchend",this._mouseUp),u.fromScroller=!1,this._mouseMoved!==!0||r.data.source!=="thumb"||t.isNullOrUndefined(this.model)||(n.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:r,scrollData:u})},this)),this._off(n(i),"blur")));u.up=!0;i.ontouchmove=null}},_mouseDownOnContent:function(u){var f,s;if((this._startX=u.clientX!=r?u.clientX:u.originalEvent.changedTouches[0].clientX,this._startY=u.clientY!=r?u.clientY:u.originalEvent.changedTouches[0].clientY,this._timeStart=u.timeStamp||Date.now(),this.model.enabled)&&(f=u.data.d,this._evtData=u.data,s=f.handler==="e-vhandle"?this.element.find("."+f.handler).closest(".e-scrollbar"):this.element.find("."+f.handler).closest(".e-scrollbar"),this._bindBlurEvent(s,u),!this._trigger("thumbStart",{originalEvent:u,scrollData:f}))&&(u.which!=3||u.button!=2)){f.fromScroller=!0;var e=null,o=1,c=5,h;this._document=n(document);this._window=n(i);this._mouseMove=function(n){var s,l,u;if(this._startX+this._startY!=n.clientX+n.clientY){if(this._relDisX=(this._startx=n.clientX!=r?n.clientX:n.originalEvent.changedTouches[0].clientX)-this._startX,this._relDisY=(this._starty=n.clientY!=r?n.clientY:n.originalEvent.changedTouches[0].clientY)-this._startY,this._duration=(n.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,!t.isNullOrUndefined(n.target.tagName)&&n.target.tagName.toLowerCase()==="iframe"){n.type="mouseup";this._mouseUp(n);return}if(s=n.type=="mousemove"?n[f.clientXy]:n.originalEvent.changedTouches[0][f.clientXy],e&&s!==e&&(this._mouseMoved=!0,l=s-e,u=this.model[f.scrollVal]-l,o==1&&Math.abs(l)>c&&(h=f.position,o=0),o==0&&(e=s),u>=0&&u<=f.scrollable&&h===f.position)){var a=this._velocityY>.5&&this._duration<50&&f.position=="Top",v=this._velocityX>.5&&this._duration<50&&f.position=="Left",y=(this._velocityY>.5||this._velocityX>.5)&&this._duration<50;y?a?(u=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(u+=this.scrollTop(),u>f.scrollable&&(u=f.scrollable)):(u<this.scrollTop()&&(u=Math.abs(u-this.scrollTop())),u>this.scrollTop()&&(u=0)),this.scrollTop()<=f.scrollable&&this.scrollY(u,!1,this.model.animationSpeed,"thumb")):v&&(u=Math.abs(this._relDisX),this._startX>this._startx?(u+=this.scrollLeft(),u>f.scrollable&&(u=f.scrollable)):(u-=this.scrollLeft(),u=Math.abs(u),(u>f.scrollable||u>=this.scrollLeft())&&(u=0)),this.scrollLeft()<=f.scrollable&&this.scrollX(u,!1,this.model.animationSpeed,"thumb")):(this["scroll"+f.xy](u,!0,"","thumb",n.type),f.xy==="X"?this._hScrollbar.scroll(u,"thumb",!0,n.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(u,"thumb",!0,n.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:n,scrollData:f}))}i.ontouchmove=function(n){n=n||i.event;n.preventDefault&&n.preventDefault();n.returnValue=!1};e==null&&(e=s);this._swipe=Math.abs(this._relDisX)>Math.abs(this._relDisY)?this._relDisX<0?"left":"right":this._relDisY<0?"up":"down";(Math.round(this._content.scrollTop())==0&&this._swipe=="down"||(Math.ceil(this._content.scrollTop())==f.scrollable||Math.ceil(this._content.scrollTop())+1==f.scrollable)&&this._swipe=="up")&&(this._trigger("scrollEnd",{originalEvent:n.originalEvent,scrollData:n}),i.ontouchmove=null)}};this._on(n(document),"mousemove touchmove",{d:f,source:"thumb"},this._mouseMove);this._mouseMoved=!1;this._on(n(document),"mouseup touchend",{d:f,source:"thumb"},this._mouseUp)}},_scroll:function(n){for(var i,u,f=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],r=0;r<2;r++)if(i=f[r],i&&!i.skipChange){if(this._externalCall||(i.dimension==="height"?this.scrollTop(n.target[i.scrollVal]):this.scrollLeft(n.target[i.scrollVal])),i.sTop=this.model&&this.model.targetPane!=null&&r==1&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:i.scrollVal=="scrollTop"?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;r===1?(u=this.content()[0],this._rtlScrollLeftValue&&u.scrollWidth-u.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=u.scrollWidth-u.clientWidth),i.sTop=this.model&&t.browserInfo().name!="mozilla"&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?this._rtlScrollLeftValue==0?i.sTop*-1:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0);(f.length==2&&r==1||f.length==1&&r==0)&&(this._externalScroller=!1,this.model&&this._trigger("scroll",{source:"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.scrollLeft(),originalEvent:n}))}},_changevHandlerPosition:function(n){var t=this._vScrollbar;t&&(n=t._scrollData!=null&&n>=t._scrollData.scrollable?t._scrollData.scrollable:n,t!=null&&n>=0&&n<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,n/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(n){var t=this._hScrollbar;t&&(n=t._scrollData!=null&&n>=t._scrollData.scrollable?t._scrollData.scrollable:n,t!=null&&top>=0&&n<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,n/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove();this.content().removeClass("e-content").css({width:"",height:""});this.element.removeClass("e-widget")},_preventDefault:function(n){n=n||i.event;n.preventDefault&&n.preventDefault();n.returnValue=!1}})}(jQuery,Syncfusion,window);
